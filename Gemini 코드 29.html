<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¤‘2 ê³¼í•™: ê¸ˆì† ì›ì†Œì˜ ë¶ˆê½ƒ ë°˜ì‘ ì‹¤í—˜ì‹¤</title>
    <style>
        :root {
            --primary-color: #4a90e2;
            --bg-color: #f4f7f9;
            --panel-bg: #ffffff;
            --text-color: #333;
            --danger-color: #e74c3c;
            --success-color: #2ecc71;
        }

        body {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
            width: 100%;
            max-width: 800px;
        }

        h1 { margin: 0; color: var(--primary-color); }
        .subtitle { font-size: 0.9rem; color: #666; margin-top: 5px; }

        .container {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 20px;
            width: 100%;
            max-width: 1000px;
            background: var(--panel-bg);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        /* ì‹¤í—˜ ì˜ì—­ */
        .lab-area {
            position: relative;
            height: 400px;
            background: #2c3e50;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            padding-bottom: 20px;
            overflow: hidden;
        }

        /* ì•Œì½”ì˜¬ ë¨í”„ ë° ë¶ˆê½ƒ */
        .burner-stand {
            width: 80px;
            height: 40px;
            background: #7f8c8d;
            border-radius: 5px;
            z-index: 2;
        }

        .flame-container {
            position: absolute;
            bottom: 60px;
            width: 60px;
            height: 100px;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            filter: blur(2px);
            transition: transform 0.3s ease;
        }

        .flame {
            width: 40px;
            height: 100%;
            background: linear-gradient(to top, blue, rgba(255,255,255,0.5));
            border-radius: 50% 50% 20% 20%;
            animation: flicker 0.1s infinite alternate;
            transform-origin: bottom center;
            opacity: 0.8;
            box-shadow: 0 0 20px blue;
            transition: background 0.5s, box-shadow 0.5s;
        }

        @keyframes flicker {
            0% { transform: scaleY(1) skewX(-2deg); }
            100% { transform: scaleY(1.1) skewX(2deg); }
        }

        /* ë‹ˆí¬ë¡¬ì„  */
        .wire-tool {
            position: absolute;
            top: 50px;
            right: -200px; /* ì´ˆê¸° ìœ„ì¹˜ */
            width: 250px;
            height: 10px;
            display: flex;
            align-items: center;
            transition: right 1s ease-in-out;
            z-index: 5;
        }
        
        .wire-handle { width: 100px; height: 10px; background: #95a5a6; border-radius: 5px; }
        .wire-metal { width: 150px; height: 2px; background: #bdc3c7; }
        .wire-tip { width: 10px; height: 10px; background: #fff; border-radius: 50%; border: 1px solid #7f8c8d; }

        .wire-tool.active {
            right: 45%; /* ë¶ˆê½ƒ ì¤‘ì•™ìœ¼ë¡œ ì´ë™ */
        }

        /* ì œì–´ íŒ¨ë„ */
        .control-panel {
            padding: 10px;
        }

        .section-title {
            font-weight: bold;
            margin-bottom: 10px;
            display: block;
            border-bottom: 2px solid #eee;
            padding-bottom: 5px;
        }

        .chemical-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        button {
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
            background: #ecf0f1;
            color: #2c3e50;
        }

        button:hover { background: #bdc3c7; }
        button.selected { background: var(--primary-color); color: white; border: 2px solid #2980b9; }

        .slider-group { margin-bottom: 20px; }
        
        .toggle-switch {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            cursor: pointer;
        }
        
        .toggle-label { margin-left: 10px; font-weight: bold; }

        /* ê²°ê³¼ ì°½ (ìŠ¤í™íŠ¸ëŸ¼) */
        .result-panel {
            grid-column: 1 / -1;
            background: #000;
            padding: 15px;
            border-radius: 10px;
            color: white;
            min-height: 80px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        .spectrum-bar {
            width: 100%;
            height: 40px;
            background: #000; /* ê¸°ë³¸ ê²€ì • */
            position: relative;
            margin-top: 10px;
            border: 1px solid #333;
        }

        /* ìŠ¤í™íŠ¸ëŸ¼ ë¼ì¸ (ê°€ìƒ) */
        .spec-line {
            position: absolute;
            top: 0; bottom: 0;
            width: 2px;
            opacity: 0.8;
            box-shadow: 0 0 5px currentColor;
        }

        .feedback-box {
            grid-column: 1 / -1;
            background: #e8f6f3;
            border-left: 5px solid var(--success-color);
            padding: 15px;
            margin-top: 10px;
            display: none; /* ì´ˆê¸° ìˆ¨ê¹€ */
        }
        
        .quiz-section {
            grid-column: 1 / -1;
            margin-top: 20px;
            padding: 15px;
            background: #fff8e1;
            border-radius: 10px;
            text-align: center;
        }

        /* ì•ˆì „ ë¬¸êµ¬ */
        .safety-banner {
            background: #ffecb3;
            color: #d35400;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
            font-size: 0.85rem;
            text-align: center;
            width: 100%;
        }

    </style>
</head>
<body>

    <header>
        <h1>ğŸ”¥ ê°€ìƒ í™”í•™ ì‹¤í—˜ì‹¤: ì›ì†Œì˜ ë¶ˆê½ƒ ë°˜ì‘</h1>
        <div class="subtitle">ì¤‘í•™êµ 2í•™ë…„ ê³¼í•™ > 1. ë¬¼ì§ˆì˜ êµ¬ì„± > ì—¬ëŸ¬ ê°€ì§€ ì›ì†Œ</div>
    </header>

    <div class="safety-banner">
        âš ï¸ <strong>ì•ˆì „ ìˆ˜ì¹™:</strong> ì‹¤ì œ ì‹¤í—˜ ì‹œì—ëŠ” ë³´ì•ˆê²½ê³¼ ì¥ê°‘ì„ ì°©ìš©í•˜ê³ , í™”ê¸°ì— ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤. ì´ ì‹œë®¬ë ˆì´ì…˜ì€ ì•ˆì „í•©ë‹ˆë‹¤.
    </div>

    <div class="container">
        <div class="lab-area">
            <div class="wire-tool" id="wireTool">
                <div class="wire-handle"></div>
                <div class="wire-metal"></div>
                <div class="wire-tip" id="wireTip"></div>
            </div>
            
            <div class="flame-container" id="flameContainer">
                <div class="flame" id="flame"></div>
            </div>
            <div class="burner-stand"></div>
        </div>

        <div class="control-panel">
            <span class="section-title">1. ì‹œë£Œ ì„ íƒ (ë‹ˆí¬ë¡¬ì„ ì— ë¬»íˆê¸°)</span>
            <div class="chemical-grid">
                <button onclick="selectElement('Li', 'ë¦¬íŠ¬', '#ff1a1a', 'red')">Li (ë¦¬íŠ¬)</button>
                <button onclick="selectElement('Sr', 'ìŠ¤íŠ¸ë¡ íŠ¬', '#cc0000', 'darkred')">Sr (ìŠ¤íŠ¸ë¡ íŠ¬)</button>
                <button onclick="selectElement('Cu', 'êµ¬ë¦¬', '#00ffcc', 'bluegreen')">Cu (êµ¬ë¦¬)</button>
                <button onclick="selectElement('Na', 'ë‚˜íŠ¸ë¥¨', '#ffcc00', 'yellow')">Na (ë‚˜íŠ¸ë¥¨)</button>
            </div>

            <span class="section-title">2. ì‹¤í—˜ ë„êµ¬</span>
            <div class="slider-group">
                <label>ë¶ˆê½ƒ ì„¸ê¸°: <input type="range" min="1" max="3" value="2" id="flameSlider" oninput="adjustFlame()"></label>
            </div>
            
            <div class="toggle-switch" onclick="toggleSpectroscope()">
                <input type="checkbox" id="specToggle" style="pointer-events: none;">
                <span class="toggle-label">ğŸ” ë¶„ê´‘ê¸°ë¡œ ê´€ì°°í•˜ê¸°</span>
            </div>

            <button onclick="performExperiment()" style="width: 100%; background: var(--primary-color); color: white;">ì‹¤í—˜ ì‹œì‘ (ë¶ˆê½ƒì— ë„£ê¸°)</button>
        </div>

        <div class="result-panel">
            <div id="observationText">ì‹¤í—˜ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</div>
            <div class="spectrum-bar" id="spectrumDisplay" style="display: none;">
                </div>
        </div>

        <div class="feedback-box" id="feedbackBox"></div>

        <div class="quiz-section">
            <h3>ğŸ¤” í€´ì¦ˆ: ë°©ê¸ˆ ê´€ì°°í•œ ì›ì†ŒëŠ”?</h3>
            <p>ë¹„ìŠ·í•´ ë³´ì´ëŠ” ë¶‰ì€ìƒ‰ ë¶ˆê½ƒì´ë¼ë„ êµ¬ë³„í•  ìˆ˜ ìˆë‚˜ìš”?</p>
            <button onclick="checkAnswer('Li')">ë¦¬íŠ¬(Li)</button>
            <button onclick="checkAnswer('Sr')">ìŠ¤íŠ¸ë¡ íŠ¬(Sr)</button>
            <div id="quizResult" style="margin-top: 10px; font-weight: bold;"></div>
        </div>
    </div>

    <script>
        // ìƒíƒœ ë³€ìˆ˜
        let currentElement = null; // { symbol, name, colorCode, spectrumType }
        let isSpectroscopeOn = false;
        let isBurning = false;

        // ì›ì†Œ ë°ì´í„°ë² ì´ìŠ¤ (ìƒ‰ìƒ ë° ìŠ¤í™íŠ¸ëŸ¼ ì •ë³´)
        const elementData = {
            'Li': { 
                desc: "ì§„í•œ ë¹¨ê°„ìƒ‰ ë¶ˆê½ƒì´ ë³´ì…ë‹ˆë‹¤.", 
                spectrum: [
                    {pos: '85%', color: 'red', width: '2px'}, // 670nm ê·¼ì²˜
                    {pos: '75%', color: 'orange', width: '1px'}
                ],
                tip: "ë¦¬íŠ¬ê³¼ ìŠ¤íŠ¸ë¡ íŠ¬ì€ ëˆˆìœ¼ë¡œ ë³¼ ë•Œ ë‘˜ ë‹¤ ë¶‰ì€ìƒ‰ì´ë¼ êµ¬ë³„í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤."
            },
            'Sr': { 
                desc: "ì§™ì€ ë¹¨ê°„ìƒ‰ ë¶ˆê½ƒì´ ë³´ì…ë‹ˆë‹¤.", 
                spectrum: [
                    {pos: '88%', color: 'red', width: '2px'},
                    {pos: '82%', color: 'orangered', width: '1px'},
                    {pos: '70%', color: 'orange', width: '1px'},
                    {pos: '20%', color: 'blue', width: '1px'} // ìŠ¤íŠ¸ë¡ íŠ¬ì˜ íŠ¹ì§•ì ì¸ íŒŒë€ ì„ 
                ],
                tip: "ë¶„ê´‘ê¸°ë¥¼ ì‚¬ìš©í•˜ë©´ íŒŒë€ìƒ‰ ì˜ì—­ì˜ ì„  ìœ ë¬´ë¡œ ë¦¬íŠ¬ê³¼ êµ¬ë³„í•  ìˆ˜ ìˆì–´ìš”!"
            },
            'Cu': { 
                desc: "ì²­ë¡ìƒ‰ ë¶ˆê½ƒì´ ë³´ì…ë‹ˆë‹¤.", 
                spectrum: [
                    {pos: '40%', color: 'cyan', width: '3px'},
                    {pos: '30%', color: 'blue', width: '2px'},
                    {pos: '10%', color: 'violet', width: '1px'}
                ],
                tip: "êµ¬ë¦¬ëŠ” êµ¬ë¦¬ì„  ìì²´ë¡œë„ ì‹¤í—˜í•  ìˆ˜ ìˆìœ¼ë©°, ë…íŠ¹í•œ ì²­ë¡ìƒ‰ì„ ë±ë‹ˆë‹¤."
            },
            'Na': { 
                desc: "ë°ì€ ë…¸ë€ìƒ‰ ë¶ˆê½ƒì´ ë³´ì…ë‹ˆë‹¤.", 
                spectrum: [
                    {pos: '65%', color: 'yellow', width: '3px'} // 589nm
                ],
                tip: "ë‚˜íŠ¸ë¥¨ì€ ë§¤ìš° ë°ì€ ë…¸ë€ìƒ‰ ë¶ˆê½ƒì„ ëƒ…ë‹ˆë‹¤. ê°€ë¡œë“±ì—ë„ ì‚¬ìš©ë¼ìš”."
            }
        };

        function selectElement(symbol, name, hexColor, type) {
            currentElement = { symbol, name, hexColor, type };
            
            // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.chemical-grid button').forEach(btn => btn.classList.remove('selected'));
            event.target.classList.add('selected');

            // íŒ ìƒ‰ìƒ ë³€ê²½
            document.getElementById('wireTip').style.backgroundColor = hexColor;
            
            // í”¼ë“œë°± ì´ˆê¸°í™”
            document.getElementById('feedbackBox').style.display = 'none';
            document.getElementById('observationText').innerText = `${name} ì‹œë£Œê°€ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤. 'ì‹¤í—˜ ì‹œì‘'ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.`;
            document.getElementById('spectrumDisplay').innerHTML = ''; // ìŠ¤í™íŠ¸ëŸ¼ ì´ˆê¸°í™”
            resetFlame();
        }

        function adjustFlame() {
            const val = document.getElementById('flameSlider').value;
            const flame = document.getElementById('flame');
            flame.style.transform = `scale(${0.8 + val * 0.2})`;
        }

        function toggleSpectroscope() {
            isSpectroscopeOn = !isSpectroscopeOn;
            document.getElementById('specToggle').checked = isSpectroscopeOn;
            
            const specDisplay = document.getElementById('spectrumDisplay');
            if (isSpectroscopeOn) {
                specDisplay.style.display = 'block';
                // ì‹¤í—˜ ì¤‘ì´ë¼ë©´ ë°”ë¡œ ìŠ¤í™íŠ¸ëŸ¼ í‘œì‹œ
                if (isBurning && currentElement) {
                    showSpectrum(currentElement.symbol);
                } else {
                    specDisplay.innerHTML = '<span style="color:#aaa; font-size:0.8rem;">ë¶ˆê½ƒì´ ìˆì„ ë•Œ ìŠ¤í™íŠ¸ëŸ¼ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.</span>';
                }
            } else {
                specDisplay.style.display = 'none';
            }
        }

        function performExperiment() {
            if (!currentElement) {
                alert("ë¨¼ì € ì‹œë£Œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!");
                return;
            }

            isBurning = true;
            const wireTool = document.getElementById('wireTool');
            const flame = document.getElementById('flame');
            const obsText = document.getElementById('observationText');

            // 1. ë‹ˆí¬ë¡¬ì„  ì´ë™ ì• ë‹ˆë©”ì´ì…˜
            wireTool.classList.add('active');

            // 2. ë¶ˆê½ƒ ë°˜ì‘ ì‹œì‘ (0.5ì´ˆ í›„)
            setTimeout(() => {
                // ë¶ˆê½ƒ ìƒ‰ìƒ ë³€ê²½
                flame.style.background = `linear-gradient(to top, ${currentElement.hexColor}, rgba(255,255,255,0.2))`;
                flame.style.boxShadow = `0 0 40px ${currentElement.hexColor}`;

                // í…ìŠ¤íŠ¸ ì¶œë ¥
                obsText.innerText = `[ìœ¡ì•ˆ ê´€ì°°] ${elementData[currentElement.symbol].desc}`;

                // 3. ë¶„ê´‘ê¸° ëª¨ë“œì¼ ê²½ìš° ìŠ¤í™íŠ¸ëŸ¼ í‘œì‹œ
                if (isSpectroscopeOn) {
                    showSpectrum(currentElement.symbol);
                    obsText.innerHTML += "<br>[ë¶„ê´‘ê¸° ê´€ì°°] ê³ ìœ í•œ ìƒ‰ì˜ ë (ìŠ¤í™íŠ¸ëŸ¼)ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.";
                }

                // í•™ìŠµ í”¼ë“œë°± í‘œì‹œ
                const feedback = document.getElementById('feedbackBox');
                feedback.style.display = 'block';
                feedback.innerHTML = `<strong>ğŸ’¡ í•™ìŠµ í¬ì¸íŠ¸:</strong> ${elementData[currentElement.symbol].tip}`;

            }, 800);
        }

        function showSpectrum(symbol) {
            const container = document.getElementById('spectrumDisplay');
            container.innerHTML = ''; // ì´ˆê¸°í™”
            
            // ë°°ê²½ ê·¸ë¼ë°ì´ì…˜ (ë¬´ì§€ê°œ ë°°ê²½ ì€ì€í•˜ê²Œ ê¹”ê¸°)
            container.style.background = 'linear-gradient(90deg, #330033, #000033, #003300, #333300, #330000)';

            const lines = elementData[symbol].spectrum;
            lines.forEach(line => {
                const div = document.createElement('div');
                div.className = 'spec-line';
                div.style.left = line.pos;
                div.style.backgroundColor = line.color;
                div.style.width = line.width;
                div.style.boxShadow = `0 0 4px ${line.color}`;
                container.appendChild(div);
            });
        }

        function resetFlame() {
            isBurning = false;
            const flame = document.getElementById('flame');
            flame.style.background = 'linear-gradient(to top, blue, rgba(255,255,255,0.5))';
            flame.style.boxShadow = '0 0 20px blue';
            document.getElementById('wireTool').classList.remove('active');
        }

        function checkAnswer(answerSymbol) {
            const resultDiv = document.getElementById('quizResult');
            if (!currentElement) {
                resultDiv.innerText = "ë¨¼ì € ì‹¤í—˜ì„ ìˆ˜í–‰í•´ì£¼ì„¸ìš”.";
                resultDiv.style.color = "black";
                return;
            }

            if (currentElement.symbol === answerSymbol) {
                resultDiv.innerText = "âœ… ì •ë‹µì…ë‹ˆë‹¤! ì›ì†Œë§ˆë‹¤ ê³ ìœ í•œ ë¶ˆê½ƒìƒ‰ê³¼ ìŠ¤í™íŠ¸ëŸ¼ì´ ìˆìŠµë‹ˆë‹¤.";
                resultDiv.style.color = "green";
            } else {
                resultDiv.innerText = "âŒ ë‹¤ì‹œ ìƒê°í•´ë³´ì„¸ìš”. ë¶ˆê½ƒìƒ‰ê³¼ ìŠ¤í™íŠ¸ëŸ¼ì„ ë‹¤ì‹œ ê´€ì°°í•´ë³¼ê¹Œìš”?";
                resultDiv.style.color = "red";
            }
        }
    </script>
</body>
</html>