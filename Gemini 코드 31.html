<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¤‘2 ê³¼í•™: ì›ì êµ¬ì¡° ë§Œë“¤ê¸° ê°€ìƒì‹¤í—˜</title>
    <style>
        :root {
            --primary: #4A90E2;
            --success: #2ECC71;
            --warning: #F1C40F;
            --danger: #E74C3C;
            --dark: #2C3E50;
            --light: #ECF0F1;
        }
        body {
            font-family: 'Malgun Gothic', sans-serif;
            background-color: #f4f7f9;
            color: var(--dark);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        header {
            background-color: var(--primary);
            color: white;
            width: 100%;
            padding: 1rem;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            max-width: 1200px;
            width: 100%;
            padding: 20px;
            gap: 20px;
        }
        /* ì‹¤í—˜ ì˜ì—­ */
        .lab-panel {
            flex: 2;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        canvas {
            border: 2px solid #e0e0e0;
            border-radius: 50%;
            margin-bottom: 20px;
            background: #fff;
        }
        
        /* ì œì–´ íŒ¨ë„ */
        .control-panel {
            flex: 1;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            min-width: 300px;
        }
        
        h2 { border-bottom: 2px solid var(--primary); padding-bottom: 10px; margin-top: 0; }
        
        .control-group { margin-bottom: 20px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; }
        
        input[type=range] { width: 100%; cursor: pointer; }
        
        .status-card {
            background: var(--light);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            margin-top: 20px;
            transition: all 0.3s;
        }
        .status-neutral { background-color: #d4edda; color: #155724; border: 2px solid var(--success); }
        .status-charged { background-color: #f8d7da; color: #721c24; border: 2px solid var(--danger); }

        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            margin: 5px;
            transition: 0.2s;
        }
        .btn:hover { opacity: 0.9; }
        .btn-outline { background: transparent; border: 1px solid var(--primary); color: var(--primary); }

        /* íƒ­ ë©”ë‰´ */
        .tabs { display: flex; gap: 10px; margin-bottom: 20px; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        /* í€´ì¦ˆ ìŠ¤íƒ€ì¼ */
        .quiz-option {
            display: block;
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 10px;
            margin: 5px 0;
            cursor: pointer;
            border-radius: 5px;
        }
        .quiz-option:hover { background: #e2e6ea; }
    </style>
</head>
<body>

<header>
    <h1>ğŸ§ª ì¤‘2 ê³¼í•™: ì›ì êµ¬ì¡°ì™€ ì „ê¸°ì  ì¤‘ì„±</h1>
    <p>ì–‘ì„±ìì™€ ì „ìì˜ ê· í˜•ì„ ë§ì¶° ì¤‘ì„± ì›ìë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”!</p>
</header>

<div class="container">
    <div class="lab-panel">
        <canvas id="atomCanvas" width="400" height="400"></canvas>
        <div id="feedbackText" class="status-card">
            í˜„ì¬ ìƒíƒœ: ì‹¤í—˜ì„ ì‹œì‘í•´ ë³´ì„¸ìš”.
        </div>
    </div>

    <div class="control-panel">
        <div class="tabs">
            <button class="btn" onclick="showTab('experiment')">ì‹¤í—˜ì‹¤</button>
            <button class="btn btn-outline" onclick="showTab('concept')">ê°œë… í•™ìŠµ</button>
            <button class="btn btn-outline" onclick="showTab('quiz')">í™•ì¸ ë¬¸ì œ</button>
        </div>

        <div id="experiment" class="tab-content active">
            <div class="control-group">
                <h3>1. ì›ìí•µ ì„¤ì • (ì–‘ì„±ì ìˆ˜)</h3>
                <p>ì–‘ì„±ì ìˆ˜ì— ë”°ë¼ ì›ì†Œì˜ ì¢…ë¥˜ê°€ ê²°ì •ë©ë‹ˆë‹¤.</p>
                <input type="range" id="protonSlider" min="1" max="10" value="1" oninput="updateSim()">
                <div style="display:flex; justify-content:space-between;">
                    <span>ìˆ˜ì†Œ(1)</span>
                    <span id="protonVal" style="font-weight:bold; color:var(--danger);">1ê°œ</span>
                    <span>ë„¤ì˜¨(10)</span>
                </div>
            </div>

            <div class="control-group">
                <h3>2. ì „ì ë°°ì¹˜ (ì „ì ìˆ˜)</h3>
                <p>ì „ìì˜ ê°œìˆ˜ë¥¼ ì¡°ì ˆí•˜ì—¬ ì „í•˜ë¥¼ ë§ì¶°ë³´ì„¸ìš”.</p>
                <input type="range" id="electronSlider" min="0" max="12" value="1" oninput="updateSim()">
                <div style="display:flex; justify-content:space-between;">
                    <span>0ê°œ</span>
                    <span id="electronVal" style="font-weight:bold; color:var(--primary);">1ê°œ</span>
                    <span>12ê°œ</span>
                </div>
            </div>

            <div class="control-group">
                <button class="btn" style="width:100%" onclick="resetSim()">ì‹¤í—˜ ì´ˆê¸°í™”</button>
            </div>
            
            <div style="background:#eee; padding:10px; border-radius:5px; margin-top:10px;">
                <strong>ğŸ’¡ ë„ì „ ê³¼ì œ:</strong><br>
                ì–‘ì„±ìë¥¼ ì¡°ì ˆí•´ <strong>íƒ„ì†Œ(C)</strong>ë¥¼ ì„ íƒí•˜ê³ ,<br>
                ì „ê¸°ì ìœ¼ë¡œ <strong>ì¤‘ì„±</strong>ì´ ë˜ë„ë¡ ì „ìë¥¼ ë§ì¶°ë³´ì„¸ìš”.
            </div>
        </div>

        <div id="concept" class="tab-content">
            <h3>ğŸ“š í•µì‹¬ ê°œë… ì •ë¦¬</h3>
            <ul style="line-height: 1.6;">
                <li><strong>ì›ìí•µ:</strong> ì›ìì˜ ì¤‘ì‹¬ì— ìˆìœ¼ë©° <strong>(+)ì „í•˜</strong>ë¥¼ ë ëŠ” ì–‘ì„±ìê°€ ìˆìŠµë‹ˆë‹¤.</li>
                <li><strong>ì „ì:</strong> ì›ìí•µ ì£¼ìœ„ë¥¼ ëŒê³  ìˆìœ¼ë©° <strong>(-)ì „í•˜</strong>ë¥¼ ë±ë‹ˆë‹¤.</li>
                <li><strong>ì „ê¸°ì  ì¤‘ì„±:</strong> ì–‘ì„±ì ìˆ˜(+)ì™€ ì „ì ìˆ˜(-)ê°€ <strong>ê°™ì„ ë•Œ</strong>, ì›ìëŠ” ì „ê¸°ì ìœ¼ë¡œ ì¤‘ì„±ì…ë‹ˆë‹¤.</li>
            </ul>
            <hr>
            <h4>ë§Œì•½ ê°œìˆ˜ê°€ ë‹¤ë¥´ë‹¤ë©´?</h4>
            <ul>
                <li><strong>ì–‘ì„±ì > ì „ì:</strong> (+)ì „í•˜ë¥¼ ë ëŠ” ì–‘ì´ì˜¨</li>
                <li><strong>ì–‘ì„±ì < ì „ì:</strong> (-)ì „í•˜ë¥¼ ë ëŠ” ìŒì´ì˜¨</li>
            </ul>
        </div>

        <div id="quiz" class="tab-content">
            <h3>ğŸ“ í˜•ì„± í‰ê°€</h3>
            <div id="quizContainer">
                <p><strong>Q. íƒ„ì†Œ ì›ìê°€ ì „ê¸°ì ìœ¼ë¡œ ì¤‘ì„±ì¸ ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€ìš”?</strong></p>
                <div class="quiz-option" onclick="checkAnswer(1)">1. ì „ìê°€ ì›ìí•µ ì•ˆì— ìˆê¸° ë•Œë¬¸ì´ë‹¤.</div>
                <div class="quiz-option" onclick="checkAnswer(2)">2. ì–‘ì„±ì ìˆ˜(6ê°œ)ì™€ ì „ì ìˆ˜(6ê°œ)ê°€ ê°™ê¸° ë•Œë¬¸ì´ë‹¤.</div>
                <div class="quiz-option" onclick="checkAnswer(3)">3. ì¤‘ì„±ìê°€ ì „í•˜ë¥¼ ë ì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤.</div>
            </div>
            <div id="quizResult" style="margin-top:10px; font-weight:bold;"></div>
        </div>
    </div>
</div>

<script>
    const canvas = document.getElementById('atomCanvas');
    const ctx = canvas.getContext('2d');
    const protonSlider = document.getElementById('protonSlider');
    const electronSlider = document.getElementById('electronSlider');
    const feedbackText = document.getElementById('feedbackText');
    
    // ì›ì†Œ ë°ì´í„° (1~10ë²ˆ)
    const elements = [
        "ì—†ìŒ", "ìˆ˜ì†Œ(H)", "í—¬ë¥¨(He)", "ë¦¬íŠ¬(Li)", "ë² ë¦´ë¥¨(Be)", "ë¶•ì†Œ(B)", 
        "íƒ„ì†Œ(C)", "ì§ˆì†Œ(N)", "ì‚°ì†Œ(O)", "í”Œë£¨ì˜¤ë¦°(F)", "ë„¤ì˜¨(Ne)"
    ];

    function drawAtom(protons, electrons) {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;

        // 1. ê¶¤ë„ ê·¸ë¦¬ê¸° (ë³´ì–´ ëª¨í˜•)
        ctx.strokeStyle = "#ddd";
        ctx.lineWidth = 2;
        
        // ì²« ë²ˆì§¸ ê»ì§ˆ
        ctx.beginPath();
        ctx.arc(centerX, centerY, 60, 0, Math.PI * 2);
        ctx.stroke();

        // ë‘ ë²ˆì§¸ ê»ì§ˆ (ì „ìê°€ 2ê°œ ì´ˆê³¼ì¼ ë•Œë§Œ ì˜ë¯¸ìˆì§€ë§Œ ì‹œê°ì ìœ¼ë¡œ í•­ìƒ ê·¸ë¦¼)
        if (electrons > 2 || protons > 2) {
            ctx.beginPath();
            ctx.arc(centerX, centerY, 100, 0, Math.PI * 2);
            ctx.stroke();
        }

        // 2. ì›ìí•µ ê·¸ë¦¬ê¸°
        ctx.beginPath();
        ctx.arc(centerX, centerY, 25 + (protons * 2), 0, Math.PI * 2); // ì–‘ì„±ì ìˆ˜ì— ë”°ë¼ í¬ê¸° ì¦ê°€
        ctx.fillStyle = "#E74C3C"; // ë¹¨ê°•
        ctx.fill();
        
        // ì›ìí•µ í…ìŠ¤íŠ¸
        ctx.fillStyle = "white";
        ctx.font = "bold 14px Arial";
        ctx.textAlign = "center";
        ctx.textBaseline = "middle";
        ctx.fillText(`+${protons}`, centerX, centerY);
        
        // ì›ì†Œ ê¸°í˜¸ í‘œì‹œ (í•µ ì•„ë˜)
        ctx.fillStyle = "#2C3E50";
        ctx.font = "bold 16px Malgun Gothic";
        ctx.fillText(elements[protons], centerX, centerY + 50 + (protons * 2));

        // 3. ì „ì ê·¸ë¦¬ê¸°
        ctx.fillStyle = "#4A90E2"; // íŒŒë‘
        
        for (let i = 0; i < electrons; i++) {
            let orbitRadius, angle;
            
            if (i < 2) {
                // ì²« ë²ˆì§¸ ê»ì§ˆ (ìµœëŒ€ 2ê°œ)
                orbitRadius = 60;
                angle = (Math.PI * 2 / 2) * i - Math.PI / 2;
            } else {
                // ë‘ ë²ˆì§¸ ê»ì§ˆ (ë‚˜ë¨¸ì§€)
                orbitRadius = 100;
                // ë‘ ë²ˆì§¸ ê»ì§ˆì˜ ì „ìë“¤ì„ ê³ ë¥´ê²Œ ë¶„í¬
                let secondShellCount = electrons - 2;
                angle = (Math.PI * 2 / Math.max(1, secondShellCount)) * (i - 2) - Math.PI / 2; 
            }

            const x = centerX + Math.cos(angle) * orbitRadius;
            const y = centerY + Math.sin(angle) * orbitRadius;

            ctx.beginPath();
            ctx.arc(x, y, 6, 0, Math.PI * 2);
            ctx.fill();
        }
    }

    function updateSim() {
        const p = parseInt(protonSlider.value);
        const e = parseInt(electronSlider.value);
        
        document.getElementById('protonVal').innerText = `${p}ê°œ`;
        document.getElementById('electronVal').innerText = `${e}ê°œ`;

        drawAtom(p, e);
        analyzeStatus(p, e);
    }

    function analyzeStatus(p, e) {
        feedbackText.className = "status-card";
        let message = "";
        let detail = "";

        if (p === e) {
            feedbackText.classList.add("status-neutral");
            message = "âœ¨ ì „ê¸°ì ìœ¼ë¡œ ì¤‘ì„±ì…ë‹ˆë‹¤! âœ¨";
            detail = `ì–‘ì„±ì(+${p})ì™€ ì „ì(-${e})ì˜ ìˆ˜ê°€ ê°™ì•„ ì „í•˜ë¥¼ ë ì§€ ì•ŠìŠµë‹ˆë‹¤.`;
        } else if (p > e) {
            feedbackText.classList.add("status-charged");
            message = "âš¡ (+) ì „í•˜ë¥¼ ë ê³  ìˆìŠµë‹ˆë‹¤.";
            detail = `ì–‘ì„±ìê°€ ì „ìë³´ë‹¤ ${p - e}ê°œ ë” ë§ìŠµë‹ˆë‹¤. (ì–‘ì´ì˜¨)`;
        } else {
            feedbackText.classList.add("status-charged");
            message = "âš¡ (-) ì „í•˜ë¥¼ ë ê³  ìˆìŠµë‹ˆë‹¤.";
            detail = `ì „ìê°€ ì–‘ì„±ìë³´ë‹¤ ${e - p}ê°œ ë” ë§ìŠµë‹ˆë‹¤. (ìŒì´ì˜¨)`;
        }

        feedbackText.innerHTML = `<strong>${message}</strong><br><small>${detail}</small>`;
    }

    function resetSim() {
        protonSlider.value = 1;
        electronSlider.value = 1;
        updateSim();
    }

    function showTab(tabId) {
        document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
        document.querySelectorAll('.btn').forEach(el => {
           if(el.textContent === getBtnName(tabId)) el.classList.remove('btn-outline'); 
        });
        document.getElementById(tabId).classList.add('active');
    }
    
    function getBtnName(id) {
        if(id === 'experiment') return 'ì‹¤í—˜ì‹¤';
        if(id === 'concept') return 'ê°œë… í•™ìŠµ';
        return 'í™•ì¸ ë¬¸ì œ';
    }

    function checkAnswer(option) {
        const resultDiv = document.getElementById('quizResult');
        if (option === 2) {
            resultDiv.innerHTML = "<span style='color:green'>ì •ë‹µì…ë‹ˆë‹¤! ğŸ‘</span><br>ì›ìëŠ” ì–‘ì„±ì ìˆ˜ì™€ ì „ì ìˆ˜ê°€ ê°™ì•„ ì „ê¸°ì ìœ¼ë¡œ ì¤‘ì„±ì…ë‹ˆë‹¤.";
        } else {
            resultDiv.innerHTML = "<span style='color:red'>ë‹¤ì‹œ ìƒê°í•´ ë³´ì„¸ìš”. ğŸ¤”</span><br>ì „ê¸°ì  ì¤‘ì„±ì€ (+)ì™€ (-)ì˜ ê°œìˆ˜ì™€ ê´€ë ¨ì´ ìˆìŠµë‹ˆë‹¤.";
        }
    }

    // ì´ˆê¸° ì‹¤í–‰
    updateSim();
</script>

</body>
</html>