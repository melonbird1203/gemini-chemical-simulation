<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°€ìƒ ì‹¤í—˜: ë°˜ì‘ ì†ë„ì‹ ë„ì¶œ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #50e3c2;
            --bg-color: #f4f7f6;
            --text-color: #333;
            --card-bg: #ffffff;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            background: var(--primary-color);
            color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        h1, h2, h3 { margin: 0 0 10px 0; }
        
        .lab-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .lab-layout { grid-template-columns: 1fr; }
        }

        .card {
            background: var(--card-bg);
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            margin-bottom: 20px;
        }

        .control-group {
            margin-bottom: 20px;
            padding: 15px;
            background: #eef2f5;
            border-radius: 8px;
        }

        label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
        }

        input[type="range"] {
            width: 100%;
            cursor: pointer;
        }

        .value-display {
            font-size: 1.2em;
            color: var(--primary-color);
            font-weight: bold;
            float: right;
        }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: background 0.3s;
            margin-right: 10px;
        }

        button:hover { background-color: #357abd; }
        button.reset { background-color: #e74c3c; }
        button.reset:hover { background-color: #c0392b; }
        button.print { background-color: #2ecc71; }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }

        th { background-color: #f2f2f2; }

        .equation-box {
            text-align: center;
            font-size: 1.3em;
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #ffeeba;
            margin-bottom: 20px;
        }

        .feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            display: none;
        }
        .feedback.correct { background-color: #d4edda; color: #155724; }
        .feedback.incorrect { background-color: #f8d7da; color: #721c24; }

        .quiz-inputs input {
            width: 50px;
            padding: 5px;
            text-align: center;
        }
    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>ğŸ§ª í™”í•™ ë°˜ì‘ ì†ë„ ì‹¤í—˜ì‹¤</h1>
        <p>ë†ë„ ë³€í™”ì— ë”°ë¥¸ ë°˜ì‘ ì†ë„ë¥¼ ì¸¡ì •í•˜ê³  ë°˜ì‘ ì°¨ìˆ˜(Order)ë¥¼ êµ¬í•´ë³´ì„¸ìš”.</p>
    </header>

    <div class="equation-box">
        ë°˜ì‘ì‹: <strong>NHâ‚„âº(aq) + NOâ‚‚â»(aq) â†’ Nâ‚‚(g) + 2Hâ‚‚O(l)</strong><br>
        ì†ë„ì‹: <em>v = k [NHâ‚„âº]áµ [NOâ‚‚â»]â¿</em>
    </div>

    <div class="lab-layout">
        <div class="left-panel">
            <div class="card">
                <h3>ğŸ›ï¸ ì‹¤í—˜ ì¡°ê±´ ì„¤ì •</h3>
                <p>ì˜¨ë„ëŠ” 25â„ƒë¡œ ì¼ì •í•©ë‹ˆë‹¤. (k = 2.0 Ã— 10â»â´)</p>
                
                <div class="control-group">
                    <label>
                        [NHâ‚„âº] ì´ˆê¸° ë†ë„ (M)
                        <span id="val-a" class="value-display">0.10</span>
                    </label>
                    <input type="range" id="range-a" min="0.01" max="0.40" step="0.01" value="0.10">
                </div>

                <div class="control-group">
                    <label>
                        [NOâ‚‚â»] ì´ˆê¸° ë†ë„ (M)
                        <span id="val-b" class="value-display">0.10</span>
                    </label>
                    <input type="range" id="range-b" min="0.01" max="0.40" step="0.01" value="0.10">
                </div>

                <button onclick="runExperiment()">âš—ï¸ ì‹¤í—˜ ì‹œì‘ (ì¸¡ì •)</button>
                <button class="reset" onclick="resetLab()">ğŸ”„ ì´ˆê¸°í™”</button>
            </div>

            <div class="card">
                <h3>ğŸ“ ê²°ê³¼ í•´ì„ ë° í€´ì¦ˆ</h3>
                <p>ìœ„ ì‹¤í—˜ ë°ì´í„°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ë°˜ì‘ ì°¨ìˆ˜ mê³¼ nì„ ì˜ˆì¸¡í•˜ì„¸ìš”.</p>
                <div class="quiz-inputs">
                    <label>m (NHâ‚„âºì˜ ì°¨ìˆ˜): <input type="number" id="input-m" min="0" max="3"></label><br><br>
                    <label>n (NOâ‚‚â»ì˜ ì°¨ìˆ˜): <input type="number" id="input-n" min="0" max="3"></label>
                </div>
                <br>
                <button onclick="checkAnswer()">ì •ë‹µ í™•ì¸</button>
                <div id="quiz-feedback" class="feedback"></div>
            </div>
            
            <div class="card">
                 <button class="print" onclick="window.print()">ğŸ–¨ï¸ ë³´ê³ ì„œ ì¸ì‡„ (PDF ì €ì¥)</button>
            </div>
        </div>

        <div class="right-panel">
            <div class="card">
                <h3>ğŸ“Š ì‹¤í—˜ ë°ì´í„° ê¸°ë¡</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ì‹¤í—˜ #</th>
                            <th>[NHâ‚„âº] (M)</th>
                            <th>[NOâ‚‚â»] (M)</th>
                            <th>ì´ˆê¸° ì†ë„ (M/s)</th>
                        </tr>
                    </thead>
                    <tbody id="data-table-body">
                        </tbody>
                </table>
            </div>

            <div class="card">
                <h3>ğŸ“ˆ ë†ë„ vs ì†ë„ ê·¸ë˜í”„</h3>
                <canvas id="rateChart"></canvas>
            </div>
        </div>
    </div>
</div>

<script>
    // ìƒìˆ˜ ë° ìƒíƒœ ë³€ìˆ˜
    const k = 2.0e-4; // ì†ë„ ìƒìˆ˜
    const actualM = 1; // ì‹¤ì œ ì •ë‹µ m
    const actualN = 1; // ì‹¤ì œ ì •ë‹µ n
    
    let experimentCount = 0;
    let experimentData = [];
    let chart;

    // DOM ìš”ì†Œ ì°¸ì¡°
    const rangeA = document.getElementById('range-a');
    const rangeB = document.getElementById('range-b');
    const valA = document.getElementById('val-a');
    const valB = document.getElementById('val-b');
    const tableBody = document.getElementById('data-table-body');
    const feedbackBox = document.getElementById('quiz-feedback');

    // ì´ˆê¸°í™”
    function init() {
        updateDisplays();
        initChart();
    }

    // ìŠ¬ë¼ì´ë” ê°’ ì—…ë°ì´íŠ¸
    rangeA.addEventListener('input', updateDisplays);
    rangeB.addEventListener('input', updateDisplays);

    function updateDisplays() {
        valA.textContent = parseFloat(rangeA.value).toFixed(2);
        valB.textContent = parseFloat(rangeB.value).toFixed(2);
    }

    // ì°¨íŠ¸ ì´ˆê¸°í™”
    function initChart() {
        const ctx = document.getElementById('rateChart').getContext('2d');
        chart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: [],
                datasets: [{
                    label: 'ì´ˆê¸° ë°˜ì‘ ì†ë„ (Ã—10â»â¶ M/s)',
                    data: [],
                    backgroundColor: 'rgba(74, 144, 226, 0.6)',
                    borderColor: 'rgba(74, 144, 226, 1)',
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    y: { beginAtZero: true, title: { display: true, text: 'ì†ë„ (Ã—10â»â¶ M/s)' } }
                }
            }
        });
    }

    // ì‹¤í—˜ ì‹¤í–‰
    function runExperiment() {
        const concA = parseFloat(rangeA.value);
        const concB = parseFloat(rangeB.value);

        // ì´ë¯¸ ë™ì¼í•œ ì¡°ê±´ìœ¼ë¡œ ì‹¤í—˜í–ˆëŠ”ì§€ í™•ì¸ (ì„ íƒ ì‚¬í•­)
        // ì—¬ê¸°ì„œëŠ” ë°˜ë³µ ì‹¤í—˜ í—ˆìš©

        // ì†ë„ ê³„ì‚°: v = k * [A]^m * [B]^n
        const rate = k * Math.pow(concA, actualM) * Math.pow(concB, actualN);
        
        // í™”ë©´ í‘œì‹œìš© ì†ë„ (ë„ˆë¬´ ì‘ìœ¼ë¯€ë¡œ 10^6ì„ ê³±í•´ì„œ í‘œì‹œ)
        const displayRate = (rate * 1e6).toFixed(2);

        experimentCount++;
        
        // ë°ì´í„° ì €ì¥
        const dataPoint = {
            id: experimentCount,
            concA: concA.toFixed(2),
            concB: concB.toFixed(2),
            rate: rate,
            displayRate: displayRate
        };
        experimentData.push(dataPoint);

        // í…Œì´ë¸” ì—…ë°ì´íŠ¸
        updateTable(dataPoint);
        
        // ì°¨íŠ¸ ì—…ë°ì´íŠ¸
        updateChart(dataPoint);
    }

    function updateTable(data) {
        const row = document.createElement('tr');
        row.innerHTML = `
            <td>${data.id}</td>
            <td>${data.concA}</td>
            <td>${data.concB}</td>
            <td>${data.rate.toExponential(2)}</td>
        `;
        tableBody.appendChild(row);
    }

    function updateChart(data) {
        chart.data.labels.push(`ì‹¤í—˜ ${data.id}`);
        chart.data.datasets[0].data.push(data.displayRate);
        chart.update();
    }

    // í€´ì¦ˆ ì •ë‹µ í™•ì¸
    function checkAnswer() {
        const userM = parseInt(document.getElementById('input-m').value);
        const userN = parseInt(document.getElementById('input-n').value);

        feedbackBox.style.display = 'block';
        feedbackBox.className = 'feedback';

        if (userM === actualM && userN === actualN) {
            feedbackBox.classList.add('correct');
            feedbackBox.innerHTML = `<strong>ğŸ‰ ì •ë‹µì…ë‹ˆë‹¤!</strong><br> 
                [NHâ‚„âº]ê°€ 2ë°° ë  ë•Œ ì†ë„ê°€ 2ë°°ì´ë¯€ë¡œ m=1,<br>
                [NOâ‚‚â»]ê°€ 2ë°° ë  ë•Œ ì†ë„ê°€ 2ë°°ì´ë¯€ë¡œ n=1 ì…ë‹ˆë‹¤.<br>
                ë”°ë¼ì„œ ì „ì²´ ë°˜ì‘ ì°¨ìˆ˜ëŠ” 2ì°¨ ë°˜ì‘ì…ë‹ˆë‹¤.`;
        } else {
            feedbackBox.classList.add('incorrect');
            let hint = "<strong>ğŸ¤” ë‹¤ì‹œ ìƒê°í•´ë³¼ê¹Œìš”?</strong><br>";
            hint += "ì‹¤í—˜ ë°ì´í„°ë¥¼ ë¹„êµí•´ë³´ì„¸ìš”.<br>";
            hint += "í•œ ë¬¼ì§ˆì˜ ë†ë„ë§Œ 2ë°°ë¡œ ë³€í–ˆì„ ë•Œ, ì†ë„ëŠ” ëª‡ ë°°ê°€ ë˜ì—ˆë‚˜ìš”?";
            feedbackBox.innerHTML = hint;
        }
    }

    // ì „ì²´ ì´ˆê¸°í™”
    function resetLab() {
        experimentCount = 0;
        experimentData = [];
        tableBody.innerHTML = '';
        chart.data.labels = [];
        chart.data.datasets[0].data = [];
        chart.update();
        feedbackBox.style.display = 'none';
        document.getElementById('input-m').value = '';
        document.getElementById('input-n').value = '';
    }

    // ì‹¤í–‰
    init();
</script>

</body>
</html>