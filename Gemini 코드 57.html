<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°€ìƒ ì‹¤í—˜: ì‰í¬ ìƒ‰ì†Œ ë¶„ë¦¬í•˜ê¸°</title>
    <style>
        body { font-family: 'Nanum Gothic', sans-serif; background-color: #f0f4f8; margin: 0; padding: 20px; color: #333; }
        .container { max-width: 900px; margin: 0 auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        h1 { text-align: center; color: #2c3e50; }
        
        /* ì‹¤í—˜ ì˜ì—­ ë ˆì´ì•„ì›ƒ */
        .lab-area { display: flex; flex-wrap: wrap; gap: 20px; justify-content: space-around; margin-top: 20px; }
        .controls { flex: 1; min-width: 250px; background: #eef2f5; padding: 20px; border-radius: 10px; }
        .simulation { flex: 1.5; min-width: 300px; position: relative; height: 500px; background: #fff; border: 2px solid #ddd; border-radius: 10px; overflow: hidden; display: flex; justify-content: center; align-items: flex-end; }
        
        /* ì‹œë®¬ë ˆì´ì…˜ ê·¸ë˜í”½ ìš”ì†Œ */
        .beaker { width: 200px; height: 350px; border: 3px solid #aaa; border-top: none; position: relative; border-radius: 0 0 20px 20px; margin-bottom: 20px; background: rgba(255,255,255,0.5); z-index: 2; }
        .solvent { width: 100%; height: 60px; background-color: rgba(135, 206, 235, 0.5); position: absolute; bottom: 0; border-radius: 0 0 17px 17px; transition: background-color 0.5s; }
        .paper-strip { width: 60px; height: 300px; background: white; border: 1px solid #eee; position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); box-shadow: 2px 2px 5px rgba(0,0,0,0.1); z-index: 1; }
        .start-line { width: 100%; height: 1px; background: #ccc; position: absolute; bottom: 40px; }
        
        /* ì‰í¬ ì  ë° ë¶„ë¦¬ íš¨ê³¼ */
        .ink-spot { width: 10px; height: 10px; border-radius: 50%; position: absolute; bottom: 35px; left: 50%; transform: translateX(-50%); z-index: 5; transition: all 0.3s; }
        .separated-color { width: 12px; height: 12px; border-radius: 50%; position: absolute; left: 50%; transform: translateX(-50%); opacity: 0; filter: blur(4px); transition: top 5s ease-out, opacity 2s; bottom: 35px; }
        
        /* ìš©ë§¤ ì „ì„  */
        .solvent-front { width: 100%; height: 0%; background: linear-gradient(to top, rgba(135, 206, 235, 0.2), rgba(135, 206, 235, 0)); position: absolute; bottom: 0; transition: height 5s linear; }

        /* ì»¨íŠ¸ë¡¤ UI */
        label { display: block; margin-top: 15px; font-weight: bold; }
        select, button, input[type="range"] { width: 100%; padding: 10px; margin-top: 5px; border-radius: 5px; border: 1px solid #ccc; font-size: 16px; }
        button { cursor: pointer; background-color: #3498db; color: white; border: none; font-weight: bold; margin-top: 20px; transition: background 0.3s; }
        button:hover { background-color: #2980b9; }
        button:disabled { background-color: #95a5a6; cursor: not-allowed; }
        
        .result-box { margin-top: 20px; padding: 15px; background: #fff8e1; border-left: 5px solid #ffc107; border-radius: 5px; display: none; }
        .tooltip { font-size: 0.9em; color: #666; margin-top: 5px; }

    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ¨ ì‰í¬ ì†ì˜ ìƒ‰ì†Œ ì°¾ê¸° (í¬ë¡œë§ˆí† ê·¸ë˜í”¼)</h1>
    <p>ê²€ì€ìƒ‰ ì‚¬ì¸íœì€ ì •ë§ ê²€ì€ìƒ‰ìœ¼ë¡œë§Œ ë˜ì–´ ìˆì„ê¹Œìš”? ì‹¤í—˜ì„ í†µí•´ í™•ì¸í•´ ë´…ì‹œë‹¤.</p>
    
    <div class="lab-area">
        <div class="controls">
            <h3>ğŸ”¬ ì‹¤í—˜ ì¡°ê±´ ì„¤ì •</h3>
            
            <label for="penType">1. íœ ì¢…ë¥˜ ì„ íƒ</label>
            <select id="penType" onchange="resetExperiment()">
                <option value="water-black">ê²€ì€ìƒ‰ ìˆ˜ì„± ì‚¬ì¸íœ</option>
                <option value="oil-black">ê²€ì€ìƒ‰ ìœ ì„± íœ (ë„¤ì„íœ)</option>
                <option value="water-blue">íŒŒë€ìƒ‰ ìˆ˜ì„± ì‚¬ì¸íœ</option>
            </select>
            <div class="tooltip">Tip: ìœ ì„± íœì€ ë¬¼ì— ì§€ì›Œì§€ì§€ ì•Šì•„ìš”.</div>

            <label for="solventType">2. ìš©ë§¤(ì•¡ì²´) ì„ íƒ</label>
            <select id="solventType" onchange="changeSolventColor()">
                <option value="water">ë¬¼ (Water)</option>
                <option value="ethanol">ì—íƒ„ì˜¬ (Ethanol)</option>
            </select>
            
            <label for="dotPosition">3. ì‰í¬ ì  ìœ„ì¹˜ ì¡°ì ˆ (ì‹œì‘ì„ )</label>
            <input type="range" id="dotPosition" min="10" max="80" value="40" oninput="moveDot()">
            <div class="tooltip" id="pos-tooltip">í˜„ì¬ ìœ„ì¹˜: ì ì ˆí•¨</div>

            <button id="startBtn" onclick="runExperiment()">ì‹¤í—˜ ì‹œì‘í•˜ê¸° â–¶</button>
            <button id="resetBtn" onclick="resetExperiment()" style="background-color: #e74c3c; display: none;">ë‹¤ì‹œ í•˜ê¸° â†º</button>
        </div>

        <div class="simulation">
            <div class="beaker">
                <div class="solvent" id="solventVisual"></div>
            </div>
            <div class="paper-strip">
                <div class="solvent-front" id="solventFront"></div>
                <div class="start-line"></div>
                
                <div class="ink-spot" id="mainDot" style="background-color: black;"></div>
                
                <div class="separated-color c1" id="c1"></div>
                <div class="separated-color c2" id="c2"></div>
                <div class="separated-color c3" id="c3"></div>
            </div>
        </div>
    </div>

    <div class="result-box" id="resultBox">
        <h3 id="resultTitle">ì‹¤í—˜ ê²°ê³¼</h3>
        <p id="resultText"></p>
    </div>
</div>

<script>
    const mainDot = document.getElementById('mainDot');
    const solventVisual = document.getElementById('solventVisual');
    const solventFront = document.getElementById('solventFront');
    const resultBox = document.getElementById('resultBox');
    const resultTitle = document.getElementById('resultTitle');
    const resultText = document.getElementById('resultText');
    const startBtn = document.getElementById('startBtn');
    const resetBtn = document.getElementById('resetBtn');

    // ìƒ‰ì†Œ ìš”ì†Œë“¤
    const c1 = document.getElementById('c1');
    const c2 = document.getElementById('c2');
    const c3 = document.getElementById('c3');

    function moveDot() {
        const val = document.getElementById('dotPosition').value;
        const solventHeight = 60; // css height
        const paperBottomOffset = 20; 
        
        // ì¢…ì´ ì•ˆì—ì„œì˜ ìƒëŒ€ì  ìœ„ì¹˜
        mainDot.style.bottom = val + 'px';
        
        // ì‹œì‘ì„ ë„ ê°™ì´ ì´ë™
        document.querySelector('.start-line').style.bottom = (parseInt(val) + 5) + 'px';

        // íˆ´íŒ ì—…ë°ì´íŠ¸
        const tooltip = document.getElementById('pos-tooltip');
        // ìš©ë§¤ ë†’ì´(60) - ì¢…ì´ ë„ìš´ ë†’ì´(20) = ì¢…ì´ í•˜ë‹¨ì—ì„œ 40px ì§€ì ì´ ìˆ˜ë©´
        if (val < 40) {
            tooltip.innerHTML = "<span style='color:red'>âš  ìœ„í—˜: ì ì´ ë¬¼ì— ì ê¹ë‹ˆë‹¤!</span>";
        } else {
            tooltip.innerHTML = "í˜„ì¬ ìœ„ì¹˜: ì ì ˆí•¨";
        }
    }

    function changeSolventColor() {
        const solvent = document.getElementById('solventType').value;
        if(solvent === 'water') {
            solventVisual.style.backgroundColor = 'rgba(135, 206, 235, 0.5)'; // ë¬¼ ìƒ‰
        } else {
            solventVisual.style.backgroundColor = 'rgba(200, 200, 200, 0.5)'; // ì—íƒ„ì˜¬ (ë¬´ìƒ‰ íˆ¬ëª… ëŠë‚Œ)
        }
        resetExperiment();
    }

    function runExperiment() {
        const pen = document.getElementById('penType').value;
        const solvent = document.getElementById('solventType').value;
        const dotPos = parseInt(document.getElementById('dotPosition').value);

        startBtn.style.display = 'none';
        resetBtn.style.display = 'block';
        resultBox.style.display = 'block';
        resultTitle.innerText = "ì‹¤í—˜ ì§„í–‰ ì¤‘...";
        resultText.innerText = "ìš©ë§¤ê°€ ì¢…ì´ë¥¼ íƒ€ê³  ì˜¬ë¼ê°€ê³  ìˆìŠµë‹ˆë‹¤. ì‰í¬ì˜ ë³€í™”ë¥¼ ê´€ì°°í•˜ì„¸ìš”!";

        // 1. ì‹¤íŒ¨ ì¼€ì´ìŠ¤: ì ì´ ìš©ë§¤ì— ì ê¹€
        if (dotPos < 40) { // 40pxëŠ” ìˆ˜ë©´ ë†’ì´ ê¸°ì¤€
            resultTitle.innerText = "ì‹¤í—˜ ì‹¤íŒ¨!";
            resultText.innerHTML = "ì‰í¬ ì ì´ ìš©ë§¤ì— ì§ì ‘ ë‹¿ì•„ë²„ë ¸ìŠµë‹ˆë‹¤.<br>ì‰í¬ê°€ ëª¨ë‘ ë¬¼ì— ë…¹ì•„ í¼ì ¸ë²„ë ¸ë„¤ìš”. <strong>ì ì€ ìš©ë§¤ ìˆ˜ë©´ë³´ë‹¤ ìœ„ìª½ì— ì°ì–´ì•¼ í•©ë‹ˆë‹¤.</strong>";
            mainDot.style.transform = "scale(5)";
            mainDot.style.opacity = "0.1";
            return;
        }

        // 2. ìš©ë§¤ ì „ì„  ìƒìŠ¹ ì• ë‹ˆë©”ì´ì…˜
        solventFront.style.height = "90%"; // ëê¹Œì§€ ì˜¬ë¼ê°

        // 3. ë¶„ë¦¬ ë¡œì§
        setTimeout(() => {
            if (pen === 'water-black' && solvent === 'water') {
                // ì„±ê³µì ì¸ ë¶„ë¦¬ (ê²€ì • ìˆ˜ì„± + ë¬¼)
                animateSeparation(['#00ffff', '#ff00ff', '#ffff00'], [250, 200, 150]); // ì²­ë¡, ìì£¼, ë…¸ë‘
                showResult("ì„±ê³µ! ê²€ì€ìƒ‰ ì‰í¬ê°€ ë¶„ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.", 
                    "ê²€ì€ìƒ‰ ì‰í¬ëŠ” ì‚¬ì‹¤ <strong>ì—¬ëŸ¬ ìƒ‰ì†Œì˜ í˜¼í•©ë¬¼</strong>ì´ì—ˆêµ°ìš”! <br>ê°€ë³ê³  ìš©ë§¤ì™€ ì¹œí•œ ìƒ‰ì†ŒëŠ” ë©€ë¦¬ê¹Œì§€ ì´ë™í•˜ê³ , ê·¸ë ‡ì§€ ì•Šì€ ìƒ‰ì†ŒëŠ” ì•„ë˜ìª½ì— ë‚¨ìŠµë‹ˆë‹¤.");
            } else if (pen === 'oil-black' && solvent === 'water') {
                // ë¶„ë¦¬ ì•ˆë¨ (ìœ ì„± + ë¬¼)
                // ì‰í¬ê°€ ë²ˆì§€ì§€ ì•ŠìŒ
                showResult("ë¶„ë¦¬ë˜ì§€ ì•ŠìŒ", 
                    "ìœ ì„± íœì˜ ì‰í¬ëŠ” <strong>ë¬¼ì— ë…¹ì§€ ì•Šì•„ì„œ</strong> ì´ë™í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br>ì´ëŸ´ ë• ë‹¤ë¥¸ ìš©ë§¤(ì˜ˆ: ì—íƒ„ì˜¬)ê°€ í•„ìš”í•´ìš”.");
            } else if (pen === 'oil-black' && solvent === 'ethanol') {
                // ì„±ê³µ (ìœ ì„± + ì—íƒ„ì˜¬)
                animateSeparation(['#555', '#333', '#000'], [240, 220, 200]); // ê²€ì • ê³„ì—´ ë¶„ë¦¬
                showResult("ì„±ê³µ! ìœ ì„± íœë„ ë¶„ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.", 
                    "ë¬¼ì—ëŠ” ì•ˆ ë…¹ë˜ ìœ ì„± ì‰í¬ê°€ <strong>ì—íƒ„ì˜¬ì—ëŠ” ë…¹ì•„ì„œ</strong> ë¶„ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤. <br>ë¬¼ì§ˆë§ˆë‹¤ ì˜ ë…¹ëŠ” ìš©ë§¤ê°€ ë‹¤ë¥´ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
            } else if (pen === 'water-blue' && solvent === 'water') {
                 // íŒŒë€ìƒ‰ ë¶„ë¦¬
                 animateSeparation(['#0000ff', '#8a2be2'], [260, 230]); // íŒŒë‘, ë³´ë¼
                 showResult("ì„±ê³µ! íŒŒë€ìƒ‰ ì‰í¬ ë¶„ë¦¬", 
                    "íŒŒë€ìƒ‰ ì‰í¬ ì†ì—ë„ ë³´ë¼ìƒ‰ ë“±ì˜ ë‹¤ë¥¸ ìƒ‰ì†Œê°€ ìˆ¨ì–´ìˆì—ˆë„¤ìš”!");
            } else {
                // ê·¸ ì™¸ (ìˆ˜ì„± + ì—íƒ„ì˜¬ ë“± - ë³´í†µ ì˜ ì•ˆë˜ê±°ë‚˜ ë²ˆì§)
                animateSeparation(['#aaa'], [100]);
                showResult("ê´€ì°° ê²°ê³¼", "ì‰í¬ê°€ ì•½ê°„ ë²ˆì¡Œì§€ë§Œ ëšœë ·í•˜ê²Œ ë¶„ë¦¬ë˜ì§„ ì•Šì•˜ìŠµë‹ˆë‹¤. ìš©ë§¤ì™€ ì‰í¬ì˜ ê¶í•©ì´ ì¤‘ìš”í•©ë‹ˆë‹¤.");
            }
        }, 500); // ì•½ê°„ì˜ ë”œë ˆì´ í›„ ì‹œì‘
    }

    function animateSeparation(colors, heights) {
        // ìƒ‰ì†Œ ì´ˆê¸°í™”
        [c1, c2, c3].forEach(el => { el.style.opacity = 0; el.style.bottom = mainDot.style.bottom; });

        // ì ì°¨ì ìœ¼ë¡œ ìƒ‰ì†Œ ë‚˜íƒ€ë‚˜ë©° ì´ë™
        if(colors.length > 0) { setupColor(c1, colors[0], heights[0]); }
        if(colors.length > 1) { setupColor(c2, colors[1], heights[1]); }
        if(colors.length > 2) { setupColor(c3, colors[2], heights[2]); }
    }

    function setupColor(element, color, height) {
        element.style.backgroundColor = color;
        element.style.opacity = 0.8;
        // ì• ë‹ˆë©”ì´ì…˜: í˜„ì¬ ìœ„ì¹˜(bottom) + ì´ë™í•  ë†’ì´
        // ì£¼ì˜: bottom ê¸°ì¤€ì´ë¯€ë¡œ startPos + height
        let startPos = parseInt(mainDot.style.bottom);
        element.style.bottom = (startPos + height) + "px";
    }

    function showResult(title, desc) {
        setTimeout(() => {
            resultTitle.innerText = title;
            resultTitle.style.color = "#d35400";
            resultText.innerHTML = desc;
        }, 4000); // ì• ë‹ˆë©”ì´ì…˜ ì–¼ì¶” ëë‚  ë•Œ ì¯¤ í…ìŠ¤íŠ¸ ë³€ê²½
    }

    function resetExperiment() {
        startBtn.style.display = 'block';
        resetBtn.style.display = 'none';
        resultBox.style.display = 'none';
        
        solventFront.style.height = "0%";
        mainDot.style.transform = "scale(1)";
        mainDot.style.opacity = "1";
        
        // íœ ì¢…ë¥˜ì— ë”°ë¼ ì  ìƒ‰ìƒ ë³€ê²½
        const pen = document.getElementById('penType').value;
        if(pen.includes('blue')) mainDot.style.backgroundColor = 'blue';
        else mainDot.style.backgroundColor = 'black';

        // ìƒ‰ì†Œ ì›ìœ„ì¹˜
        [c1, c2, c3].forEach(el => {
            el.style.bottom = "35px";
            el.style.opacity = 0;
            el.style.transition = "none"; // ë¦¬ì…‹í•  ë• ì• ë‹ˆë©”ì´ì…˜ ì—†ì´
        });
        
        // íŠ¸ëœì§€ì…˜ ë³µêµ¬ (ì•½ê°„ ë’¤ì—)
        setTimeout(() => {
             [c1, c2, c3].forEach(el => { el.style.transition = "bottom 5s ease-out, opacity 2s"; });
        }, 100);

        moveDot(); // ìœ„ì¹˜ ì¬ì„¤ì •
    }

    // ì´ˆê¸°í™” ì‹¤í–‰
    moveDot();
</script>

</body>
</html>