<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°€ìƒ ì‹¤í—˜: í—¤ìŠ¤ ë²•ì¹™ê³¼ ë°˜ì‘ ì—”íƒˆí”¼</title>
    <style>
        :root {
            --primary: #4A90E2;
            --secondary: #50E3C2;
            --accent: #FF6B6B;
            --bg: #F5F7FA;
            --text: #2C3E50;
        }
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .container {
            max-width: 900px;
            width: 100%;
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        h1, h2 { text-align: center; color: var(--text); }
        .experiment-area {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin-top: 30px;
            gap: 20px;
        }
        .control-panel {
            flex: 1;
            min-width: 300px;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #e1e4e8;
        }
        .visual-panel {
            flex: 1;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        .beaker {
            width: 150px;
            height: 200px;
            border: 4px solid #333;
            border-top: none;
            border-radius: 0 0 20px 20px;
            position: relative;
            background: rgba(255,255,255,0.8);
            overflow: hidden;
            margin-bottom: 20px;
        }
        .liquid {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 60%;
            background: var(--primary);
            opacity: 0.6;
            transition: height 1s, background-color 1s;
        }
        .particle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: white;
            border-radius: 50%;
            animation: float 2s infinite;
        }
        @keyframes float {
            0% { transform: translateY(0px); opacity: 1; }
            50% { transform: translateY(-20px); opacity: 0.7; }
            100% { transform: translateY(0px); opacity: 1; }
        }
        .thermometer-wrapper {
            position: absolute;
            right: -40px;
            bottom: 0;
            height: 220px;
            width: 20px;
            background: #eee;
            border-radius: 10px;
            border: 1px solid #ccc;
        }
        .mercury {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 20%;
            background: var(--accent);
            border-radius: 0 0 10px 10px;
            transition: height 2s ease-out;
        }
        .temp-display {
            position: absolute;
            top: -30px;
            right: -50px;
            font-weight: bold;
            font-size: 1.2rem;
            color: var(--accent);
        }
        button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            width: 100%;
            margin-bottom: 10px;
            transition: transform 0.1s;
        }
        button:hover { transform: translateY(-2px); opacity: 0.9; }
        button:disabled { background: #ccc; cursor: not-allowed; }
        button.reset { background: #95a5a6; }
        
        .result-charts {
            margin-top: 30px;
            width: 100%;
            padding: 20px;
            background: #f0f4f8;
            border-radius: 10px;
        }
        .bar-container {
            display: flex;
            align-items: flex-end;
            height: 200px;
            gap: 30px;
            padding-bottom: 30px;
            border-bottom: 2px solid #333;
        }
        .bar-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 120px;
        }
        .bar {
            width: 60px;
            background: var(--secondary);
            transition: height 1s ease;
            position: relative;
            border-radius: 5px 5px 0 0;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            color: #333;
            font-weight: bold;
            font-size: 0.9rem;
            padding-bottom: 5px;
        }
        .bar.path1 { background: #4A90E2; }
        .bar.path2 { background: #50E3C2; }
        .bar.total { background: #FF6B6B; }
        
        .label { margin-top: 10px; text-align: center; font-size: 0.9rem; }
        .quiz-section {
            margin-top: 30px;
            padding: 20px;
            background: #fff3cd;
            border: 1px solid #ffeeba;
            border-radius: 10px;
            display: none;
        }
        .status-msg {
            margin-top: 15px;
            font-weight: bold;
            color: #2c3e50;
            min-height: 1.5em;
        }
        .hiker-viz {
            margin-top: 20px;
            text-align: center;
        }
        .hiker-viz svg {
            max-width: 100%;
            height: auto;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>âš—ï¸ ê°€ìƒ ì‹¤í—˜: í—¤ìŠ¤ ë²•ì¹™ ì¦ëª…</h1>
    <p style="text-align: center;">"ê²½ë¡œê°€ ë‹¬ë¼ë„ ì—ë„ˆì§€ì˜ ì´ ë³€í™”ëŸ‰ì€ ê°™ì„ê¹Œìš”?"</p>

    <div class="experiment-area">
        <div class="control-panel">
            <h3>ğŸ”¬ ì‹¤í—˜ ì„¤ì •</h3>
            <p>ì´ˆê¸° ì˜¨ë„: <strong>25.0Â°C</strong></p>
            
            <div style="margin-bottom: 20px;">
                <strong>ì‹¤í—˜ ì„ íƒ:</strong>
                <button id="btn-path1" onclick="runPath1()">â›°ï¸ ê²½ë¡œ 1: 2ë‹¨ê³„ ë°˜ì‘ (ëŒì•„ê°€ê¸°)</button>
                <div style="font-size: 0.9rem; color: #666; margin-bottom: 10px;">
                    â‘  NaOH(s) + ë¬¼ â†’ NaOH(aq)<br>
                    â‘¡ NaOH(aq) + HCl(aq) â†’ NaCl(aq) + Hâ‚‚O(l)
                </div>
                
                <button id="btn-path2" onclick="runPath2()">ğŸš€ ê²½ë¡œ 2: 1ë‹¨ê³„ ë°˜ì‘ (ì§€ë¦„ê¸¸)</button>
                <div style="font-size: 0.9rem; color: #666;">
                    â‘  NaOH(s) + HCl(aq) â†’ NaCl(aq) + Hâ‚‚O(l)
                </div>
            </div>

            <div class="status-msg" id="status-text">ì‹¤í—˜ ê²½ë¡œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</div>
            <button class="reset" onclick="resetExperiment()" style="margin-top: 20px;">ğŸ”„ ì‹¤í—˜ ì´ˆê¸°í™”</button>
        </div>

        <div class="visual-panel">
            <div class="beaker">
                <div class="liquid" id="liquid"></div>
                </div>
            <div class="thermometer-wrapper">
                <div class="mercury" id="mercury"></div>
                <div class="temp-display" id="temp-display">25.0Â°C</div>
            </div>
        </div>
    </div>

    <div class="result-charts">
        <h3>ğŸ“Š ì—ë„ˆì§€(ì—”íƒˆí”¼) ë³€í™” ê²°ê³¼</h3>
        <div class="bar-container">
            <div class="bar-group">
                <div class="bar path1" id="bar-h1" style="height: 0px;"></div>
                <div class="label">Î”Hâ‚<br>(ìš©í•´)</div>
            </div>
            <div class="bar-group">
                <div class="bar path1" id="bar-h2" style="height: 0px;"></div>
                <div class="label">Î”Hâ‚‚<br>(ì¤‘í™”)</div>
            </div>
            <div class="bar-group">
                <div class="bar total" id="bar-path1-total" style="height: 0px;"></div>
                <div class="label">ê²½ë¡œ 1 í•©ê³„<br>(Î”Hâ‚ + Î”Hâ‚‚)</div>
            </div>
            <div class="bar-group" style="border-left: 2px dashed #ccc; padding-left: 20px;">
                <div class="bar path2" id="bar-h3" style="height: 0px;"></div>
                <div class="label">ê²½ë¡œ 2<br>Î”Hâ‚ƒ (í•œë²ˆì—)</div>
            </div>
        </div>
        <p id="result-summary" style="text-align: center; margin-top: 15px; font-weight: bold;"></p>
    </div>

    <div class="quiz-section" id="quiz-section">
        <h3>ğŸ¤” ìƒê°í•´ë³´ê¸°</h3>
        <p><strong>ë¬¸ì œ:</strong> ê²½ë¡œ 1ì˜ ì—”íƒˆí”¼ í•©(Î”Hâ‚ + Î”Hâ‚‚)ê³¼ ê²½ë¡œ 2ì˜ ì—”íƒˆí”¼(Î”Hâ‚ƒ) ê°’ì´ ê±°ì˜ ë¹„ìŠ·í•˜ê²Œ ë‚˜ì™”ìŠµë‹ˆë‹¤. ê·¸ ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€ìš”?</p>
        <textarea id="student-answer" style="width: 100%; height: 60px; margin-bottom: 10px;" placeholder="ì—¬ê¸°ì— ë‹µì„ ì ì–´ë³´ì„¸ìš”..."></textarea>
        <button onclick="checkAnswer()">ì •ë‹µ í™•ì¸</button>
        <p id="feedback" style="margin-top: 10px; color: #d35400;"></p>
    </div>
</div>

<script>
    // ìƒìˆ˜ ì„¤ì • (êµìœ¡ìš© ê·¼ì‚¬ì¹˜)
    const BASE_TEMP = 25.0;
    const DH1 = 44.5; // kJ/mol (í¬ê¸°)
    const DH2 = 55.8; // kJ/mol
    const DH3 = 100.3; // kJ/mol
    
    // ìƒíƒœ ë³€ìˆ˜
    let path1Done = false;
    let path2Done = false;

    function updateStatus(text) {
        document.getElementById('status-text').innerText = text;
    }

    function setTemp(temp) {
        // ì˜¨ë„ê³„ ì‹œê°í™” ê³„ì‚° (20~100ë„ ë²”ìœ„ ë§¤í•‘)
        const height = ((temp - 20) / 80) * 100; 
        document.getElementById('mercury').style.height = `${Math.min(height, 100)}%`;
        document.getElementById('temp-display').innerText = `${temp.toFixed(1)}Â°C`;
    }

    function createParticles() {
        const beaker = document.querySelector('.beaker');
        for(let i=0; i<5; i++) {
            let p = document.createElement('div');
            p.className = 'particle';
            p.style.left = Math.random() * 130 + 'px';
            p.style.top = Math.random() * 100 + 50 + 'px';
            beaker.appendChild(p);
            setTimeout(() => p.remove(), 1900);
        }
    }

    function runPath1() {
        if(path1Done) return;
        document.getElementById('btn-path1').disabled = true;
        document.getElementById('btn-path2').disabled = true;
        
        // 1ë‹¨ê³„: ìš©í•´
        updateStatus("1ë‹¨ê³„: ê³ ì²´ NaOHë¥¼ ë¬¼ì— ë…¹ì…ë‹ˆë‹¤...");
        document.getElementById('liquid').style.backgroundColor = "#81ecec"; // ë¬¼ ìƒ‰ê¹”
        
        let currentTemp = BASE_TEMP;
        let step = 0;
        
        let interval = setInterval(() => {
            step++;
            createParticles();
            // ìš©í•´ì—´ì— ì˜í•œ ì˜¨ë„ ìƒìŠ¹ ì‹œë®¬ë ˆì´ì…˜
            currentTemp += (DH1 / 20); // ì‹œê°ì  ì†ë„ ì¡°ì ˆ
            setTemp(currentTemp);

            if(step >= 20) {
                clearInterval(interval);
                animateStep2(currentTemp);
            }
        }, 100);
    }

    function animateStep2(startTemp) {
        setTimeout(() => {
            updateStatus("2ë‹¨ê³„: HCl ìˆ˜ìš©ì•¡ì„ ë„£ì–´ ì¤‘í™”ì‹œí‚µë‹ˆë‹¤...");
            document.getElementById('liquid').style.height = "80%";
            document.getElementById('liquid').style.backgroundColor = "#a29bfe"; // í˜¼í•© ìš©ì•¡ ìƒ‰
            
            let currentTemp = startTemp;
            let step = 0;
            let interval = setInterval(() => {
                step++;
                createParticles();
                currentTemp += (DH2 / 20);
                setTemp(currentTemp);

                if(step >= 20) {
                    clearInterval(interval);
                    path1Done = true;
                    updateStatus("ê²½ë¡œ 1 ì‹¤í—˜ ì™„ë£Œ! ë°ì´í„°ë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤.");
                    drawBar('bar-h1', DH1);
                    drawBar('bar-h2', DH2);
                    setTimeout(() => {
                        drawBar('bar-path1-total', DH1 + DH2);
                        checkCompletion();
                    }, 1000);
                    document.getElementById('btn-path2').disabled = path2Done;
                }
            }, 100);
        }, 1500);
    }

    function runPath2() {
        if(path2Done) return;
        document.getElementById('btn-path1').disabled = true;
        document.getElementById('btn-path2').disabled = true;

        updateStatus("ê²½ë¡œ 2: ê³ ì²´ NaOHë¥¼ HClì— ë°”ë¡œ ë„£ìŠµë‹ˆë‹¤ (í•œë²ˆ ë°˜ì‘)...");
        document.getElementById('liquid').style.backgroundColor = "#ff7675"; 
        
        let currentTemp = BASE_TEMP;
        let step = 0;
        
        let interval = setInterval(() => {
            step++;
            createParticles();
            // í•œ ë²ˆì— í° í­ìœ¼ë¡œ ìƒìŠ¹
            currentTemp += (DH3 / 30); 
            setTemp(currentTemp);

            if(step >= 30) {
                clearInterval(interval);
                path2Done = true;
                updateStatus("ê²½ë¡œ 2 ì‹¤í—˜ ì™„ë£Œ!");
                drawBar('bar-h3', DH3);
                checkCompletion();
                document.getElementById('btn-path1').disabled = path1Done;
            }
        }, 100);
    }

    function drawBar(id, value) {
        const bar = document.getElementById(id);
        // ê·¸ë˜í”„ ë†’ì´ ìŠ¤ì¼€ì¼ë§
        bar.style.height = `${value * 1.5}px`; 
        bar.innerText = `-${value}kJ`;
    }

    function checkCompletion() {
        if(path1Done && path2Done) {
            updateStatus("ëª¨ë“  ì‹¤í—˜ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ê²°ê³¼ë¥¼ ë¹„êµí•´ë³´ì„¸ìš”.");
            document.getElementById('quiz-section').style.display = 'block';
            document.getElementById('result-summary').innerHTML = 
                `ê²½ë¡œ 1 í•©ê³„(${(DH1+DH2).toFixed(1)}kJ) â‰ˆ ê²½ë¡œ 2(${(DH3).toFixed(1)}kJ)<br>
                <span style="color:blue">í—¤ìŠ¤ ë²•ì¹™ ì„±ë¦½!</span>`;
        } else {
             document.getElementById('btn-path1').disabled = path1Done;
             document.getElementById('btn-path2').disabled = path2Done;
        }
    }

    function checkAnswer() {
        const answer = document.getElementById('student-answer').value;
        const feedback = document.getElementById('feedback');
        
        if(answer.length < 5) {
            feedback.innerText = "ì¡°ê¸ˆ ë” êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…í•´ë³¼ê¹Œìš”?";
            return;
        }
        
        feedback.innerHTML = `<strong>í›Œë¥­í•©ë‹ˆë‹¤!</strong><br>
        ì—”íƒˆí”¼ëŠ” 'ìƒíƒœ í•¨ìˆ˜'ì´ê¸° ë•Œë¬¸ì—, <br>
        ë°˜ì‘ì´ ì¼ì–´ë‚˜ëŠ” ê²½ë¡œ(1ë‹¨ê³„ vs 2ë‹¨ê³„)ì™€ ê´€ê³„ì—†ì´<br> 
        <strong>ì²˜ìŒ ìƒíƒœì™€ ë‚˜ì¤‘ ìƒíƒœê°€ ê°™ë‹¤ë©´ ì´ ì—”íƒˆí”¼ ë³€í™”ëŸ‰ì€ ë™ì¼í•©ë‹ˆë‹¤.</strong><br>
        ë§ˆì¹˜ ì‚° ì •ìƒì— ì˜¤ë¥¼ ë•Œ, ì™„ë§Œí•œ ê¸¸ë¡œ ëŒì•„ê°€ë“  ê°€íŒŒë¥¸ ê¸¸ë¡œ ë°”ë¡œ ê°€ë“  <br>
        ì˜¬ë¼ê°„ ë†’ì´(ìœ„ì¹˜ ì—ë„ˆì§€ ë³€í™”)ëŠ” ê°™ì€ ê²ƒê³¼ ê°™ìŠµë‹ˆë‹¤. â›°ï¸`;
    }

    function resetExperiment() {
        path1Done = false;
        path2Done = false;
        document.getElementById('btn-path1').disabled = false;
        document.getElementById('btn-path2').disabled = false;
        setTemp(25.0);
        document.getElementById('liquid').style.height = "60%";
        document.getElementById('liquid').style.backgroundColor = "#4A90E2";
        
        ['bar-h1', 'bar-h2', 'bar-path1-total', 'bar-h3'].forEach(id => {
            document.getElementById(id).style.height = '0px';
            document.getElementById(id).innerText = '';
        });
        
        document.getElementById('quiz-section').style.display = 'none';
        document.getElementById('result-summary').innerText = '';
        document.getElementById('feedback').innerText = '';
        document.getElementById('student-answer').value = '';
        updateStatus("ì‹¤í—˜ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ê²½ë¡œë¥¼ ì„ íƒí•˜ì„¸ìš”.");
    }
</script>

</body>
</html>