<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í™”í•™ ë°˜ì‘ì˜ ì–‘ì  ê´€ê³„ ê°€ìƒì‹¤í—˜ (CaCOâ‚ƒ + HCl)</title>
    <style>
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #50e3c2;
            --accent-color: #ff6b6b;
            --bg-color: #f4f7f6;
            --text-color: #333;
            --panel-bg: #ffffff;
        }

        body {
            font-family: 'Pretendard', 'Malgun Gothic', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
            max-width: 800px;
        }

        h1 { margin: 0; color: var(--primary-color); }
        .subtitle { font-size: 0.9rem; color: #666; margin-top: 5px; }

        .container {
            display: grid;
            grid-template-columns: 300px 1fr;
            gap: 20px;
            max-width: 1200px;
            width: 100%;
        }

        /* ì»¨íŠ¸ë¡¤ íŒ¨ë„ */
        .panel {
            background: var(--panel-bg);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .control-group { margin-bottom: 20px; }
        label { display: block; font-weight: bold; margin-bottom: 5px; font-size: 0.9rem; }
        input[type="range"] { width: 100%; cursor: pointer; }
        .value-display { font-size: 0.9rem; color: var(--primary-color); float: right; }

        button {
            width: 100%;
            padding: 12px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s;
        }
        button:hover { background-color: #357abd; }
        button:disabled { background-color: #ccc; cursor: not-allowed; }

        /* ì‹¤í—˜ ì˜ì—­ */
        .experiment-area {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .visual-display {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            height: 300px;
            background: linear-gradient(to bottom, #eef2f3, #ffffff);
            border-radius: 12px;
            padding: 20px;
            position: relative;
            border: 1px solid #ddd;
        }

        /* í”Œë¼ìŠ¤í¬ ë° ì €ìš¸ ì• ë‹ˆë©”ì´ì…˜ */
        .flask-container {
            position: relative;
            width: 120px;
            margin: 0 auto;
            text-align: center;
        }
        
        .flask {
            width: 80px;
            height: 120px;
            background: rgba(200, 230, 255, 0.4);
            border: 2px solid #aaa;
            border-top: none;
            border-radius: 0 0 40px 40px;
            position: relative;
            margin: 0 auto;
            clip-path: polygon(20% 0%, 80% 0%, 100% 100%, 0% 100%);
        }

        .solution {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 60%;
            background: rgba(100, 200, 255, 0.6);
            border-radius: 0 0 35px 35px;
            transition: height 0.5s;
        }

        .bubbles {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            display: none;
        }

        .bubble {
            position: absolute;
            bottom: 0;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
            animation: rise 2s infinite ease-in;
        }

        @keyframes rise {
            0% { bottom: 0; transform: scale(0.5); opacity: 0; }
            50% { opacity: 1; }
            100% { bottom: 100%; transform: scale(1.2); opacity: 0; }
        }

        .balance {
            background: #333;
            color: #0f0;
            padding: 10px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 1.5rem;
            margin-top: 10px;
            width: 140px;
            text-align: center;
            box-shadow: 0 4px 0 #111;
        }

        /* ê·¸ë˜í”„ ì˜ì—­ */
        .graph-container {
            background: white;
            padding: 15px;
            border-radius: 12px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            height: 250px;
            position: relative;
        }
        canvas { width: 100%; height: 100%; }

        /* ê²°ê³¼ ë° í€´ì¦ˆ */
        .results-section {
            background: var(--panel-bg);
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
            display: none;
        }

        .equation-box {
            background: #f8f9fa;
            padding: 10px;
            border-left: 4px solid var(--primary-color);
            margin-bottom: 15px;
            font-family: monospace;
            font-size: 1.1rem;
        }

        .quiz-box {
            border: 1px solid #eee;
            padding: 15px;
            border-radius: 8px;
            background: #fff;
        }
        
        .quiz-options button {
            margin-top: 5px;
            background: #f0f0f0;
            color: #333;
            width: auto;
            margin-right: 10px;
            padding: 8px 16px;
        }
        .quiz-options button:hover { background: #e0e0e0; }
        .quiz-options button.correct { background: var(--secondary-color); color: white; }
        .quiz-options button.wrong { background: var(--accent-color); color: white; }

        .tag {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            background: #eee;
            margin-right: 5px;
        }

        /* ì•ˆì „ ì•ˆë‚´ */
        .safety-note {
            background-color: #fff3cd;
            color: #856404;
            padding: 10px;
            border-radius: 8px;
            font-size: 0.85rem;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        .safety-note span { margin-right: 10px; font-size: 1.2rem; }

        @media (max-width: 768px) {
            .container { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <header>
        <h1>ğŸ§ª í™”í•™ ë°˜ì‘ì˜ ì–‘ì  ê´€ê³„ ì‹¤í—˜ì‹¤</h1>
        <div class="subtitle">ê³ ë“±í•™êµ í™”í•™â… : íƒ„ì‚°ì¹¼ìŠ˜ê³¼ ë¬½ì€ ì—¼ì‚°ì˜ ë°˜ì‘</div>
    </header>

    <div class="safety-note">
        <span>âš ï¸</span>
        <div>
            <strong>ì•ˆì „ ìˆ˜ì¹™:</strong> ê°€ìƒ ì‹¤í—˜ì´ì§€ë§Œ ì‹¤ì œì²˜ëŸ¼ ìƒê°í•´ìš”! ì—¼ì‚°ì€ ê°•í•œ ì‚°ì„±ì´ë¯€ë¡œ í”¼ë¶€ì— ë‹¿ì§€ ì•Šê²Œ ì£¼ì˜í•˜ê³ , ë°œìƒí•˜ëŠ” ì´ì‚°í™”íƒ„ì†Œ ê¸°ì²´ë¥¼ ì§ì ‘ í¡ì…í•˜ì§€ ì•Šë„ë¡ í™˜ê¸°ê°€ í•„ìš”í•©ë‹ˆë‹¤.
        </div>
    </div>

    <div class="container">
        <aside class="panel">
            <h3>ğŸ›ï¸ ì‹¤í—˜ ì¡°ê±´ ì„¤ì •</h3>
            
            <div class="control-group">
                <label>íƒ„ì‚°ì¹¼ìŠ˜(CaCOâ‚ƒ) ì§ˆëŸ‰ <span id="massVal" class="value-display">1.0 g</span></label>
                <input type="range" id="massInput" min="0.5" max="3.0" step="0.1" value="1.0">
            </div>

            <div class="control-group">
                <label>ë¬½ì€ ì—¼ì‚°(HCl) ë†ë„ <span id="concVal" class="value-display">0.5 M</span></label>
                <input type="range" id="concInput" min="0.1" max="1.0" step="0.1" value="0.5">
            </div>

            <div class="control-group">
                <label>ë¬½ì€ ì—¼ì‚°(HCl) ë¶€í”¼ <span id="volVal" class="value-display">50 mL</span></label>
                <input type="range" id="volInput" min="20" max="100" step="10" value="50">
            </div>

            <hr>
            <p style="font-size:0.9rem; color:#555;">
                <strong>í”Œë¼ìŠ¤í¬ ì´ˆê¸° ì§ˆëŸ‰:</strong> 100.00 g (ìš©ê¸° í¬í•¨)
            </p>

            <button id="startBtn" onclick="startExperiment()">âš—ï¸ ì‹¤í—˜ ì‹œì‘</button>
            <button id="resetBtn" onclick="resetExperiment()" style="background-color:#7f8c8d; margin-top:10px; display:none;">ğŸ”„ ì´ˆê¸°í™”</button>
        </aside>

        <main class="experiment-area">
            
            <div class="visual-display">
                <div class="graph-container" style="flex:1; margin-right:20px; border:none; box-shadow:none; padding:0;">
                    <canvas id="reactionChart"></canvas>
                </div>

                <div class="flask-container">
                    <div style="margin-bottom:5px; font-size:0.8rem; color:#666;">ë°˜ì‘ ìš©ê¸°</div>
                    <div class="flask">
                        <div class="solution" id="solutionFluid"></div>
                        <div class="bubbles" id="bubbles">
                            </div>
                    </div>
                    <div class="balance" id="balanceDisplay">100.00 g</div>
                </div>
            </div>

            <section id="resultsSection" class="results-section">
                <h3>ğŸ“Š ì‹¤í—˜ ê²°ê³¼ ë¶„ì„</h3>
                
                <div class="equation-box">
                    CaCOâ‚ƒ(s) + 2HCl(aq) â†’ CaClâ‚‚(aq) + Hâ‚‚O(l) + COâ‚‚â†‘
                </div>

                <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-bottom:20px;">
                    <div>
                        <strong>ğŸ“‰ ìƒì„±ëœ COâ‚‚ ì§ˆëŸ‰:</strong> <span id="resCO2Mass">0.00</span> g
                    </div>
                    <div>
                        <strong>ğŸ§ª ë°˜ì‘í•œ CaCOâ‚ƒ ëª°ìˆ˜:</strong> <span id="resMoles">0.00</span> mol
                    </div>
                </div>

                <div class="quiz-box">
                    <h4>ğŸ’¡ ìƒê° ë”í•˜ê¸° (í€´ì¦ˆ)</h4>
                    <p id="quizQuestion">ì´ ì‹¤í—˜ ì¡°ê±´ì—ì„œ ë” ì´ìƒ ë°˜ì‘ì´ ì§„í–‰ë˜ì§€ ì•ŠëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?</p>
                    <div class="quiz-options" id="quizOptions">
                        </div>
                    <p id="quizFeedback" style="margin-top:10px; font-weight:bold;"></p>
                </div>

                <div style="margin-top:20px; font-size:0.9rem; background:#eee; padding:10px; border-radius:8px;">
                    <strong>ğŸ“ ì„ ìƒë‹˜ì˜ ì½”ë©˜íŠ¸:</strong><br>
                    <span id="teacherComment">ì‹¤í—˜ì„ ë¨¼ì € ì§„í–‰í•´ë³´ì„¸ìš”!</span>
                </div>
            </section>

        </main>
    </div>

    <script>
        // --- ìƒìˆ˜ ë° ë³€ìˆ˜ ì„¤ì • ---
        const FLASK_TARE_WEIGHT = 50.00; // ë¹ˆ í”Œë¼ìŠ¤í¬ ë¬´ê²Œ
        const MOLAR_MASS_CaCO3 = 100.09; // g/mol
        const MOLAR_MASS_CO2 = 44.01;    // g/mol
        
        let caco3Mass = 1.0;
        let hclConc = 0.5;
        let hclVol = 50; // mL
        
        let isRunning = false;
        let animationId;
        let currentTime = 0;
        let maxTime = 10; // ì‹¤í—˜ ì• ë‹ˆë©”ì´ì…˜ ì§€ì† ì‹œê°„ (ì´ˆ)
        
        let initialTotalMass = 0;
        let finalLoss = 0;
        let currentLoss = 0;

        // --- DOM ìš”ì†Œ ---
        const massInput = document.getElementById('massInput');
        const concInput = document.getElementById('concInput');
        const volInput = document.getElementById('volInput');
        const startBtn = document.getElementById('startBtn');
        const resetBtn = document.getElementById('resetBtn');
        const balanceDisplay = document.getElementById('balanceDisplay');
        const bubbles = document.getElementById('bubbles');
        const resultsSection = document.getElementById('resultsSection');
        const solutionFluid = document.getElementById('solutionFluid');
        
        // ìº”ë²„ìŠ¤ ì„¤ì •
        const canvas = document.getElementById('reactionChart');
        const ctx = canvas.getContext('2d');
        let chartData = []; // {t: time, m: massLoss}

        // --- ì´ˆê¸°í™” ë° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ---
        function init() {
            updateValues();
            drawEmptyChart();
            generateBubbles();
        }

        massInput.addEventListener('input', () => {
            document.getElementById('massVal').textContent = massInput.value + " g";
            caco3Mass = parseFloat(massInput.value);
            updateBalancePreview();
        });

        concInput.addEventListener('input', () => {
            document.getElementById('concVal').textContent = concInput.value + " M";
            hclConc = parseFloat(concInput.value);
            updateBalancePreview();
        });

        volInput.addEventListener('input', () => {
            document.getElementById('volVal').textContent = volInput.value + " mL";
            hclVol = parseFloat(volInput.value);
            solutionFluid.style.height = (hclVol / 100 * 60 + 20) + "%"; // ë¶€í”¼ì— ë”°ë¥¸ ìˆ˜ìœ„ ì¡°ì ˆ ì‹œê°í™”
            updateBalancePreview();
        });

        function updateBalancePreview() {
            if(!isRunning && resultsSection.style.display === 'none') {
                // ìš©ì•¡ ë°€ë„ë¥¼ ëŒ€ëµ 1g/mLë¡œ ê°€ì •
                let liquidMass = parseFloat(volInput.value); 
                let solidMass = parseFloat(massInput.value);
                let total = FLASK_TARE_WEIGHT + liquidMass + solidMass;
                balanceDisplay.textContent = total.toFixed(2) + " g";
            }
        }

        // --- ë²„ë¸” DOM ìƒì„± ---
        function generateBubbles() {
            bubbles.innerHTML = '';
            for(let i=0; i<15; i++) {
                let b = document.createElement('div');
                b.className = 'bubble';
                b.style.left = Math.random() * 80 + 10 + '%';
                b.style.width = (Math.random() * 8 + 4) + 'px';
                b.style.height = b.style.width;
                b.style.animationDuration = (Math.random() * 1.5 + 0.5) + 's';
                b.style.animationDelay = Math.random() + 's';
                bubbles.appendChild(b);
            }
        }

        // --- í•µì‹¬ ë¡œì§: í™”í•™ëŸ‰ë¡  ê³„ì‚° ---
        function calculateReaction() {
            // 1. ë°˜ì‘ë¬¼ ëª°ìˆ˜ ê³„ì‚°
            const molesCaCO3 = caco3Mass / MOLAR_MASS_CaCO3;
            const molesHCl = (hclConc * hclVol) / 1000;

            // 2. í•œê³„ ë°˜ì‘ë¬¼ ê²°ì • (CaCO3 : HCl = 1 : 2)
            // HClì´ CaCO3ì˜ 2ë°°ê°€ í•„ìš”í•¨.
            let limitingReactant = "";
            let reactedMolesCaCO3 = 0;

            if (molesHCl < molesCaCO3 * 2) {
                // HClì´ ë¶€ì¡±í•¨ (í•œê³„ ë°˜ì‘ë¬¼: HCl)
                limitingReactant = "HCl";
                reactedMolesCaCO3 = molesHCl / 2;
            } else {
                // CaCO3ê°€ ë¶€ì¡±í•˜ê±°ë‚˜ ë”± ë§ìŒ (í•œê³„ ë°˜ì‘ë¬¼: CaCO3)
                limitingReactant = "CaCO3";
                reactedMolesCaCO3 = molesCaCO3;
            }

            // 3. ìƒì„±ë¬¼(CO2) ì˜ˆì¸¡
            // ë°˜ì‘í•œ CaCO3 1ëª°ë‹¹ CO2 1ëª° ìƒì„±
            const molesCO2 = reactedMolesCaCO3;
            const massCO2 = molesCO2 * MOLAR_MASS_CO2;

            return {
                molesCaCO3,
                molesHCl,
                limitingReactant,
                reactedMolesCaCO3,
                massCO2
            };
        }

        // --- ì‹¤í—˜ ì‹œì‘ ---
        function startExperiment() {
            isRunning = true;
            massInput.disabled = true;
            concInput.disabled = true;
            volInput.disabled = true;
            startBtn.disabled = true;
            startBtn.style.display = 'none';
            resetBtn.style.display = 'block';

            // ì´ˆê¸° ì§ˆëŸ‰ ì„¸íŒ… (í”Œë¼ìŠ¤í¬ + ìš©ì•¡ + íƒ„ì‚°ì¹¼ìŠ˜)
            const liquidMass = hclVol; // ë°€ë„ 1g/mL ê°€ì •
            initialTotalMass = FLASK_TARE_WEIGHT + liquidMass + caco3Mass;
            
            // ê²°ê³¼ ê³„ì‚°
            const result = calculateReaction();
            finalLoss = result.massCO2;

            // ì°¨íŠ¸ ì´ˆê¸°í™”
            chartData = [];
            currentTime = 0;

            // ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
            bubbles.style.display = 'block';
            lastTime = performance.now();
            requestAnimationFrame((t) => animate(t, result));
        }

        let lastTime = 0;

        function animate(timestamp, result) {
            if (!isRunning) return;

            const dt = (timestamp - lastTime) / 1000;
            lastTime = timestamp;

            // ì‹œê°„ ì§„í–‰ (ë‹¨ìˆœí™”ë¥¼ ìœ„í•´ ì‹¤ì œ ì‹œê°„ë³´ë‹¤ ë¹ ë¥´ê²Œ ì‹œë®¬ë ˆì´ì…˜)
            // ë°˜ì‘ ì†ë„ëŠ” ì´ˆë°˜ì— ë¹ ë¥´ê³  ë‚˜ì¤‘ì— ëŠë ¤ì§€ëŠ” ë¡œê·¸ í•¨ìˆ˜ í˜•íƒœ ëª¨ì‚¬
            if (currentTime < maxTime) {
                currentTime += (dt || 0.016); 
                
                // ë°˜ì‘ ì§„ì²™ë„ (0 ~ 1) : 1 - exp(-k * t) í˜•íƒœ
                const progress = 1 - Math.exp(-0.5 * currentTime);
                
                currentLoss = finalLoss * progress;
                const currentMass = initialTotalMass - currentLoss;

                // UI ì—…ë°ì´íŠ¸
                balanceDisplay.textContent = currentMass.toFixed(2) + " g";
                
                // ê·¸ë˜í”„ ë°ì´í„° ì¶”ê°€
                chartData.push({ t: currentTime, y: currentLoss });
                drawChart(finalLoss);

                requestAnimationFrame((t) => animate(t, result));
            } else {
                // ì‹¤í—˜ ì¢…ë£Œ
                finishExperiment(result);
            }
        }

        function finishExperiment(result) {
            isRunning = false;
            bubbles.style.display = 'none';
            balanceDisplay.textContent = (initialTotalMass - finalLoss).toFixed(2) + " g";
            
            // ê²°ê³¼ì°½ í‘œì‹œ
            showResults(result);
        }

        function resetExperiment() {
            isRunning = false;
            resultsSection.style.display = 'none';
            massInput.disabled = false;
            concInput.disabled = false;
            volInput.disabled = false;
            startBtn.disabled = false;
            startBtn.style.display = 'block';
            resetBtn.style.display = 'none';
            
            drawEmptyChart();
            updateBalancePreview();
        }

        // --- ê²°ê³¼ ì²˜ë¦¬ ë° í€´ì¦ˆ ---
        function showResults(data) {
            resultsSection.style.display = 'block';
            
            document.getElementById('resCO2Mass').textContent = data.massCO2.toFixed(3);
            document.getElementById('resMoles').textContent = data.reactedMolesCaCO3.toFixed(4);

            // í€´ì¦ˆ ì„¤ì •
            const quizOptionsDiv = document.getElementById('quizOptions');
            quizOptionsDiv.innerHTML = '';
            document.getElementById('quizFeedback').textContent = '';

            const isLimitingHCl = data.limitingReactant === 'HCl';
            
            let teacherText = "";
            let correctAns = "";
            
            if (isLimitingHCl) {
                teacherText = `ì—¼ì‚°(${hclVol}mL, ${hclConc}M)ì— ë“¤ì–´ìˆëŠ” Hâº ì´ì˜¨ì´ ëª¨ë‘ ì†Œëª¨ë˜ì—ˆìŠµë‹ˆë‹¤. íƒ„ì‚°ì¹¼ìŠ˜ì€ ì•„ì§ ë‚¨ì•„ìˆì§€ë§Œ ë°˜ì‘í•  ì‚°ì´ ì—†ì–´ì„œ ë©ˆì¶˜ ê²ƒì´ì£ . ì´ë¥¼ 'í•œê³„ ë°˜ì‘ë¬¼'ì´ë¼ê³  í•©ë‹ˆë‹¤.`;
                correctAns = "ì—¼ì‚°(HCl)ì´ ëª¨ë‘ ì†Œëª¨ë˜ì–´ì„œ";
            } else {
                teacherText = `ë„£ì–´ì¤€ íƒ„ì‚°ì¹¼ìŠ˜(${caco3Mass}g)ì´ ëª¨ë‘ ë°˜ì‘í•˜ì—¬ ì‚¬ë¼ì¡ŒìŠµë‹ˆë‹¤. ì—¼ì‚°ì€ ì¶©ë¶„íˆ ë‚¨ì•„ìˆìŠµë‹ˆë‹¤. ì´ ê²½ìš° ìƒì„±ëœ COâ‚‚ì˜ ì–‘ì€ íƒ„ì‚°ì¹¼ìŠ˜ì˜ ì–‘ì— ì˜í•´ ê²°ì •ë©ë‹ˆë‹¤.`;
                correctAns = "íƒ„ì‚°ì¹¼ìŠ˜(CaCOâ‚ƒ)ì´ ëª¨ë‘ ì†Œëª¨ë˜ì–´ì„œ";
            }

            document.getElementById('teacherComment').textContent = teacherText;

            // í€´ì¦ˆ ë²„íŠ¼ ìƒì„±
            const opts = [
                "íƒ„ì‚°ì¹¼ìŠ˜(CaCOâ‚ƒ)ì´ ëª¨ë‘ ì†Œëª¨ë˜ì–´ì„œ",
                "ì—¼ì‚°(HCl)ì´ ëª¨ë‘ ì†Œëª¨ë˜ì–´ì„œ",
                "ë°œìƒí•œ ì´ì‚°í™”íƒ„ì†Œê°€ ìš©ì•¡ì— ë…¹ì•„ì„œ"
            ];

            opts.forEach(opt => {
                let btn = document.createElement('button');
                btn.textContent = opt;
                btn.onclick = () => {
                    if (opt === correctAns) {
                        btn.classList.add('correct');
                        document.getElementById('quizFeedback').textContent = "âœ… ì •ë‹µì…ë‹ˆë‹¤! ì •í™•í•œ ë¶„ì„ì´ë„¤ìš”.";
                        document.getElementById('quizFeedback').style.color = "green";
                    } else {
                        btn.classList.add('wrong');
                        document.getElementById('quizFeedback').textContent = "âŒ ë‹¤ì‹œ ìƒê°í•´ë³´ì„¸ìš”. ê·¸ë˜í”„ì˜ ê¸°ìš¸ê¸°ê°€ 0ì´ ëœ ì‹œì ì„ ë– ì˜¬ë ¤ë³´ì„¸ìš”.";
                        document.getElementById('quizFeedback').style.color = "red";
                    }
                };
                quizOptionsDiv.appendChild(btn);
            });
            
            // ìë™ ìŠ¤í¬ë¡¤
            resultsSection.scrollIntoView({ behavior: 'smooth' });
        }

        // --- ì°¨íŠ¸ ê·¸ë¦¬ê¸° (Canvas API) ---
        function drawEmptyChart() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#f9f9f9';
            ctx.fillRect(0,0, canvas.width, canvas.height);
            
            ctx.strokeStyle = '#ddd';
            ctx.beginPath();
            // ê²©ì ê·¸ë¦¬ê¸° (ê°„ëµ)
            for(let i=0; i<canvas.width; i+=30) { ctx.moveTo(i,0); ctx.lineTo(i, canvas.height); }
            for(let i=0; i<canvas.height; i+=30) { ctx.moveTo(0,i); ctx.lineTo(canvas.width, i); }
            ctx.stroke();

            ctx.fillStyle = '#666';
            ctx.font = '12px Arial';
            ctx.fillText("ì‹œê°„ â†’", canvas.width - 40, canvas.height - 10);
            ctx.save();
            ctx.translate(15, 60);
            ctx.rotate(-Math.PI/2);
            ctx.fillText("ë°œìƒí•œ ê¸°ì²´ ì§ˆëŸ‰ (g)", 0, 0);
            ctx.restore();
        }

        function drawChart(maxY) {
            // ìº”ë²„ìŠ¤ ì‚¬ì´ì¦ˆ ì¡°ì • (ë°˜ì‘í˜• ëŒ€ì‘ì„ ìœ„í•´ ì‹¤ì œ í”½ì…€ í¬ê¸° ë§ì¶¤)
            const rect = canvas.getBoundingClientRect();
            canvas.width = rect.width;
            canvas.height = rect.height;

            drawEmptyChart();

            if (chartData.length === 0) return;

            // ìŠ¤ì¼€ì¼ ê³„ì‚°
            const padding = 30;
            const graphW = canvas.width - padding * 2;
            const graphH = canvas.height - padding * 2;

            // Yì¶• ìµœëŒ€ê°’ì€ ì˜ˆìƒ ìµœëŒ€ ìƒì„±ëŸ‰ + ì—¬ìœ ë¶„
            const yMaxScale = maxY > 0 ? maxY * 1.2 : 1.0; 
            const xMaxScale = maxTime;

            ctx.beginPath();
            ctx.strokeStyle = '#4a90e2';
            ctx.lineWidth = 3;

            chartData.forEach((p, i) => {
                const x = padding + (p.t / xMaxScale) * graphW;
                const y = (canvas.height - padding) - (p.y / yMaxScale) * graphH;
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.stroke();
        }

        // ì´ˆê¸° ì‹¤í–‰
        init();

    </script>
</body>
</html>