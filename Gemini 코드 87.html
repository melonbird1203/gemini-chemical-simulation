<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì•„ë³´ê°€ë“œë¡œìˆ˜ ì²´ê° ì‹¤í—˜ì‹¤</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700&display=swap');
        body { font-family: 'Noto Sans KR', sans-serif; }
        .slider-thumb::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #4F46E5;
            cursor: pointer;
            border-radius: 50%;
        }
        .animate-pulse-slow {
            animation: pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <header class="bg-indigo-600 text-white p-4 shadow-lg">
        <div class="max-w-4xl mx-auto flex justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold">ğŸ§ª ì•„ë³´ê°€ë“œë¡œìˆ˜ ì²´ê°í•˜ê¸°</h1>
                <p class="text-sm opacity-90">100ì› ë™ì „ 1ëª°ì„ ìŒ“ìœ¼ë©´ ì–´ë””ê¹Œì§€ ê°ˆê¹Œ?</p>
            </div>
            <div class="text-right text-xs opacity-80">
                ê³ ë“±í•™êµ í™”í•™â… <br>
                [12í™”í•™â… 01-03]
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto p-4 md:p-6 space-y-8">

        <section class="bg-white rounded-xl shadow p-6 border border-slate-200">
            <h2 class="text-lg font-bold text-indigo-700 mb-4 flex items-center">
                <span class="mr-2">ğŸ›ï¸</span> ì‹¤í—˜ ë³€ìˆ˜ ì¡°ì‘
            </h2>
            
            <div class="grid md:grid-cols-2 gap-8">
                <div class="space-y-6">
                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-2">
                            ë™ì „ ê°œìˆ˜ (ì§€ìˆ˜ ìŠ¤ì¼€ì¼: 10<sup>x</sup>)
                        </label>
                        <input type="range" id="exponentSlider" min="0" max="23.78" step="0.01" value="0" 
                               class="w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer slider-thumb">
                        <div class="flex justify-between text-xs text-slate-500 mt-1">
                            <span>1ê°œ</span>
                            <span>1ì–µê°œ</span>
                            <span>1ëª°(6.02Ã—10Â²Â³)</span>
                        </div>
                    </div>

                    <div>
                        <label class="block text-sm font-medium text-slate-700 mb-1">
                            ë™ì „ ë‘ê»˜ (cm)
                        </label>
                        <input type="number" id="thicknessInput" value="0.15" step="0.01" 
                               class="w-full p-2 border border-slate-300 rounded focus:ring-2 focus:ring-indigo-500 outline-none">
                    </div>

                    <div class="flex gap-2">
                         <button onclick="setMole()" class="flex-1 bg-indigo-100 text-indigo-700 py-2 rounded hover:bg-indigo-200 font-bold transition">
                            âš¡ 1ëª°ë¡œ ì í”„!
                        </button>
                        <button onclick="resetSim()" class="flex-1 bg-slate-100 text-slate-700 py-2 rounded hover:bg-slate-200 transition">
                            ğŸ”„ ì´ˆê¸°í™”
                        </button>
                    </div>
                </div>

                <div class="bg-slate-50 p-4 rounded-lg border border-slate-200 flex flex-col justify-center space-y-3">
                    <div class="flex justify-between items-end border-b pb-2">
                        <span class="text-sm text-slate-600">í˜„ì¬ ë™ì „ ê°œìˆ˜</span>
                        <span id="displayCount" class="text-xl font-bold text-indigo-600">1 ê°œ</span>
                    </div>
                    <div class="flex justify-between items-end border-b pb-2">
                        <span class="text-sm text-slate-600">ìŒ“ì¸ ë†’ì´ (km)</span>
                        <span id="displayHeightKm" class="text-xl font-bold text-emerald-600">0 km</span>
                    </div>
                    <div class="mt-2 text-sm text-slate-500 bg-white p-2 rounded">
                        <p>ë†’ì´ ê³„ì‚°ì‹:</p>
                        <p class="font-mono text-xs">ê°œìˆ˜ Ã— ë‘ê»˜(cm) Ã· 100,000</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="bg-slate-900 text-white rounded-xl shadow-lg p-6 overflow-hidden relative min-h-[400px]">
            <h2 class="text-lg font-bold text-yellow-400 mb-4 z-10 relative">ğŸš€ ë†’ì´ ì‹œê°í™” ë° ë¹„êµ</h2>
            
            <div id="comparisonText" class="absolute top-16 right-6 text-right z-10 space-y-2 max-w-[60%]">
                <p class="text-2xl font-bold transition-all duration-300" id="mainMessage">ë™ì „ 1ê°œ ë°”ë‹¥ì— ë†“ì—¬ìˆìŠµë‹ˆë‹¤.</p>
                <p class="text-sm text-slate-400" id="subMessage">ìŠ¬ë¼ì´ë”ë¥¼ ì›€ì§ì—¬ë³´ì„¸ìš”.</p>
            </div>

            <div class="absolute bottom-0 left-0 w-full h-full opacity-30 z-0 pointer-events-none" 
                 style="background: radial-gradient(circle at center, #1e293b 0%, #0f172a 100%);">
                 <div class="absolute top-10 left-10 text-xs text-white">.</div>
                 <div class="absolute top-40 left-80 text-xs text-white">.</div>
                 <div class="absolute top-20 right-20 text-xs text-white">.</div>
            </div>

            <div class="absolute bottom-0 left-10 w-16 bg-gradient-to-t from-yellow-600 via-yellow-400 to-white transition-all duration-500 rounded-t-lg shadow-[0_0_20px_rgba(250,204,21,0.5)]" 
                 id="coinStack" style="height: 1px;">
            </div>

            <div class="absolute bottom-4 left-32 text-xs text-slate-500 space-y-8 pointer-events-none">
                <div id="marker-63" class="opacity-30">ğŸ¢ 63ë¹Œë”© (0.25km)</div>
                <div id="marker-earth" class="opacity-30">ğŸŒ ì§€êµ¬ ë°˜ì§€ë¦„ (6,400km)</div>
                <div id="marker-moon" class="opacity-30">ğŸŒ• ë‹¬ê¹Œì§€ ê±°ë¦¬ (38ë§Œkm)</div>
                <div id="marker-sun" class="opacity-30">â˜€ï¸ íƒœì–‘ê¹Œì§€ ê±°ë¦¬ (1.5ì–µkm)</div>
                <div id="marker-galaxy" class="opacity-30">ğŸŒŒ 1000ê´‘ë…„ (9,460ì¡°km)</div>
            </div>
        </section>

        <section class="bg-white rounded-xl shadow p-6 border-l-4 border-indigo-500">
            <h2 class="text-lg font-bold text-slate-800 mb-3">ğŸ“ í•™ìŠµ ì •ë¦¬ ë° í‰ê°€</h2>
            <div class="prose prose-sm text-slate-600">
                <p class="mb-4">
                    ë™ì „ 1ëª°(6.02Ã—10Â²Â³)ê°œë¥¼ ìŒ“ì•˜ì„ ë•Œì˜ ë†’ì´ëŠ” ì•½ <strong>9.03Ã—10Â¹â· km</strong>ì…ë‹ˆë‹¤.<br>
                    ë¹›ì´ 1ë…„ ë™ì•ˆ ê°€ëŠ” ê±°ë¦¬(1ê´‘ë…„)ê°€ ì•½ 9.46Ã—10Â¹Â² kmì´ë‹ˆ, ë™ì „ ê¸°ë‘¥ì˜ ë†’ì´ëŠ” ì•½ <strong>95,454 ê´‘ë…„</strong>ì— í•´ë‹¹í•©ë‹ˆë‹¤.<br>
                    ì´ëŠ” ìš°ë¦¬ ì€í•˜(Milky Way)ì˜ ì§€ë¦„(ì•½ 10ë§Œ ê´‘ë…„)ê³¼ ë§ë¨¹ëŠ” ê±°ëŒ€í•œ í¬ê¸°ì…ë‹ˆë‹¤!
                </p>
                <div class="bg-indigo-50 p-4 rounded-lg">
                    <p class="font-bold text-indigo-800">ğŸ’¡ ìƒê°í•´ë³´ê¸°</p>
                    <p>ìš°ë¦¬ê°€ í™”í•™ ì‹œê°„ì— ë‹¤ë£¨ëŠ” 'ë¬¼ í•œ ì»µ(180ml)'ì—ëŠ” ë¬¼ ë¶„ìê°€ ì•½ 10ëª° ë“¤ì–´ìˆìŠµë‹ˆë‹¤. ìš°ë¦¬ ì€í•˜ ì§€ë¦„ì˜ 10ë°°ë§Œí¼ ìŒ“ì¼ ìˆ˜ ìˆëŠ” ê°œìˆ˜ì˜ ë¶„ìê°€, ê³ ì‘ ë¬¼ í•œ ì»µì— ë“¤ì–´ìˆë‹¤ëŠ” ì‚¬ì‹¤ì´ ëŠê»´ì§€ë‚˜ìš”?</p>
                </div>
            </div>
        </section>

    </main>

    <footer class="text-center p-6 text-slate-400 text-xs">
        Developed for Science Education | Based on Curriculum [12í™”í•™â… 01-03]
    </footer>

    <script>
        const slider = document.getElementById('exponentSlider');
        const thicknessInput = document.getElementById('thicknessInput');
        const displayCount = document.getElementById('displayCount');
        const displayHeightKm = document.getElementById('displayHeightKm');
        const coinStack = document.getElementById('coinStack');
        const mainMessage = document.getElementById('mainMessage');
        const subMessage = document.getElementById('subMessage');

        // Constants (km)
        const H_63_BUILDING = 0.000249; 
        const H_EVEREST = 0.008848;
        const H_EARTH_RADIUS = 6371;
        const H_MOON_DIST = 384400;
        const H_SUN_DIST = 149600000;
        const H_LIGHT_YEAR = 9460730472580;
        const H_GALAXY_DIA = 94607304725800000; // ~100,000 light years

        // Avogadro constant
        const AVOGADRO = 6.022e23;

        function updateSimulation() {
            const exponent = parseFloat(slider.value);
            const count = Math.pow(10, exponent);
            const thicknessCm = parseFloat(thicknessInput.value);
            
            // Calculate Height
            const heightCm = count * thicknessCm;
            const heightKm = heightCm / 100000;

            // Format Numbers
            displayCount.textContent = count < 10000 ? Math.round(count) + " ê°œ" : count.toExponential(2).replace("e+", "Ã—10^") + " ê°œ";
            displayHeightKm.textContent = heightKm < 1 ? heightKm.toFixed(4) + " km" : heightKm.toExponential(2).replace("e+", "Ã—10^") + " km";

            // Update Visuals & Text
            updateVisuals(heightKm, count);
        }

        function updateVisuals(km, count) {
            let message = "";
            let sub = "";
            let stackHeightPercent = 0; // for CSS visualization

            // Logic for feedback messages based on height milestones
            if (km < H_63_BUILDING) {
                message = "ì•„ì§ ì‹œì‘ ë‹¨ê³„ì…ë‹ˆë‹¤.";
                sub = "63ë¹Œë”© ë†’ì´(249m)ë³´ë‹¤ ë‚®ì•„ìš”.";
                stackHeightPercent = 5;
                highlightMarker(null);
            } else if (km < H_EARTH_RADIUS) {
                message = "ì§€ìƒ ëœë“œë§ˆí¬ ëŒíŒŒ!";
                const times = (km / H_63_BUILDING).toFixed(0);
                sub = `63ë¹Œë”©ì„ ${times}ê°œ ìŒ“ì€ ë†’ì´ì…ë‹ˆë‹¤.`;
                stackHeightPercent = 15;
                highlightMarker('marker-63');
            } else if (km < H_MOON_DIST) {
                message = "ì§€êµ¬ë¥¼ ë²—ì–´ë‚¬ìŠµë‹ˆë‹¤! ğŸš€";
                sub = "ì§€êµ¬ ë°˜ì§€ë¦„ì„ ë„˜ì–´ ë‹¬ì„ í–¥í•´ ê°€ê³  ìˆìŠµë‹ˆë‹¤.";
                stackHeightPercent = 30;
                highlightMarker('marker-earth');
            } else if (km < H_SUN_DIST) {
                message = "ë‹¬ì„ ë„˜ì–´ íƒœì–‘ê³„ ì—¬í–‰ ì¤‘ ğŸŒ•";
                const times = (km / H_MOON_DIST).toFixed(1);
                sub = `ë‹¬ê¹Œì§€ ê±°ë¦¬ì˜ ${times}ë°°ì…ë‹ˆë‹¤.`;
                stackHeightPercent = 50;
                highlightMarker('marker-moon');
            } else if (km < H_LIGHT_YEAR) {
                message = "íƒœì–‘ê³„ë³´ë‹¤ ê±°ëŒ€í•©ë‹ˆë‹¤! â˜€ï¸";
                const times = (km / H_SUN_DIST).toFixed(1);
                sub = `íƒœì–‘ê¹Œì§€ ê±°ë¦¬ì˜ ì•½ ${formatBigNumber(times)}ë°°ì…ë‹ˆë‹¤.`;
                stackHeightPercent = 75;
                highlightMarker('marker-sun');
            } else {
                message = "ì€í•˜ê³„ ê·œëª¨ì˜ ê±°ëŒ€í•¨! ğŸŒŒ";
                const ly = (km / H_LIGHT_YEAR).toFixed(1);
                sub = `ë†’ì´ê°€ ì•½ ${ly} ê´‘ë…„ì…ë‹ˆë‹¤. ìš°ë¦¬ ì€í•˜ ì§€ë¦„ê³¼ ë¹„êµí•´ë³´ì„¸ìš”!`;
                stackHeightPercent = 100;
                highlightMarker('marker-galaxy');
            }

            // Special Case for 1 Mole
            if (count > 6e23) {
                 message = "âœ¨ 1ëª° ë‹¬ì„±! âœ¨";
            }

            mainMessage.textContent = message;
            subMessage.textContent = sub;
            coinStack.style.height = stackHeightPercent + "%";
        }

        function highlightMarker(id) {
            // Reset all opacity
            ['marker-63', 'marker-earth', 'marker-moon', 'marker-sun', 'marker-galaxy'].forEach(mid => {
                document.getElementById(mid).className = "opacity-30 transition-opacity duration-300";
            });
            if(id) {
                document.getElementById(id).className = "opacity-100 font-bold text-yellow-400 transition-opacity duration-300 transform translate-x-2";
            }
        }

        function formatBigNumber(num) {
            return new Intl.NumberFormat().format(num);
        }

        function setMole() {
            slider.value = 23.78; // log10(6.02e23)
            updateSimulation();
        }

        function resetSim() {
            slider.value = 0;
            updateSimulation();
        }

        // Initialize
        slider.addEventListener('input', updateSimulation);
        thicknessInput.addEventListener('input', updateSimulation);
        updateSimulation();
    </script>
</body>
</html>