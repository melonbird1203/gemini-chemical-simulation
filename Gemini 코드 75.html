<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°€ìƒì‹¤í—˜: ì‚°í™” êµ¬ë¦¬(II)ì˜ ì„±ë¶„ë¹„</title>
    <style>
        :root {
            --primary-color: #4A90E2;
            --accent-color: #E74C3C;
            --bg-color: #F5F7FA;
            --text-color: #333;
            --copper-color: #B87333;
            --oxide-color: #2C3E50;
        }

        body {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            padding: 30px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 20px;
        }

        h1 { margin: 0; color: var(--primary-color); }
        h3 { margin-top: 10px; color: #666; font-weight: normal; }

        .lab-layout {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        @media (max-width: 768px) {
            .lab-layout { grid-template-columns: 1fr; }
        }

        /* ì‹¤í—˜ êµ¬ì—­ ìŠ¤íƒ€ì¼ */
        .experiment-zone {
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            position: relative;
            text-align: center;
        }

        .apparatus {
            height: 250px;
            position: relative;
            background: #f9f9f9;
            border-radius: 8px;
            margin-bottom: 20px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: flex-end;
        }

        /* ë„ê°€ë‹ˆ ë° ë¬¼ì§ˆ ì‹œê°í™” */
        .tripod {
            width: 100px;
            height: 80px;
            border-left: 5px solid #555;
            border-right: 5px solid #555;
            border-top: 5px solid #555;
            position: relative;
            margin-bottom: 20px;
        }
        .crucible {
            width: 60px;
            height: 40px;
            background: #eee;
            border: 2px solid #ccc;
            border-radius: 0 0 30px 30px;
            position: absolute;
            bottom: 85px; /* ì‚¼ë°œì´ ìœ„ */
            left: 50%;
            transform: translateX(-50%);
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: flex-end;
        }
        .substance {
            width: 40px;
            height: 15px;
            background-color: var(--copper-color);
            border-radius: 50% 50% 5px 5px;
            transition: background-color 2s ease;
        }
        .flame {
            width: 30px;
            height: 40px;
            background: radial-gradient(circle, yellow, orange, red);
            border-radius: 50% 50% 20% 20%;
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.5s;
            animation: flicker 0.5s infinite alternate;
        }

        @keyframes flicker { from { transform: translateX(-50%) scale(1); } to { transform: translateX(-50%) scale(1.1); } }

        /* ì…ì ëª¨í˜• ìº”ë²„ìŠ¤ */
        #particleCanvas {
            width: 100%;
            height: 150px;
            background: #222;
            border-radius: 8px;
            margin-top: 10px;
        }

        /* ì œì–´ íŒ¨ë„ */
        .controls {
            background: #f0f4f8;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }
        
        .control-group { margin-bottom: 15px; }
        label { font-weight: bold; display: block; margin-bottom: 5px; }
        
        input[type="range"] { width: 100%; cursor: pointer; }
        
        .btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }
        .btn:hover { background: #357ABD; }
        .btn:disabled { background: #ccc; cursor: not-allowed; }
        .btn-reset { background: #95a5a6; margin-left: 10px; }

        /* ë°ì´í„° ë° ê·¸ë˜í”„ êµ¬ì—­ */
        .data-zone {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th { background-color: #f2f2f2; }
        .highlight { background-color: #e8f4ff; font-weight: bold; }

        .graph-container {
            height: 200px;
            border: 1px solid #eee;
            border-radius: 8px;
            position: relative;
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            padding: 10px 10px 30px 40px; /*ì¶• ê³µê°„ í™•ë³´*/
        }
        
        /* ê·¸ë˜í”„ ì¶• ë¼ë²¨ */
        .y-axis-label {
            position: absolute;
            left: -30px;
            top: 50%;
            transform: rotate(-90deg);
            font-size: 12px;
            width: 100px;
            text-align: center;
        }
        .x-axis-label {
            position: absolute;
            bottom: 5px;
            width: 100%;
            text-align: center;
            font-size: 12px;
        }

        .bar-group {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 20%;
            height: 100%;
            justify-content: flex-end;
        }
        .bar {
            width: 100%;
            transition: height 1s ease;
            position: relative;
        }
        .bar-cu { background-color: var(--copper-color); }
        .bar-o { background-color: var(--primary-color); }
        .bar-label { font-size: 12px; margin-top: 5px; }

        .feedback-box {
            background: #fff3cd;
            border: 1px solid #ffeeba;
            color: #856404;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            font-size: 14px;
        }
        
        /* í€´ì¦ˆ ì˜ì—­ */
        .quiz-section {
            margin-top: 30px;
            padding: 20px;
            border-top: 2px dashed #ddd;
        }
        .quiz-options button {
            display: block;
            width: 100%;
            margin: 5px 0;
            padding: 8px;
            background: white;
            border: 1px solid #ccc;
            text-align: left;
            cursor: pointer;
        }
        .quiz-options button:hover { background: #f0f0f0; }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>ğŸ”¬ ì‚°í™” êµ¬ë¦¬(II) ìƒì„± ì‹¤í—˜</h1>
        <h3>ì¼ì • ì„±ë¶„ë¹„ ë²•ì¹™ ì•Œì•„ë³´ê¸°</h3>
    </header>

    <div class="lab-layout">
        <div class="experiment-zone">
            <div class="apparatus">
                <div class="tripod"></div>
                <div class="crucible">
                    <div id="substanceDisplay" class="substance"></div>
                </div>
                <div id="flameDisplay" class="flame"></div>
            </div>

            <div style="text-align: left; font-size: 0.9em; margin-bottom: 5px;">ğŸ§¬ ì…ì ëª¨í˜• (ğŸ”´êµ¬ë¦¬ / ğŸ”µì‚°ì†Œ)</div>
            <canvas id="particleCanvas" width="400" height="150"></canvas>

            <div class="controls">
                <div class="control-group">
                    <label for="massInput">êµ¬ë¦¬(Cu)ì˜ ì§ˆëŸ‰: <span id="massValue">4.0</span>g</label>
                    <input type="range" id="massInput" min="0" max="10" step="0.4" value="4.0">
                </div>
                <div class="control-group">
                    <label>ë°˜ì‘ ì¡°ê±´: ì‚°ì†Œ ì¶©ë¶„í•¨ (ê°œë°©ëœ ìš©ê¸°)</label>
                </div>
                <button id="heatBtn" class="btn" onclick="startExperiment()">ğŸ”¥ ê°€ì—´í•˜ê¸°</button>
                <button class="btn btn-reset" onclick="resetExperiment()">ğŸ”„ ì´ˆê¸°í™”</button>
            </div>
            
            <div id="feedbackText" class="feedback-box" style="display:none;"></div>
        </div>

        <div class="data-zone">
            <h3>ğŸ“Š ì‹¤í—˜ ê²°ê³¼ ë°ì´í„°</h3>
            <table id="resultTable">
                <thead>
                    <tr>
                        <th>ë°˜ì‘ ì „ êµ¬ë¦¬ (g)</th>
                        <th>ë°˜ì‘ í›„ ì‚°í™”êµ¬ë¦¬ (g)</th>
                        <th>ê²°í•©í•œ ì‚°ì†Œ (g)</th>
                        <th>ì§ˆëŸ‰ë¹„ (êµ¬ë¦¬:ì‚°ì†Œ)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td id="td-cu">-</td>
                        <td id="td-cuo">-</td>
                        <td id="td-o">-</td>
                        <td id="td-ratio">-</td>
                    </tr>
                </tbody>
            </table>

            <h3>ğŸ“ˆ ì„±ë¶„ ì§ˆëŸ‰ ê·¸ë˜í”„</h3>
            <div class="graph-container">
                <span class="y-axis-label">ì§ˆëŸ‰ (g)</span>
                
                <div class="bar-group">
                    <div id="barCu" class="bar bar-cu" style="height: 0px;"></div>
                    <span class="bar-label">êµ¬ë¦¬</span>
                </div>
                
                <div class="bar-group">
                    <div id="barO" class="bar bar-o" style="height: 0px;"></div>
                    <span class="bar-label">ì‚°ì†Œ</span>
                </div>

                <div class="bar-group">
                    <div id="barCuO" class="bar" style="background-color:var(--oxide-color); height: 0px;"></div>
                    <span class="bar-label">ì‚°í™”êµ¬ë¦¬</span>
                </div>

                <span class="x-axis-label">ë¬¼ì§ˆ ì¢…ë¥˜</span>
            </div>

            <div style="text-align: right; margin-top: 10px;">
                <button class="btn" style="background:#27ae60; font-size:0.9em;" onclick="alert('ì‹¤í—˜ ê²°ê³¼ ë ˆí¬íŠ¸ê°€ PDFë¡œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤. (ì‹œë®¬ë ˆì´ì…˜)')">ğŸ“„ ê²°ê³¼ ë ˆí¬íŠ¸ ì €ì¥</button>
            </div>
        </div>
    </div>

    <div class="quiz-section">
        <h3>ğŸ’¡ ê°œë… í™•ì¸ í€´ì¦ˆ</h3>
        <p>Q. êµ¬ë¦¬ 8gì„ ì™„ì „íˆ ì—°ì†Œì‹œí‚¤ê¸° ìœ„í•´ í•„ìš”í•œ ì‚°ì†Œì˜ ìµœì†Œ ì§ˆëŸ‰ì€ ì–¼ë§ˆì¸ê°€ìš”?</p>
        <div class="quiz-options">
            <button onclick="checkAnswer(1)">1. 1g</button>
            <button onclick="checkAnswer(2)">2. 2g</button>
            <button onclick="checkAnswer(3)">3. 4g</button>
            <button onclick="checkAnswer(4)">4. 8g</button>
        </div>
        <div id="quizResult" style="margin-top: 10px; font-weight: bold;"></div>
    </div>
</div>

<script>
    // ë³€ìˆ˜ ì„¤ì •
    const massInput = document.getElementById('massInput');
    const massValue = document.getElementById('massValue');
    const heatBtn = document.getElementById('heatBtn');
    const substance = document.getElementById('substanceDisplay');
    const flame = document.getElementById('flameDisplay');
    const feedbackText = document.getElementById('feedbackText');
    const canvas = document.getElementById('particleCanvas');
    const ctx = canvas.getContext('2d');

    let isReacted = false;
    let particles = [];

    // ì´ˆê¸°í™”
    function init() {
        massInput.addEventListener('input', (e) => {
            massValue.textContent = parseFloat(e.target.value).toFixed(1);
            if(isReacted) resetExperiment(false); // ê°’ ë³€ê²½ ì‹œ ë¦¬ì…‹í•˜ë˜ ê°’ì€ ìœ ì§€
        });
        drawInitialParticles();
    }

    // ì…ì ê·¸ë¦¬ê¸° í•¨ìˆ˜
    function drawInitialParticles() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        particles = [];
        // êµ¬ë¦¬ ì…ì (ê³ ì²´ ìƒíƒœ, ê·œì¹™ì  ë°°ì—´)
        const cuMass = parseFloat(massInput.value);
        const count = Math.floor(cuMass * 2) + 2; // ì‹œê°ì  ê°œìˆ˜ ì¡°ì ˆ
        
        for(let i=0; i<count; i++) {
            particles.push({
                x: 50 + (i % 5) * 20, 
                y: 100 - Math.floor(i / 5) * 20,
                type: 'Cu',
                color: '#B87333'
            });
        }
        
        particles.forEach(p => drawParticle(p));
    }

    function drawParticle(p) {
        ctx.beginPath();
        ctx.arc(p.x, p.y, 8, 0, Math.PI * 2);
        ctx.fillStyle = p.color;
        ctx.fill();
        ctx.strokeStyle = '#fff';
        ctx.stroke();
        ctx.closePath();
        
        // ì…ì ì´ë¦„ í…ìŠ¤íŠ¸
        ctx.fillStyle = 'white';
        ctx.font = '8px Arial';
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.fillText(p.type === 'Cu' ? 'Cu' : 'O', p.x, p.y);
    }

    // ì‹¤í—˜ ì‹œì‘ í•¨ìˆ˜
    function startExperiment() {
        if (parseFloat(massInput.value) === 0) {
            alert("êµ¬ë¦¬ë¥¼ ë„ê°€ë‹ˆì— ë„£ì–´ì£¼ì„¸ìš” (0g ì´ìƒ).");
            return;
        }

        heatBtn.disabled = true;
        massInput.disabled = true;
        flame.style.opacity = 1; // ë¶ˆê½ƒ ì í™”

        // 3ì´ˆê°„ ê°€ì—´ ì• ë‹ˆë©”ì´ì…˜
        setTimeout(() => {
            substance.style.backgroundColor = '#2C3E50'; // ê²€ì€ìƒ‰ìœ¼ë¡œ ë³€ìƒ‰ (CuO)
            calculateResults();
            animateParticlesReaction();
            flame.style.opacity = 0; // ë¶ˆê½ƒ ë„ê¸°
            isReacted = true;
        }, 1500);
    }

    // ê²°ê³¼ ê³„ì‚° ë° ê·¸ë˜í”„ ì—…ë°ì´íŠ¸
    function calculateResults() {
        const cuMass = parseFloat(massInput.value);
        const oMass = cuMass * 0.25; // ë¹„ìœ¨ 4:1
        const cuoMass = cuMass + oMass;

        // í…Œì´ë¸” ì—…ë°ì´íŠ¸
        document.getElementById('td-cu').textContent = cuMass.toFixed(1);
        document.getElementById('td-cuo').textContent = cuoMass.toFixed(1);
        document.getElementById('td-o').textContent = oMass.toFixed(1);
        
        // ë¹„ìœ¨ í‘œì‹œ (í•­ìƒ 4:1)
        document.getElementById('td-ratio').innerHTML = 
            cuMass > 0 ? "<span class='highlight'>4 : 1</span>" : "-";

        // ê·¸ë˜í”„ ì—…ë°ì´íŠ¸ (ìµœëŒ€ 15g ê¸°ì¤€ìœ¼ë¡œ ë†’ì´ í¼ì„¼íŠ¸ ê³„ì‚°)
        const maxScale = 15; 
        document.getElementById('barCu').style.height = (cuMass / maxScale * 100) + '%';
        document.getElementById('barO').style.height = (oMass / maxScale * 100) + '%';
        document.getElementById('barCuO').style.height = (cuoMass / maxScale * 100) + '%';

        // í”¼ë“œë°± í…ìŠ¤íŠ¸
        feedbackText.style.display = 'block';
        feedbackText.innerHTML = `
            <strong>ì‹¤í—˜ ê²°ê³¼ ë¶„ì„:</strong><br>
            êµ¬ë¦¬ ${cuMass}gì´ ëª¨ë‘ ë°˜ì‘í•˜ì—¬ ì‚°í™” êµ¬ë¦¬(II) ${cuoMass}gì´ ë˜ì—ˆìŠµë‹ˆë‹¤.<br>
            ì´ë•Œ ê²°í•©í•œ ì‚°ì†Œì˜ ì§ˆëŸ‰ì€ ${oMass}gì…ë‹ˆë‹¤.<br>
            êµ¬ë¦¬ì™€ ì‚°ì†Œì˜ ì§ˆëŸ‰ë¹„ëŠ” <strong>${cuMass} : ${oMass} = 4 : 1</strong> ì…ë‹ˆë‹¤.
            <br>ğŸ‘‰ ì´ê²ƒì€ <strong>ì¼ì • ì„±ë¶„ë¹„ ë²•ì¹™</strong>ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.
        `;
    }

    // ì…ì ë°˜ì‘ ì• ë‹ˆë©”ì´ì…˜
    function animateParticlesReaction() {
        // ì‚°ì†Œ ì…ìê°€ ë‚ ì•„ì™€ì„œ êµ¬ë¦¬ ì˜†ì— ë¶™ëŠ” ì• ë‹ˆë©”ì´ì…˜ ë¡œì§ (ê°„ë‹¨í™”)
        const currentParticles = [...particles];
        let oCount = 0;
        
        const interval = setInterval(() => {
            if(oCount >= currentParticles.length) {
                clearInterval(interval);
                return;
            }
            
            // ê¸°ì¡´ êµ¬ë¦¬ ì…ì ì˜†ì— ì‚°ì†Œ ì…ì ì¶”ê°€
            const targetCu = currentParticles[oCount];
            const newO = {
                x: targetCu.x + 10,
                y: targetCu.y - 10,
                type: 'O',
                color: '#4A90E2'
            };
            
            // ìº”ë²„ìŠ¤ ë‹¤ì‹œ ê·¸ë¦¬ê¸°
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // ê¸°ì¡´ ì…ìë“¤ ê·¸ë¦¬ê¸° (CuOë¡œ ìƒ‰ìƒ ë³€ê²½)
            particles.forEach((p, idx) => {
                if (idx <= oCount) p.color = '#2C3E50'; // ë°˜ì‘í•œ êµ¬ë¦¬ëŠ” ê²€ê²Œ
                drawParticle(p);
            });
            
            // ì´ë¯¸ ì¶”ê°€ëœ ì‚°ì†Œë“¤ ê·¸ë¦¬ê¸° (ì—¬ê¸°ì„œëŠ” particles ë°°ì—´ì— ì¶”ê°€í•˜ì—¬ ì²˜ë¦¬)
            particles.push(newO);
            drawParticle(newO);
            
            oCount++;
        }, 100);
    }

    // ì´ˆê¸°í™” í•¨ìˆ˜
    function resetExperiment(fullReset = true) {
        isReacted = false;
        heatBtn.disabled = false;
        massInput.disabled = false;
        flame.style.opacity = 0;
        substance.style.backgroundColor = '#B87333'; // ë‹¤ì‹œ ë¶‰ì€ìƒ‰
        
        // ê·¸ë˜í”„ ë° í…Œì´ë¸” ë¦¬ì…‹
        document.getElementById('barCu').style.height = '0%';
        document.getElementById('barO').style.height = '0%';
        document.getElementById('barCuO').style.height = '0%';
        document.getElementById('td-cu').textContent = '-';
        document.getElementById('td-cuo').textContent = '-';
        document.getElementById('td-o').textContent = '-';
        document.getElementById('td-ratio').textContent = '-';
        
        feedbackText.style.display = 'none';

        if(fullReset) {
            massInput.value = 4.0;
            massValue.textContent = "4.0";
            document.getElementById('quizResult').textContent = "";
        }
        
        drawInitialParticles();
    }

    // í€´ì¦ˆ ì •ë‹µ í™•ì¸
    function checkAnswer(answer) {
        const resultDiv = document.getElementById('quizResult');
        if (answer === 2) {
            resultDiv.style.color = "blue";
            resultDiv.innerHTML = "âœ… ì •ë‹µì…ë‹ˆë‹¤! <br>êµ¬ë¦¬ : ì‚°ì†Œ = 4 : 1 ì´ë¯€ë¡œ, 8 : x = 4 : 1 ì—ì„œ x = 2g ì…ë‹ˆë‹¤.";
        } else {
            resultDiv.style.color = "red";
            resultDiv.textContent = "âŒ ë‹¤ì‹œ ìƒê°í•´ë³´ì„¸ìš”. ì§ˆëŸ‰ë¹„ 4:1ì„ ê¸°ì–µí•˜ì„¸ìš”!";
        }
    }

    // ì‹œì‘
    init();
</script>

</body>
</html>