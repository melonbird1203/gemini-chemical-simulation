<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê³¼í•™ ê°€ìƒì‹¤í—˜ì‹¤: ë¬¼ê³¼ ì‹ìš©ìœ ì˜ ì˜¨ë„ ë³€í™”</title>
    <style>
        :root {
            --primary-color: #4A90E2;
            --secondary-color: #F5A623;
            --bg-color: #f4f7f6;
            --text-color: #333;
            --panel-bg: #ffffff;
        }

        body {
            font-family: 'Pretendard', 'Malgun Gothic', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
        }

        h1 { margin: 0 0 10px 0; color: #2c3e50; }
        .subtitle { font-size: 1.1em; color: #666; }

        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            max-width: 1200px;
            width: 100%;
            justify-content: center;
        }

        /* ì‹¤í—˜ ì˜ì—­ */
        .lab-area {
            flex: 1;
            min-width: 350px;
            background: var(--panel-bg);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .beaker-container {
            display: flex;
            justify-content: space-around;
            width: 100%;
            margin-bottom: 20px;
            margin-top: 20px;
        }

        .apparatus {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
        }

        .thermometer {
            width: 12px;
            height: 120px;
            background: #eee;
            border: 2px solid #999;
            border-radius: 10px;
            position: relative;
            margin-bottom: -40px; /* ë¹„ì»¤ ì•ˆìœ¼ë¡œ ë„£ê¸° */
            z-index: 5;
        }
        
        .thermometer .mercury {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 20%; /* ì´ˆê¸°ê°’ */
            background: red;
            border-radius: 0 0 8px 8px;
            transition: height 0.2s;
        }

        .temp-display {
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 1.2em;
        }

        .beaker {
            width: 100px;
            height: 120px;
            border-left: 3px solid #ccc;
            border-right: 3px solid #ccc;
            border-bottom: 3px solid #ccc;
            border-radius: 0 0 10px 10px;
            position: relative;
            overflow: hidden;
            background: rgba(255,255,255,0.5);
        }

        .liquid {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 60px; /* ì§ˆëŸ‰ì— ë”°ë¼ ë³€í•¨ */
            transition: height 0.3s;
        }

        .liquid.water { background-color: rgba(74, 144, 226, 0.6); }
        .liquid.oil { background-color: rgba(245, 166, 35, 0.6); }

        .heater {
            width: 120px;
            height: 20px;
            background: #555;
            margin-top: 5px;
            border-radius: 5px;
            position: relative;
            transition: background 0.5s;
        }

        .heater.on {
            background: #ff4d4d;
            box-shadow: 0 0 15px #ff4d4d;
        }

        /* ì»¨íŠ¸ë¡¤ ë° ê·¸ë˜í”„ ì˜ì—­ */
        .dashboard {
            flex: 1;
            min-width: 350px;
            background: var(--panel-bg);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
            background: #f9f9f9;
            padding: 15px;
            border-radius: 10px;
        }

        .control-group {
            display: flex;
            flex-direction: column;
        }

        label { font-size: 0.9em; font-weight: bold; margin-bottom: 5px; }
        
        input[type="range"] { width: 100%; cursor: pointer; }

        .btn-group {
            grid-column: 1 / -1;
            display: flex;
            gap: 10px;
        }

        button {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-size: 1em;
            transition: transform 0.1s;
        }

        button:active { transform: scale(0.98); }
        .btn-start { background-color: #2ecc71; color: white; }
        .btn-reset { background-color: #e74c3c; color: white; }

        .graph-area {
            position: relative;
            width: 100%;
            height: 300px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background: #fff;
        }

        canvas { width: 100%; height: 100%; }

        .analysis-box {
            margin-top: 20px;
            padding: 15px;
            background-color: #e8f4fd;
            border-left: 5px solid #4A90E2;
            border-radius: 5px;
            display: none; /* ì‹¤í—˜ í›„ í‘œì‹œ */
        }

        .quiz-section {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px dashed #ccc;
        }

        .safety-note {
            width: 100%;
            max-width: 800px;
            background: #fff3cd;
            color: #856404;
            padding: 10px;
            text-align: center;
            border-radius: 5px;
            margin-bottom: 15px;
            font-size: 0.9em;
        }

    </style>
</head>
<body>

    <header>
        <h1>ğŸ”¥ ë¬¼ vs ì‹ìš©ìœ : ë¬´ì—‡ì´ ë” ë¹¨ë¦¬ ëœ¨ê±°ì›Œì§ˆê¹Œ?</h1>
        <div class="subtitle">ì¤‘í•™êµ 2í•™ë…„ ê³¼í•™: ë¬¼ì§ˆì˜ ë¹„ì—´ ë¹„êµ ê°€ìƒì‹¤í—˜</div>
    </header>

    <div class="safety-note">
        âš ï¸ <strong>ì•ˆì „ ì£¼ì˜:</strong> ì‹¤ì œ ì‹¤í—˜ì‹¤ì—ì„œëŠ” ê°€ì—´ëœ ë¹„ì»¤ì™€ ì•¡ì²´ê°€ ë§¤ìš° ëœ¨ê±°ìš°ë‹ˆ ì ˆëŒ€ ë§¨ì†ìœ¼ë¡œ ë§Œì§€ì§€ ë§ˆì„¸ìš”!
    </div>

    <div class="container">
        <div class="lab-area">
            <h3>ì‹¤í—˜ ì¥ì¹˜</h3>
            <div class="beaker-container">
                <div class="apparatus">
                    <div class="temp-display" id="tempTextWater">20â„ƒ</div>
                    <div class="thermometer">
                        <div class="mercury" id="mercuryWater"></div>
                    </div>
                    <div class="beaker">
                        <div class="liquid water" id="liquidWater"></div>
                    </div>
                    <div>ğŸ’§ ë¬¼ (<span id="massDisplayWater">100</span>g)</div>
                    <div class="heater" id="heaterWater"></div>
                </div>

                <div class="apparatus">
                    <div class="temp-display" id="tempTextOil">20â„ƒ</div>
                    <div class="thermometer">
                        <div class="mercury" id="mercuryOil"></div>
                    </div>
                    <div class="beaker">
                        <div class="liquid oil" id="liquidOil"></div>
                    </div>
                    <div>ğŸŒ» ì‹ìš©ìœ  (<span id="massDisplayOil">100</span>g)</div>
                    <div class="heater" id="heaterOil"></div>
                </div>
            </div>
            <p style="text-align: center; font-size: 0.9em; color:#777;">
                ê°€ì—´ ì¥ì¹˜ë¥¼ ì¼œë©´ ë¹„ì»¤ ì•„ë˜ê°€ ë¶‰ê²Œ ë³€í•˜ë©° ì˜¨ë„ê°€ ì˜¬ë¼ê°‘ë‹ˆë‹¤.
            </p>
        </div>

        <div class="dashboard">
            <h3>ì‹¤í—˜ ì¡°ì‘ ë° ê²°ê³¼</h3>
            <div class="controls">
                <div class="control-group">
                    <label>ì•¡ì²´ì˜ ì§ˆëŸ‰ (g)</label>
                    <input type="range" id="massRange" min="100" max="200" step="10" value="100">
                    <span style="font-size:0.8em; color:#666;">í˜„ì¬: <span id="massValue">100</span>g</span>
                </div>
                <div class="control-group">
                    <label>ê°€ì—´ê¸° ì„¸ê¸° (ë¶ˆê½ƒ)</label>
                    <input type="range" id="powerRange" min="1" max="5" step="1" value="3">
                    <span style="font-size:0.8em; color:#666;">ì„¸ê¸°: <span id="powerValue">3</span></span>
                </div>
                <div class="btn-group">
                    <button class="btn-start" onclick="startExperiment()">ğŸ”¥ ê°€ì—´ ì‹œì‘</button>
                    <button class="btn-reset" onclick="resetExperiment()">ğŸ”„ ì´ˆê¸°í™”</button>
                </div>
            </div>

            <div class="graph-area">
                <canvas id="tempGraph"></canvas>
            </div>
            <div style="text-align: center; margin-top: 5px;">
                <span style="color:var(--primary-color)">â— ë¬¼</span> &nbsp; 
                <span style="color:var(--secondary-color)">â— ì‹ìš©ìœ </span>
            </div>

            <div class="analysis-box" id="analysisBox">
                <h4>ğŸ“Š ì‹¤í—˜ ê²°ê³¼ ë¶„ì„</h4>
                <p id="resultText">ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
                
                <div class="quiz-section">
                    <strong>ğŸ’¡ ìƒê° ë„“íˆê¸° í€´ì¦ˆ</strong>
                    <p>ê°™ì€ ì—´ì„ ê°€í–ˆëŠ”ë° ì‹ìš©ìœ ì˜ ì˜¨ë„ê°€ ë” ë¹¨ë¦¬ ì˜¤ë¥¸ ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?</p>
                    <select id="quizSelect" style="width: 100%; padding: 8px; margin-bottom: 10px;">
                        <option value="">ì •ë‹µì„ ì„ íƒí•˜ì„¸ìš”...</option>
                        <option value="wrong1">ì‹ìš©ìœ ì˜ ì§ˆëŸ‰ì´ ë” ë¬´ê²ê¸° ë•Œë¬¸ì—</option>
                        <option value="correct">ì‹ìš©ìœ ì˜ ë¹„ì—´ì´ ë¬¼ë³´ë‹¤ ì‘ê¸° ë•Œë¬¸ì—</option>
                        <option value="wrong2">ë¬¼ì€ íˆ¬ëª…í•´ì„œ ì—´ì„ í†µê³¼ì‹œí‚¤ê¸° ë•Œë¬¸ì—</option>
                    </select>
                    <button onclick="checkAnswer()" style="background:#4A90E2; color:white; width:100%;">ì •ë‹µ í™•ì¸</button>
                    <p id="quizFeedback" style="margin-top:10px; font-weight:bold;"></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- ìƒìˆ˜ ë° ë³€ìˆ˜ ì„¤ì • ---
        const specificHeatWater = 4.2; // J/gâ„ƒ (ëŒ€ëµê°’)
        const specificHeatOil = 2.0;   // J/gâ„ƒ (ëŒ€ëµê°’, ë¬¼ì˜ ì ˆë°˜ ì •ë„)
        const initTemp = 20;
        
        let mass = 100;
        let power = 3;
        let time = 0;
        let tempWater = initTemp;
        let tempOil = initTemp;
        let isRunning = false;
        let intervalId = null;
        
        // ë°ì´í„° ë°°ì—´ (ê·¸ë˜í”„ìš©)
        let dataTime = [];
        let dataWater = [];
        let dataOil = [];

        // DOM ìš”ì†Œ
        const elMassRange = document.getElementById('massRange');
        const elMassVal = document.getElementById('massValue');
        const elPowerRange = document.getElementById('powerRange');
        const elPowerVal = document.getElementById('powerValue');
        
        const canvas = document.getElementById('tempGraph');
        const ctx = canvas.getContext('2d');

        // --- ì´ˆê¸°í™” ë° ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ---
        window.onload = function() {
            resetExperiment();
            resizeCanvas();
        };
        window.onresize = resizeCanvas;

        elMassRange.addEventListener('input', (e) => {
            if(isRunning) return;
            mass = parseInt(e.target.value);
            elMassVal.innerText = mass;
            document.getElementById('massDisplayWater').innerText = mass;
            document.getElementById('massDisplayOil').innerText = mass;
            updateLiquidHeight();
        });

        elPowerRange.addEventListener('input', (e) => {
            if(isRunning) return;
            power = parseInt(e.target.value);
            elPowerVal.innerText = power;
        });

        function updateLiquidHeight() {
            // ì§ˆëŸ‰ì´ ë§ìœ¼ë©´ ì•¡ì²´ ë†’ì´ê°€ ë†’ì•„ì§ (60px ~ 100px ì‚¬ì´)
            const height = 40 + (mass / 200) * 60;
            document.getElementById('liquidWater').style.height = height + 'px';
            document.getElementById('liquidOil').style.height = height + 'px';
        }

        function resizeCanvas() {
            // ìº”ë²„ìŠ¤ í•´ìƒë„ ì¡°ì •
            canvas.width = canvas.parentElement.clientWidth;
            canvas.height = canvas.parentElement.clientHeight;
            drawGraph();
        }

        // --- ì‹¤í—˜ ë¡œì§ ---
        function startExperiment() {
            if (isRunning) return;
            isRunning = true;
            
            // UI ì ê¸ˆ
            elMassRange.disabled = true;
            elPowerRange.disabled = true;
            document.getElementById('heaterWater').classList.add('on');
            document.getElementById('heaterOil').classList.add('on');
            document.getElementById('analysisBox').style.display = 'none';

            intervalId = setInterval(updateSimulation, 100); // 0.1ì´ˆë§ˆë‹¤ ì—…ë°ì´íŠ¸
        }

        function updateSimulation() {
            time += 1; // 1í‹± = 10ì´ˆë¡œ ê°€ì • (í™”ë©´ìƒ ë¹ ë¥¸ ì „ê°œ)

            // ë¬¼ë¦¬ ê³„ì‚°: Q = cmÎ”t => Î”t = Q / cm
            // Powerê°€ ë†’ì„ìˆ˜ë¡ Q ì¦ê°€
            const heatAdded = power * 20; // ì„ì˜ì˜ ì—´ëŸ‰ ë‹¨ìœ„
            
            // ì˜¨ë„ ìƒìŠ¹ ê³„ì‚°
            let deltaT_Water = heatAdded / (mass * specificHeatWater);
            let deltaT_Oil = heatAdded / (mass * specificHeatOil);

            tempWater += deltaT_Water;
            tempOil += deltaT_Oil;

            // ë¬¼ì€ 100ë„ì—ì„œ ë“ìŒ (ê°„ë‹¨í•œ ì‹œë®¬ë ˆì´ì…˜ ìœ„í•´ 100ë„ ì œí•œ)
            if(tempWater > 100) tempWater = 100;
            // ê¸°ë¦„ì€ ë” ì˜¬ë¼ê°ˆ ìˆ˜ ìˆìŒ (200ë„ ì œí•œ)
            if(tempOil > 200) tempOil = 200;

            // ë°ì´í„° ì €ì¥
            dataTime.push(time);
            dataWater.push(tempWater);
            dataOil.push(tempOil);

            // UI ì—…ë°ì´íŠ¸
            updateDisplay();
            drawGraph();

            // ì¢…ë£Œ ì¡°ê±´: ì‹œê°„ì´ 60í‹±(ì•½ 10ë¶„ ê°€ìƒ) ì§€ë‚˜ê±°ë‚˜ ì˜¨ë„ê°€ ë„ˆë¬´ ë†’ìœ¼ë©´ ì¢…ë£Œ
            if (time >= 60 || tempOil >= 150) {
                stopExperiment();
            }
        }

        function updateDisplay() {
            // í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
            document.getElementById('tempTextWater').innerText = Math.round(tempWater) + 'â„ƒ';
            document.getElementById('tempTextOil').innerText = Math.round(tempOil) + 'â„ƒ';

            // ì˜¨ë„ê³„ ë†’ì´ ì—…ë°ì´íŠ¸ (0~150ë„ ê¸°ì¤€ ë§¤í•‘)
            const hWater = Math.min((tempWater / 150) * 100, 100);
            const hOil = Math.min((tempOil / 150) * 100, 100);
            
            document.getElementById('mercuryWater').style.height = hWater + '%';
            document.getElementById('mercuryOil').style.height = hOil + '%';
        }

        function stopExperiment() {
            clearInterval(intervalId);
            isRunning = false;
            document.getElementById('heaterWater').classList.remove('on');
            document.getElementById('heaterOil').classList.remove('on');
            
            showResult();
        }

        function resetExperiment() {
            clearInterval(intervalId);
            isRunning = false;
            time = 0;
            tempWater = initTemp;
            tempOil = initTemp;
            dataTime = [];
            dataWater = [];
            dataOil = [];

            elMassRange.disabled = false;
            elPowerRange.disabled = false;
            document.getElementById('heaterWater').classList.remove('on');
            document.getElementById('heaterOil').classList.remove('on');
            document.getElementById('analysisBox').style.display = 'none';
            document.getElementById('quizSelect').value = "";
            document.getElementById('quizFeedback').innerText = "";

            updateLiquidHeight();
            updateDisplay();
            drawGraph(); // ì´ˆê¸° ë¹ˆ ê·¸ë˜í”„
        }

        // --- ê·¸ë˜í”„ ê·¸ë¦¬ê¸° (Canvas API) ---
        function drawGraph() {
            const w = canvas.width;
            const h = canvas.height;
            const padding = 40;
            
            ctx.clearRect(0, 0, w, h);

            // ì¶• ê·¸ë¦¬ê¸°
            ctx.beginPath();
            ctx.strokeStyle = '#888';
            ctx.lineWidth = 1;
            // Xì¶•
            ctx.moveTo(padding, h - padding);
            ctx.lineTo(w - padding, h - padding);
            // Yì¶•
            ctx.moveTo(padding, h - padding);
            ctx.lineTo(padding, padding);
            ctx.stroke();

            // ë¼ë²¨
            ctx.fillStyle = '#666';
            ctx.font = '12px Arial';
            ctx.fillText('ì‹œê°„', w - padding, h - padding + 30);
            ctx.fillText('ì˜¨ë„(â„ƒ)', 0, padding - 10);

            if (dataTime.length === 0) return;

            // ìŠ¤ì¼€ì¼ ê³„ì‚°
            const maxTime = 60; // xì¶• ìµœëŒ€ê°’
            const maxTemp = 160; // yì¶• ìµœëŒ€ê°’

            const xScale = (w - 2 * padding) / maxTime;
            const yScale = (h - 2 * padding) / maxTemp;

            // ê·¸ë˜í”„ ê·¸ë¦¬ê¸° í•¨ìˆ˜
            function drawLine(data, color) {
                ctx.beginPath();
                ctx.strokeStyle = color;
                ctx.lineWidth = 3;
                data.forEach((val, i) => {
                    const x = padding + i * xScale;
                    const y = h - padding - val * yScale;
                    if (i === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                });
                ctx.stroke();
            }

            drawLine(dataWater, '#4A90E2'); // ë¬¼ (íŒŒë‘)
            drawLine(dataOil, '#F5A623');   // ì‹ìš©ìœ  (ì£¼í™©)
        }

        // --- ê²°ê³¼ ë° í€´ì¦ˆ ---
        function showResult() {
            const box = document.getElementById('analysisBox');
            const resultText = document.getElementById('resultText');
            
            box.style.display = 'block';
            
            const diff = Math.round(tempOil - tempWater);
            resultText.innerHTML = `
                ì‹¤í—˜ ì¢…ë£Œ! ê°™ì€ ì‹œê°„ ë™ì•ˆ ê°€ì—´í–ˆì„ ë•Œ,<br>
                <strong>ì‹ìš©ìœ </strong>ì˜ ì˜¨ë„ê°€ ë¬¼ë³´ë‹¤ <strong>ì•½ ${diff}â„ƒ</strong> ë” ë†’ê²Œ ì˜¬ë¼ê°”ìŠµë‹ˆë‹¤.<br>
                ê·¸ë˜í”„ì˜ ê¸°ìš¸ê¸°ë¥¼ ë¹„êµí•´ë³´ì„¸ìš”. ì–´ëŠ ìª½ì´ ë” ê°€íŒŒë¥¸ê°€ìš”?
            `;
        }

        function checkAnswer() {
            const val = document.getElementById('quizSelect').value;
            const feedback = document.getElementById('quizFeedback');

            if (val === 'correct') {
                feedback.style.color = 'green';
                feedback.innerText = "â­• ì •ë‹µì…ë‹ˆë‹¤! ì‹ìš©ìœ ëŠ” ë¬¼ë³´ë‹¤ ë¹„ì—´ì´ ì‘ì•„ì„œ ì ì€ ì—´ë¡œë„ ì˜¨ë„ê°€ ì‰½ê²Œ ë³€í•©ë‹ˆë‹¤.";
            } else if (val === '') {
                feedback.style.color = '#666';
                feedback.innerText = "ë‹µì„ ì„ íƒí•´ì£¼ì„¸ìš”.";
            } else {
                feedback.style.color = 'red';
                feedback.innerText = "âŒ ë‹¤ì‹œ ìƒê°í•´ë³´ì„¸ìš”. ì§ˆëŸ‰ê³¼ ê°€ì—´ ì¡°ê±´ì€ ê°™ì•˜ìŠµë‹ˆë‹¤.";
            }
        }
    </script>
</body>
</html>