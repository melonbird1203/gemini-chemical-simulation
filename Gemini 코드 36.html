<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì´ì˜¨ì˜ ì´ë™ ì‹¤í—˜ì‹¤</title>
    <style>
        body { font-family: 'Nanum Gothic', sans-serif; background-color: #f0f4f8; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .lab-container { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); max-width: 800px; width: 100%; text-align: center; }
        h1 { color: #2c3e50; margin-bottom: 10px; }
        .description { color: #555; margin-bottom: 20px; font-size: 1.1em; }
        
        /* ì‹¤í—˜ ì˜ì—­ ìŠ¤íƒ€ì¼ */
        .experiment-area { position: relative; width: 600px; height: 300px; background: #e0e0e0; margin: 0 auto 20px; border-radius: 10px; border: 2px solid #bdc3c7; overflow: hidden; }
        .paper { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 500px; height: 150px; background: #fffdf0; border: 1px dashed #ccc; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 6px rgba(0,0,0,0.05); }
        .electrode { position: absolute; top: 50%; transform: translateY(-50%); width: 40px; height: 80px; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 24px; color: white; border-radius: 5px; }
        .electrode.positive { right: 10px; background: #e74c3c; } /* (+)ê·¹ */
        .electrode.negative { left: 10px; background: #3498db; }  /* (-)ê·¹ */
        
        /* ì´ì˜¨ ì‹œê°í™” */
        .ion-spot { width: 40px; height: 40px; border-radius: 50%; position: absolute; opacity: 0.8; filter: blur(5px); transition: transform 0.1s linear; }
        
        /* ì»¨íŠ¸ë¡¤ íŒ¨ë„ */
        .controls { background: #ecf0f1; padding: 20px; border-radius: 10px; display: flex; justify-content: space-around; align-items: center; flex-wrap: wrap; gap: 15px; }
        button { padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; font-weight: bold; transition: 0.2s; }
        .btn-copper { background: #3498db; color: white; } /* í™©ì‚°êµ¬ë¦¬ */
        .btn-perm { background: #9b59b6; color: white; } /* ê³¼ë§ê°€ë‹ˆì¦ˆì‚° */
        .btn-reset { background: #95a5a6; color: white; }
        
        input[type=range] { width: 150px; }
        
        /* í”¼ë“œë°± ì˜ì—­ */
        .feedback-box { margin-top: 20px; padding: 15px; background: #fff3cd; border: 1px solid #ffeeba; border-radius: 8px; color: #856404; display: none; }
        
        .label { font-size: 14px; margin-top: 5px; display: block; }
    </style>
</head>
<body>

<div class="lab-container">
    <h1>âš¡ ì´ì˜¨ì˜ ì´ë™ê³¼ ì „í•˜ í™•ì¸</h1>
    <p class="description">ì´ì˜¨ì´ ë“¤ì–´ìˆëŠ” ìš©ì•¡ì„ ë–¨ì–´ëœ¨ë¦¬ê³  ì „ì••ì„ ê±¸ì–´ ì´ë™ ë°©í–¥ì„ ê´€ì°°í•´ë³´ì„¸ìš”.</p>

    <div class="experiment-area">
        <div class="electrode negative">(-)</div>
        <div class="electrode positive">(+)</div>
        <div class="paper" id="paper">
            <span style="color:#aaa; font-size:12px;">ì§ˆì‚° ì¹¼ë¥¨ ìˆ˜ìš©ì•¡ ì²˜ë¦¬ë¨</span>
            <div id="ionSpot" class="ion-spot" style="display:none;"></div>
        </div>
    </div>

    <div class="controls">
        <div>
            <label class="label">1. ì‹œì•½ ì„ íƒ</label>
            <button class="btn-copper" onclick="selectIon('Cu')">í™©ì‚° êµ¬ë¦¬(II)<br>(íŒŒë€ìƒ‰)</button>
            <button class="btn-perm" onclick="selectIon('Mn')">ê³¼ë§ê°€ë‹ˆì¦ˆì‚° ì¹¼ë¥¨<br>(ë³´ë¼ìƒ‰)</button>
        </div>
        
        <div>
            <label class="label">2. ì „ì•• ì¡°ì ˆ (ì†ë„)</label>
            <input type="range" id="voltage" min="0" max="24" value="0" step="12" oninput="updateVoltage()">
            <span id="voltageVal">0V</span>
        </div>

        <div>
            <label class="label">3. ì œì–´</label>
            <button class="btn-reset" onclick="resetExp()">ì´ˆê¸°í™”</button>
        </div>
    </div>

    <div id="feedback" class="feedback-box"></div>
</div>

<script>
    let currentIon = null; // 'Cu' or 'Mn'
    let voltage = 0;
    let positionX = 0;
    let animationId = null;
    const ionSpot = document.getElementById('ionSpot');
    const feedback = document.getElementById('feedback');

    function selectIon(type) {
        resetExp(false);
        currentIon = type;
        ionSpot.style.display = 'block';
        ionSpot.style.transform = 'translate(0px, 0px)';
        
        if (type === 'Cu') {
            ionSpot.style.backgroundColor = 'blue';
            feedback.innerHTML = "<strong>í™©ì‚° êµ¬ë¦¬(II) ìˆ˜ìš©ì•¡</strong>ì„ ë–¨ì–´ëœ¨ë ¸ìŠµë‹ˆë‹¤.<br>ì „ì••ì„ ì˜¬ë¦¬ë©´ íŒŒë€ìƒ‰ ì„±ë¶„ì€ ì–´ë””ë¡œ ê°ˆê¹Œìš”?";
        } else {
            ionSpot.style.backgroundColor = 'purple';
            feedback.innerHTML = "<strong>ê³¼ë§ê°€ë‹ˆì¦ˆì‚° ì¹¼ë¥¨ ìˆ˜ìš©ì•¡</strong>ì„ ë–¨ì–´ëœ¨ë ¸ìŠµë‹ˆë‹¤.<br>ì „ì••ì„ ì˜¬ë¦¬ë©´ ë³´ë¼ìƒ‰ ì„±ë¶„ì€ ì–´ë””ë¡œ ê°ˆê¹Œìš”?";
        }
        feedback.style.display = 'block';
    }

    function updateVoltage() {
        voltage = parseInt(document.getElementById('voltage').value);
        document.getElementById('voltageVal').innerText = voltage + "V";
        
        if (voltage > 0 && currentIon) {
            startAnimation();
        } else {
            stopAnimation();
        }
    }

    function startAnimation() {
        if (animationId) cancelAnimationFrame(animationId);
        
        function animate() {
            // ì†ë„ëŠ” ì „ì••ì— ë¹„ë¡€
            let speed = voltage * 0.05; 
            
            // Cu(2+)ëŠ” ì–‘ì´ì˜¨ì´ë¯€ë¡œ (-)ê·¹(ì™¼ìª½)ìœ¼ë¡œ ì´ë™
            if (currentIon === 'Cu') {
                positionX -= speed;
                if (positionX < -210) positionX = -210; // ì „ê·¹ ë„ë‹¬
            } 
            // MnO4(-)ëŠ” ìŒì´ì˜¨ì´ë¯€ë¡œ (+)ê·¹(ì˜¤ë¥¸ìª½)ìœ¼ë¡œ ì´ë™
            else if (currentIon === 'Mn') {
                positionX += speed;
                if (positionX > 210) positionX = 210; // ì „ê·¹ ë„ë‹¬
            }

            ionSpot.style.transform = `translate(${positionX}px, 0px)`;
            
            // ê²°ê³¼ í”¼ë“œë°±
            updateFeedback();

            if (voltage > 0) {
                animationId = requestAnimationFrame(animate);
            }
        }
        animate();
    }

    function updateFeedback() {
        if (currentIon === 'Cu' && positionX < -50) {
            feedback.innerHTML = "ğŸ” <strong>ê´€ì°° ê²°ê³¼:</strong> íŒŒë€ìƒ‰(êµ¬ë¦¬ ì´ì˜¨, CuÂ²âº)ì´ <strong>(-)ê·¹</strong>ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.<br>ğŸ‘‰ <strong>ê²°ë¡ :</strong> êµ¬ë¦¬ ì´ì˜¨ì€ <strong>(+)ì „í•˜</strong>ë¥¼ ë ê³  ìˆìŠµë‹ˆë‹¤.";
            feedback.style.background = "#d1ecf1";
            feedback.style.color = "#0c5460";
        } else if (currentIon === 'Mn' && positionX > 50) {
            feedback.innerHTML = "ğŸ” <strong>ê´€ì°° ê²°ê³¼:</strong> ë³´ë¼ìƒ‰(ê³¼ë§ê°€ë‹ˆì¦ˆì‚° ì´ì˜¨, MnOâ‚„â»)ì´ <strong>(+)ê·¹</strong>ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.<br>ğŸ‘‰ <strong>ê²°ë¡ :</strong> ê³¼ë§ê°€ë‹ˆì¦ˆì‚° ì´ì˜¨ì€ <strong>(-)ì „í•˜</strong>ë¥¼ ë ê³  ìˆìŠµë‹ˆë‹¤.";
            feedback.style.background = "#e2e3e5";
            feedback.style.color = "#383d41";
        }
    }

    function stopAnimation() {
        if (animationId) cancelAnimationFrame(animationId);
    }

    function resetExp(full = true) {
        stopAnimation();
        positionX = 0;
        ionSpot.style.transform = 'translate(0,0)';
        
        if (full) {
            currentIon = null;
            ionSpot.style.display = 'none';
            document.getElementById('voltage').value = 0;
            document.getElementById('voltageVal').innerText = "0V";
            feedback.style.display = 'none';
        }
    }
</script>

</body>
</html>