<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¤‘3 ê³¼í•™: í™”í•™ ë°˜ì‘ì˜ ë³€í™” ê´€ì°° ê°€ìƒì‹¤í—˜</title>
    <style>
        :root {
            --primary: #4A90E2;
            --secondary: #50E3C2;
            --accent: #FF6B6B;
            --bg: #F5F7FA;
            --text: #2C3E50;
        }
        body {
            font-family: 'Pretendard', 'Malgun Gothic', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }
        header {
            background-color: var(--primary);
            color: white;
            width: 100%;
            padding: 1rem 0;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .container {
            display: flex;
            flex-wrap: wrap;
            max-width: 1200px;
            width: 95%;
            margin-top: 20px;
            gap: 20px;
        }
        /* ì‹¤í—˜ ì˜ì—­ */
        .lab-bench {
            flex: 2;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            min-height: 400px;
        }
        .beaker-container {
            position: relative;
            width: 200px;
            height: 250px;
            margin-top: 50px;
        }
        .beaker {
            width: 100%;
            height: 100%;
            border: 4px solid #aaa;
            border-top: none;
            border-radius: 0 0 20px 20px;
            position: relative;
            overflow: hidden;
            background: rgba(255,255,255,0.5);
        }
        .liquid {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 0%; /* JSë¡œ ì œì–´ */
            background-color: #E0F7FA;
            transition: height 1s, background-color 1s;
        }
        .solid-matter {
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 40px;
            background: #eee;
            border-radius: 10px;
            display: none;
        }
        
        /* ë°˜ì‘ íš¨ê³¼ ì• ë‹ˆë©”ì´ì…˜ */
        .bubble {
            position: absolute;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            border: 1px solid #fff;
            animation: rise 2s infinite ease-in;
            display: none;
        }
        @keyframes rise {
            0% { bottom: 0; opacity: 0; transform: translateX(0); }
            50% { opacity: 1; }
            100% { bottom: 100%; opacity: 0; transform: translateX(10px); }
        }
        
        .precipitate {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 0;
            background-color: white;
            opacity: 0.9;
            transition: height 2s;
        }
        
        .glow-effect {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 0; height: 0;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255,200,0,0.8) 0%, rgba(255,0,0,0) 70%);
            transition: width 0.5s, height 0.5s;
        }

        /* ì»¨íŠ¸ë¡¤ íŒ¨ë„ */
        .controls {
            flex: 1;
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        h2, h3 { margin-top: 0; color: var(--primary); }
        
        .btn {
            padding: 12px;
            border: none;
            border-radius: 8px;
            background-color: var(--primary);
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: 0.2s;
            font-size: 1rem;
        }
        .btn:hover { background-color: #357ABD; }
        .btn:disabled { background-color: #ccc; cursor: not-allowed; }
        .btn-reset { background-color: var(--accent); }
        
        .selection-group {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        /* ì •ë³´ ë° ê²°ê³¼ ì°½ */
        .info-panel {
            margin-top: 20px;
            padding: 15px;
            background: #F0F4F8;
            border-radius: 10px;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        /* ì…ì ëª¨í˜• ë·°ì–´ */
        .particle-view {
            width: 100%;
            height: 150px;
            background: #222;
            border-radius: 10px;
            margin-top: 10px;
            position: relative;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #aaa;
            font-size: 0.8rem;
        }
        .atom {
            width: 20px; height: 20px;
            border-radius: 50%;
            position: absolute;
            transition: all 1s ease-in-out;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 10px;
            font-weight: bold;
        }

        /* í€´ì¦ˆ ì˜ì—­ */
        .quiz-section {
            width: 100%;
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            display: none;
        }
        .quiz-options button {
            margin: 5px;
            background: #eee;
            color: #333;
        }
        
        /* ì˜¨ë„ê³„ */
        .thermometer-wrapper {
            position: absolute;
            right: 20px;
            top: 50px;
            width: 20px;
            height: 150px;
            background: #eee;
            border-radius: 10px;
            border: 2px solid #ccc;
        }
        .mercury {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 30%; /* ê¸°ë³¸ ì˜¨ë„ */
            background: #FF6B6B;
            border-radius: 0 0 8px 8px;
            transition: height 1s;
        }
        .temp-text {
            position: absolute;
            top: -25px;
            right: 0;
            font-weight: bold;
        }

    </style>
</head>
<body>

<header>
    <h1>ğŸ§ª ì¤‘3 ê³¼í•™: í™”í•™ ë°˜ì‘ ê´€ì°° ì‹¤í—˜ì‹¤</h1>
</header>

<div class="container">
    <div class="lab-bench">
        <h3>ì‹¤í—˜ëŒ€</h3>
        <div class="beaker-container">
            <div class="beaker">
                <div class="liquid" id="liquid"></div>
                <div class="solid-matter" id="solid"></div>
                <div class="precipitate" id="precipitate"></div>
                <div class="glow-effect" id="glow"></div>
                </div>
        </div>
        
        <div class="thermometer-wrapper">
            <span class="temp-text" id="tempText">20Â°C</span>
            <div class="mercury" id="mercury"></div>
        </div>

        <div style="margin-top: 20px; text-align: center;">
            <p><strong>ì…ì ëª¨í˜• (í™•ëŒ€ê²½)</strong></p>
            <div class="particle-view" id="particleBox">
                ì‹¤í—˜ì„ ì„ íƒí•˜ê³  ë°˜ì‘ì„ ì‹œì‘í•˜ì„¸ìš”.
            </div>
            <p style="font-size: 0.8rem; color: #666;">* ì‹¤ì œ ì…ìëŠ” í›¨ì”¬ ì‘ìœ¼ë©° ëŠì„ì—†ì´ ìš´ë™í•©ë‹ˆë‹¤.</p>
        </div>
    </div>

    <div class="controls">
        <h3>1. ì‹¤í—˜ ì„ íƒ</h3>
        <p>ê´€ì°°í•˜ê³  ì‹¶ì€ ë°˜ì‘ì„ ì„ íƒí•˜ì„¸ìš”.</p>
        <div class="selection-group">
            <button class="btn" onclick="setExperiment(1)">â‘  ê¸°ì²´ ë°œìƒ</button>
            <button class="btn" onclick="setExperiment(2)">â‘¡ ì•™ê¸ˆ ìƒì„±</button>
            <button class="btn" onclick="setExperiment(3)">â‘¢ ë¹›ê³¼ ì—´</button>
        </div>

        <div id="material-list" class="info-panel">
            ì‹¤í—˜ì„ ì„ íƒí•˜ë©´ ì¬ë£Œê°€ ì¤€ë¹„ë©ë‹ˆë‹¤.
        </div>

        <h3>2. ì‹¤í—˜ ìˆ˜í–‰</h3>
        <button class="btn" id="btnAddReactant" onclick="addReactants()" disabled>ë°˜ì‘ë¬¼ ë„£ê¸°</button>
        <button class="btn btn-reset" onclick="resetExperiment()">ì‹¤í—˜ ì´ˆê¸°í™”</button>

        <h3>3. ê´€ì°° ê²°ê³¼</h3>
        <div class="info-panel" id="result-log">
            ëŒ€ê¸° ì¤‘...
        </div>
    </div>
</div>

<div class="container quiz-section" id="quizArea">
    <h3>ğŸ“ ê°œë… í™•ì¸ í€´ì¦ˆ</h3>
    <p id="quizQuestion">ë¬¸ì œê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>
    <div class="quiz-options" id="quizOptions"></div>
    <p id="quizFeedback" style="font-weight: bold; margin-top: 10px;"></p>
</div>

<script>
    let currentExp = 0; // 0: None, 1: Gas, 2: Precipitate, 3: Heat/Light
    let step = 0; // 0: Start, 1: Ready, 2: Reacted

    const materials = {
        1: { name: "ë‹¬ê±€ ê»ë°ê¸°(íƒ„ì‚° ì¹¼ìŠ˜) + ë¬½ì€ ì—¼ì‚°", desc: "ë‹¬ê±€ ê»ë°ê¸°ì— ì‚°ì„± ìš©ì•¡ì„ ë–¨ì–´ëœ¨ë ¤ ë´…ë‹ˆë‹¤.", temp: 25 },
        2: { name: "ì§ˆì‚° ì€ ìˆ˜ìš©ì•¡ + ì—¼í™” ë‚˜íŠ¸ë¥¨ ìˆ˜ìš©ì•¡", desc: "ë‘ íˆ¬ëª…í•œ ìˆ˜ìš©ì•¡ì„ ì„ì–´ ë´…ë‹ˆë‹¤.", temp: 20 },
        3: { name: "ë©”í…Œì¸(ì—°ë£Œ) ì—°ì†Œ", desc: "ì—°ë£Œê°€ ì‚°ì†Œì™€ ë§Œë‚˜ ì—°ì†Œ ë°˜ì‘ì„ ì¼ìœ¼í‚µë‹ˆë‹¤.", temp: 80 }
    };

    function setExperiment(expId) {
        resetExperiment();
        currentExp = expId;
        const mat = materials[expId];
        document.getElementById('material-list').innerHTML = `<strong>ì¤€ë¹„ë¬¼:</strong> ${mat.name}<br><br>${mat.desc}`;
        document.getElementById('btnAddReactant').disabled = false;
        document.getElementById('btnAddReactant').innerText = "ë°˜ì‘ ì‹œì‘í•˜ê¸°";
        
        // ì´ˆê¸° ì…ì ì„¤ì • (ë°˜ì‘ ì „)
        drawParticles(expId, 'before');
        document.getElementById('result-log').innerText = "ì‹¤í—˜ ì¤€ë¹„ ì™„ë£Œ. 'ë°˜ì‘ ì‹œì‘í•˜ê¸°'ë¥¼ ëˆ„ë¥´ì„¸ìš”.";
    }

    function addReactants() {
        if (step === 2) return; // ì´ë¯¸ ë°˜ì‘í•¨
        step = 2;
        document.getElementById('btnAddReactant').disabled = true;

        const liquid = document.getElementById('liquid');
        const solid = document.getElementById('solid');
        const log = document.getElementById('result-log');
        const tempText = document.getElementById('tempText');
        const mercury = document.getElementById('mercury');

        // ê¸°ë³¸ ì•¡ì²´ ì±„ìš°ê¸°
        liquid.style.height = "50%";
        
        if (currentExp === 1) {
            // ê¸°ì²´ ë°œìƒ (ë‹¬ê±€ê»ë°ê¸° + ì‹ì´ˆ)
            solid.style.display = "block"; // ë‹¬ê±€ê»ë°ê¸°
            liquid.style.backgroundColor = "#FDF5E6"; // ì‹ì´ˆ ìƒ‰
            
            log.innerHTML = "ë°˜ì‘ ì¤‘... <br>ë¶€ê¸€ë¶€ê¸€ ê±°í’ˆì´ ì˜¬ë¼ì˜µë‹ˆë‹¤! <br><strong>ê´€ì°°: ê¸°ì²´ ë°œìƒ (ì´ì‚°í™”íƒ„ì†Œ)</strong>";
            createBubbles();
            drawParticles(1, 'after');
            
            // ë¯¸ì„¸í•œ ì˜¨ë„ ìƒìŠ¹
            mercury.style.height = "35%";
            tempText.innerText = "22Â°C";

        } else if (currentExp === 2) {
            // ì•™ê¸ˆ ìƒì„±
            liquid.style.backgroundColor = "#E0F7FA";
            
            setTimeout(() => {
                document.getElementById('precipitate').style.height = "20%";
                log.innerHTML = "ë°˜ì‘ ì¤‘... <br>ë¿Œì—° í°ìƒ‰ ê°€ë£¨ê°€ ê°€ë¼ì•‰ìŠµë‹ˆë‹¤. <br><strong>ê´€ì°°: í°ìƒ‰ ì•™ê¸ˆ ìƒì„± (ì—¼í™” ì€)</strong>";
                drawParticles(2, 'after');
            }, 1000);

        } else if (currentExp === 3) {
            // ë¹›ê³¼ ì—´ (ì—°ì†Œ)
            liquid.style.height = "20%"; // ì—°ë£Œ
            liquid.style.backgroundColor = "#ddd";
            
            const glow = document.getElementById('glow');
            glow.style.width = "150px";
            glow.style.height = "150px";
            
            log.innerHTML = "ë°˜ì‘ ì¤‘... <br>ë°ì€ ë¹›ê³¼ ëœ¨ê±°ìš´ ì—´ì´ ë°œìƒí•©ë‹ˆë‹¤. <br><strong>ê´€ì°°: ë¹›ê³¼ ì—´ ë°©ì¶œ (ë°œì—´ ë°˜ì‘)</strong>";
            
            // ì˜¨ë„ ê¸‰ìƒìŠ¹
            mercury.style.height = "80%";
            tempText.innerText = "80Â°C+";
            drawParticles(3, 'after');
        }

        // í€´ì¦ˆ í‘œì‹œ
        setTimeout(() => {
            showQuiz(currentExp);
        }, 3000);
    }

    function createBubbles() {
        const beaker = document.querySelector('.beaker');
        for(let i=0; i<15; i++) {
            let b = document.createElement('div');
            b.className = 'bubble';
            b.style.left = Math.random() * 80 + 10 + "%";
            b.style.width = Math.random() * 10 + 5 + "px";
            b.style.height = b.style.width;
            b.style.animationDuration = (Math.random() * 1 + 1) + "s";
            b.style.display = "block";
            beaker.appendChild(b);
        }
    }

    function drawParticles(expId, state) {
        const box = document.getElementById('particleBox');
        box.innerHTML = ""; // ì´ˆê¸°í™”

        // ê°„ë‹¨í•œ ì…ì ì‹œê°í™” ë¡œì§ (SVG ëŒ€ì‹  div ì‚¬ìš©)
        if (expId === 1) { // ê¸°ì²´ ë°œìƒ
            if (state === 'before') {
                box.innerHTML = `<span style="color:#fff">CaCOâ‚ƒ(ê³ ì²´)ì™€ H+(ì‚°)ì´ ë”°ë¡œ ì¡´ì¬</span>`;
            } else {
                box.innerHTML = `<span style="color:#aaa">ì…ìê°€ ì¬ë°°ì—´ë˜ì–´ COâ‚‚ ê¸°ì²´ê°€ ë˜ì–´ ë‚ ì•„ê°‘ë‹ˆë‹¤.</span>`;
                // ì‹œê°ì  í‘œí˜„ ìƒëµí•˜ê³  í…ìŠ¤íŠ¸ë¡œ ê°œë… ê°•í™”
            }
        } else if (expId === 2) { // ì•™ê¸ˆ
            if (state === 'before') {
                createAtom(box, 'Ag+', 'silver', 30, 40);
                createAtom(box, 'NO3-', 'gray', 50, 40);
                createAtom(box, 'Na+', 'orange', 30, 80);
                createAtom(box, 'Cl-', 'green', 50, 80);
            } else {
                // Agì™€ Clì´ ê²°í•©
                createAtom(box, 'AgCl', 'white', 40, 100); // ë°”ë‹¥ì— ê°€ë¼ì•‰ìŒ
                createAtom(box, 'Na+', 'orange', 30, 30); // ë‘¥ë‘¥
                createAtom(box, 'NO3-', 'gray', 60, 30); // ë‘¥ë‘¥
            }
        } else if (expId === 3) { // ì—°ì†Œ
             if (state === 'before') {
                 box.innerHTML = "CHâ‚„ì™€ Oâ‚‚ê°€ ì¶©ëŒ ì „ì…ë‹ˆë‹¤.";
             } else {
                 box.innerHTML = "ì›ì ë°°ì—´ì´ ë°”ë€Œë©° ì—ë„ˆì§€ê°€ ë¹›/ì—´ë¡œ ë°©ì¶œë©ë‹ˆë‹¤.";
             }
        }
    }

    function createAtom(container, text, color, x, y) {
        const d = document.createElement('div');
        d.className = 'atom';
        d.innerText = text;
        d.style.backgroundColor = color;
        d.style.left = x + "%";
        d.style.top = y + "%";
        if(text === 'AgCl') {
            d.style.width = '40px'; d.style.height = '40px'; d.style.borderRadius = '10px';
        }
        container.appendChild(d);
    }

    function resetExperiment() {
        step = 0;
        document.getElementById('liquid').style.height = "0";
        document.getElementById('solid').style.display = "none";
        document.getElementById('precipitate').style.height = "0";
        document.getElementById('glow').style.width = "0";
        document.getElementById('glow').style.height = "0";
        document.getElementById('result-log').innerText = "ëŒ€ê¸° ì¤‘...";
        document.getElementById('btnAddReactant').disabled = true;
        document.getElementById('btnAddReactant').innerText = "ë°˜ì‘ë¬¼ ë„£ê¸°";
        
        // ì˜¨ë„ ì´ˆê¸°í™”
        document.getElementById('mercury').style.height = "30%";
        document.getElementById('tempText').innerText = "20Â°C";
        
        // ë²„ë¸” ì œê±°
        const bubbles = document.querySelectorAll('.bubble');
        bubbles.forEach(b => b.remove());

        document.getElementById('quizArea').style.display = 'none';
        document.getElementById('particleBox').innerHTML = "ì‹¤í—˜ì„ ì„ íƒí•˜ì„¸ìš”.";
    }

    // í€´ì¦ˆ ë¡œì§
    const quizzes = {
        1: { q: "ì´ ì‹¤í—˜ì—ì„œ ë°œìƒí•œ ê¸°ì²´ëŠ” ë¬´ì—‡ì´ë©°, ì–´ë–¤ í˜„ìƒìœ¼ë¡œ ì•Œ ìˆ˜ ìˆë‚˜ìš”?", a: ["ì‚°ì†Œ - ë¶ˆê½ƒì´ ì»¤ì§", "ì´ì‚°í™”íƒ„ì†Œ - ê±°í’ˆ ë°œìƒ", "ìˆ˜ì†Œ - í‘ ì†Œë¦¬"], correct: 1 },
        2: { q: "í°ìƒ‰ ì•™ê¸ˆì´ ìƒì„±ëœ ì´ìœ ëŠ” ë¬´ì—‡ì…ë‹ˆê¹Œ?", a: ["ë¬¼ì§ˆì˜ ìƒíƒœë§Œ ë³€í•´ì„œ", "ì›ìê°€ ìƒˆë¡œ ìƒê²¨ë‚˜ì„œ", "ì´ì˜¨ì´ ë°˜ì‘í•˜ì—¬ ë¬¼ì— ë…¹ì§€ ì•ŠëŠ” ë¬¼ì§ˆì„ ë§Œë“¤ì–´ì„œ"], correct: 2 },
        3: { q: "ì—°ì†Œ ë°˜ì‘ ì‹œ ì—ë„ˆì§€ëŠ” ì–´ë–»ê²Œ ë³€í–ˆë‚˜ìš”?", a: ["ì—´ê³¼ ë¹› í˜•íƒœë¡œ ë°©ì¶œë¨", "ì—ë„ˆì§€ê°€ í¡ìˆ˜ë˜ì–´ ì°¨ê°€ì›Œì§", "ë³€í™” ì—†ìŒ"], correct: 0 }
    };

    function showQuiz(id) {
        const qData = quizzes[id];
        const section = document.getElementById('quizArea');
        section.style.display = 'block';
        document.getElementById('quizQuestion').innerText = "Q. " + qData.q;
        document.getElementById('quizFeedback').innerText = "";
        
        const optsDiv = document.getElementById('quizOptions');
        optsDiv.innerHTML = "";
        qData.a.forEach((ans, idx) => {
            const btn = document.createElement('button');
            btn.innerText = ans;
            btn.className = "btn";
            btn.onclick = () => checkAnswer(id, idx);
            optsDiv.appendChild(btn);
        });
        
        // ìŠ¤í¬ë¡¤ ì´ë™
        section.scrollIntoView({ behavior: 'smooth' });
    }

    function checkAnswer(expId, choiceIdx) {
        const correct = quizzes[expId].correct;
        const feedback = document.getElementById('quizFeedback');
        if (choiceIdx === correct) {
            feedback.style.color = "green";
            feedback.innerText = "âœ… ì •ë‹µì…ë‹ˆë‹¤! í™”í•™ ë°˜ì‘ì˜ íŠ¹ì§•ì„ ì˜ ê´€ì°°í–ˆêµ°ìš”.";
        } else {
            feedback.style.color = "red";
            feedback.innerText = "âŒ ë‹¤ì‹œ ìƒê°í•´ë³´ì„¸ìš”. ê´€ì°° ê²°ê³¼(ê±°í’ˆ, ì•™ê¸ˆ, ì—´)ë¥¼ ë‹¤ì‹œ í™•ì¸í•´ë³¼ê¹Œìš”?";
        }
    }
</script>

</body>
</html>