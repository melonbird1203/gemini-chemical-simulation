<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì „ê¸°ìŒì„±ë„ ê°€ìƒ ì‹¤í—˜ì‹¤</title>
    <style>
        :root {
            --primary: #4F46E5;
            --bg: #F3F4F6;
            --card: #ffffff;
            --text: #1F2937;
        }
        body { font-family: 'Pretendard', sans-serif; background: var(--bg); color: var(--text); margin: 0; padding: 20px; }
        .container { max-width: 1200px; margin: 0 auto; }
        
        /* Header */
        header { text-align: center; margin-bottom: 30px; }
        h1 { color: var(--primary); margin-bottom: 10px; }
        .mission { background: #E0E7FF; padding: 15px; border-radius: 10px; display: inline-block; }

        /* Main Layout */
        .lab-bench { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; }
        @media (max-width: 768px) { .lab-bench { grid-template-columns: 1fr; } }

        /* Periodic Table Area */
        .periodic-container { background: var(--card); padding: 20px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); overflow-x: auto; }
        .controls { margin-bottom: 20px; display: flex; gap: 10px; flex-wrap: wrap; }
        button { padding: 8px 16px; border: none; border-radius: 5px; cursor: pointer; transition: 0.2s; background: #e5e7eb; font-weight: bold;}
        button.active { background: var(--primary); color: white; }
        
        .periodic-table { 
            display: grid; 
            grid-template-columns: repeat(18, 1fr); 
            gap: 4px; 
            min-width: 800px;
        }
        
        .element {
            aspect-ratio: 1;
            border: 1px solid #ddd;
            border-radius: 4px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-end;
            font-size: 0.8rem;
            cursor: pointer;
            position: relative;
            background: white;
            transition: transform 0.2s;
        }
        .element:hover { transform: scale(1.1); z-index: 10; border-color: var(--primary); }
        .element.selected { border: 2px solid var(--primary); box-shadow: 0 0 10px rgba(79, 70, 229, 0.4); }
        .element .bar { width: 100%; position: absolute; bottom: 0; opacity: 0.6; transition: height 0.5s; }
        .element .symbol { font-weight: bold; font-size: 1rem; z-index: 2; margin-bottom: 2px;}
        .element .value { font-size: 0.7rem; z-index: 2; margin-bottom: 4px; }
        .empty { border: none; background: transparent; pointer-events: none; }

        /* Analysis Panel */
        .analysis-panel { display: flex; flex-direction: column; gap: 20px; }
        .card { background: var(--card); padding: 20px; border-radius: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        
        .comparison-zone { text-align: center; }
        .atom-pair { display: flex; justify-content: center; gap: 20px; margin: 20px 0; align-items: center; }
        .atom-circle { width: 60px; height: 60px; border-radius: 50%; background: #eee; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 1.2rem; border: 2px solid #ccc; }
        .bond-result { font-weight: bold; padding: 10px; border-radius: 8px; margin-top: 10px; }
        
        .quiz-section h3 { margin-top: 0; }
        .quiz-option { display: block; width: 100%; text-align: left; margin: 5px 0; background: white; border: 1px solid #ddd; padding: 10px; }
        .quiz-option:hover { background: #f9fafb; }
        .feedback { margin-top: 10px; font-weight: bold; font-size: 0.9rem; }
        .correct { color: green; }
        .wrong { color: red; }

        /* Legends */
        .legend { display: flex; align-items: center; gap: 5px; font-size: 0.8rem; margin-top: 10px; }
        .color-box { width: 15px; height: 15px; }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>ğŸ§ª ì „ê¸°ìŒì„±ë„ íƒêµ¬ ì‹¤í—˜ì‹¤</h1>
        <div class="mission">
            <strong>ì˜¤ëŠ˜ì˜ ë¯¸ì…˜:</strong> ì£¼ê¸°ìœ¨í‘œì˜ ê²½í–¥ì„±ì„ íŒŒì•…í•˜ê³ , ë‘ ì›ì†Œ ì‚¬ì´ì˜ ê²°í•© ì¢…ë¥˜ë¥¼ ì˜ˆì¸¡í•´ë³´ì„¸ìš”.
        </div>
    </header>

    <div class="lab-bench">
        <div class="periodic-container">
            <div class="controls">
                <button onclick="setMode('all')" class="active" id="btn-all">ì „ì²´ ë³´ê¸°</button>
                <button onclick="setMode('period2')" id="btn-period2">2ì£¼ê¸° ê²½í–¥ (â†’)</button>
                <button onclick="setMode('period3')" id="btn-period3">3ì£¼ê¸° ê²½í–¥ (â†’)</button>
                <button onclick="setMode('group17')" id="btn-group17">17ì¡± ê²½í–¥ (â†“)</button>
                <button onclick="resetSelection()">ì„ íƒ ì´ˆê¸°í™”</button>
            </div>
            <div id="periodic-table" class="periodic-table">
                </div>
            <div class="legend">
                <span>ì „ê¸°ìŒì„±ë„: </span>
                <div class="color-box" style="background: #a5f3fc"></div> ë‚®ìŒ (ê¸ˆì†)
                <div class="color-box" style="background: #fbbf24; margin-left: 10px;"></div> ë†’ìŒ (ë¹„ê¸ˆì†)
                <span style="margin-left: auto;">* ë§‰ëŒ€ì˜ ë†’ì´ëŠ” ì „ê¸°ìŒì„±ë„ì˜ í¬ê¸°ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.</span>
            </div>
        </div>

        <div class="analysis-panel">
            <div class="card comparison-zone">
                <h3>âš–ï¸ ê²°í•© ê·¹ì„± ì˜ˆì¸¡ê¸°</h3>
                <p style="font-size: 0.9rem; color: #666;">ì›ì†Œ 2ê°œë¥¼ í´ë¦­í•˜ì—¬ ì„ íƒí•˜ì„¸ìš”.</p>
                <div class="atom-pair">
                    <div id="atom1" class="atom-circle">?</div>
                    <div style="font-size: 1.5rem;">âˆ’</div>
                    <div id="atom2" class="atom-circle">?</div>
                </div>
                <div id="calc-result" style="margin-bottom: 10px;">ì°¨ì´(Î”EN): -</div>
                <div id="bond-prediction" class="bond-result" style="background: #f3f4f6;">ê²°í•© ì¢…ë¥˜ ëŒ€ê¸° ì¤‘...</div>
            </div>

            <div class="card quiz-section">
                <h3>ğŸ§  ê°œë… í™•ì¸ í€´ì¦ˆ</h3>
                <p id="quiz-q">ê°™ì€ ì£¼ê¸°ì—ì„œ ì›ì ë²ˆí˜¸ê°€ ì¦ê°€í• ìˆ˜ë¡ ì „ê¸°ìŒì„±ë„ëŠ”?</p>
                <button class="quiz-option" onclick="checkQuiz(0)">1. ì‘ì•„ì§„ë‹¤ (í•µì „í•˜ ê°ì†Œ)</button>
                <button class="quiz-option" onclick="checkQuiz(1)">2. ì»¤ì§„ë‹¤ (ìœ íš¨ í•µì „í•˜ ì¦ê°€)</button>
                <button class="quiz-option" onclick="checkQuiz(2)">3. ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤</button>
                <div id="quiz-feedback" class="feedback"></div>
                <button onclick="nextQuiz()" style="margin-top:10px; display:none;" id="next-quiz-btn">ë‹¤ìŒ ë¬¸ì œ</button>
            </div>
        </div>
    </div>
</div>

<script>
    // Simplified Data (Focusing on Representative Elements for educational clarity)
    const elements = [
        { no: 1, sym: 'H', name: 'ìˆ˜ì†Œ', en: 2.1, per: 1, grp: 1 },
        { no: 2, sym: 'He', name: 'í—¬ë¥¨', en: 0, per: 1, grp: 18 }, // Noble gas usually 0/undefined
        { no: 3, sym: 'Li', name: 'ë¦¬íŠ¬', en: 1.0, per: 2, grp: 1 },
        { no: 4, sym: 'Be', name: 'ë² ë¦´ë¥¨', en: 1.5, per: 2, grp: 2 },
        { no: 5, sym: 'B', name: 'ë¶•ì†Œ', en: 2.0, per: 2, grp: 13 },
        { no: 6, sym: 'C', name: 'íƒ„ì†Œ', en: 2.5, per: 2, grp: 14 },
        { no: 7, sym: 'N', name: 'ì§ˆì†Œ', en: 3.0, per: 2, grp: 15 },
        { no: 8, sym: 'O', name: 'ì‚°ì†Œ', en: 3.5, per: 2, grp: 16 },
        { no: 9, sym: 'F', name: 'í”Œë£¨ì˜¤ë¦°', en: 4.0, per: 2, grp: 17 },
        { no: 10, sym: 'Ne', name: 'ë„¤ì˜¨', en: 0, per: 2, grp: 18 },
        { no: 11, sym: 'Na', name: 'ë‚˜íŠ¸ë¥¨', en: 0.9, per: 3, grp: 1 },
        { no: 12, sym: 'Mg', name: 'ë§ˆê·¸ë„¤ìŠ˜', en: 1.2, per: 3, grp: 2 },
        { no: 13, sym: 'Al', name: 'ì•Œë£¨ë¯¸ëŠ„', en: 1.5, per: 3, grp: 13 },
        { no: 14, sym: 'Si', name: 'ê·œì†Œ', en: 1.8, per: 3, grp: 14 },
        { no: 15, sym: 'P', name: 'ì¸', en: 2.1, per: 3, grp: 15 },
        { no: 16, sym: 'S', name: 'í™©', en: 2.5, per: 3, grp: 16 },
        { no: 17, sym: 'Cl', name: 'ì—¼ì†Œ', en: 3.0, per: 3, grp: 17 },
        { no: 18, sym: 'Ar', name: 'ì•„ë¥´ê³¤', en: 0, per: 3, grp: 18 },
        { no: 19, sym: 'K', name: 'ì¹¼ë¥¨', en: 0.8, per: 4, grp: 1 },
        { no: 20, sym: 'Ca', name: 'ì¹¼ìŠ˜', en: 1.0, per: 4, grp: 2 }
    ];

    let selectedAtoms = [];
    const tableDiv = document.getElementById('periodic-table');

    function renderTable(filterFn = () => true) {
        tableDiv.innerHTML = '';
        
        // Grid setup for 1-18 groups, mapping simplistic row/col
        // Using a flat render for relevant elements for simplicity in this demo logic
        // But to make it look like a table, we iterate 1-18 groups for rows 1-4
        
        const gridMap = [];
        for(let r=1; r<=4; r++) {
            for(let c=1; c<=18; c++) {
                const el = elements.find(e => e.per === r && e.grp === c);
                if(el) gridMap.push({ type: 'el', data: el });
                else gridMap.push({ type: 'empty' });
            }
        }

        gridMap.forEach(cell => {
            const div = document.createElement('div');
            if(cell.type === 'empty') {
                div.className = 'empty';
            } else {
                const el = cell.data;
                div.className = 'element';
                if (!filterFn(el)) div.style.opacity = '0.2';
                
                // Color calculation (Yellow high, Blue low)
                const hue = el.en > 0 ? 200 - (el.en * 40) : 0; // Simple scale
                const color = el.en === 0 ? '#eee' : `hsl(${hue}, 80%, 60%)`;
                const height = (el.en / 4.0) * 100;

                div.style.borderColor = color;
                div.innerHTML = `
                    <div class="bar" style="height: ${height}%; background: ${color}"></div>
                    <span class="symbol">${el.sym}</span>
                    <span class="value">${el.en > 0 ? el.en : '-'}</span>
                `;
                div.onclick = () => selectAtom(el, div);
            }
            tableDiv.appendChild(div);
        });
    }

    function selectAtom(el, div) {
        if(el.en === 0) {
            alert("18ì¡± ë¹„í™œì„± ê¸°ì²´ëŠ” í™”í•™ ê²°í•©ì„ ê±°ì˜ í˜•ì„±í•˜ì§€ ì•Šì•„ ì „ê¸°ìŒì„±ë„ë¥¼ ì¼ë°˜ì ìœ¼ë¡œ ì •ì˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.");
            return;
        }

        // Manage selection
        if(selectedAtoms.length >= 2) {
            selectedAtoms = []; // Reset if full
            document.querySelectorAll('.element').forEach(e => e.classList.remove('selected'));
        }

        selectedAtoms.push(el);
        div.classList.add('selected');
        updateComparison();
    }

    function resetSelection() {
        selectedAtoms = [];
        document.querySelectorAll('.element').forEach(e => e.classList.remove('selected'));
        updateComparison();
    }

    function updateComparison() {
        const a1Div = document.getElementById('atom1');
        const a2Div = document.getElementById('atom2');
        const resDiv = document.getElementById('bond-prediction');
        const valDiv = document.getElementById('calc-result');

        if(selectedAtoms.length === 0) {
            a1Div.textContent = '?'; a1Div.style.background = '#eee';
            a2Div.textContent = '?'; a2Div.style.background = '#eee';
            resDiv.textContent = "ê²°í•© ì¢…ë¥˜ ëŒ€ê¸° ì¤‘...";
            resDiv.style.background = "#f3f4f6";
            valDiv.textContent = "ì°¨ì´(Î”EN): -";
            return;
        }

        if(selectedAtoms[0]) {
            a1Div.textContent = selectedAtoms[0].sym;
            // Color mapping logic again for consistency
            const hue = 200 - (selectedAtoms[0].en * 40);
            a1Div.style.background = `hsl(${hue}, 80%, 80%)`;
        }
        
        if(selectedAtoms[1]) {
            a2Div.textContent = selectedAtoms[1].sym;
            const hue = 200 - (selectedAtoms[1].en * 40);
            a2Div.style.background = `hsl(${hue}, 80%, 80%)`;

            // Calculation
            const diff = Math.abs(selectedAtoms[0].en - selectedAtoms[1].en).toFixed(1);
            valDiv.innerHTML = `ì°¨ì´(Î”EN): <strong>${diff}</strong>`;

            // Logic for bond type
            let type = "";
            let color = "";
            let desc = "";

            if(diff <= 0.4) {
                type = "ë¬´ê·¹ì„± ê³µìœ  ê²°í•©";
                color = "#d1fae5"; // green light
                desc = "ì „ììŒì„ ê³µí‰í•˜ê²Œ ê³µìœ í•©ë‹ˆë‹¤.";
            } else if (diff < 1.7) {
                type = "ê·¹ì„± ê³µìœ  ê²°í•©";
                color = "#fef3c7"; // yellow light
                desc = "ì „ìê°€ ì „ê¸°ìŒì„±ë„ê°€ í° ìª½ìœ¼ë¡œ ì¹˜ìš°ì¹©ë‹ˆë‹¤.";
            } else {
                type = "ì´ì˜¨ ê²°í•© ì„± ìœ ë ¥";
                color = "#fee2e2"; // red light
                desc = "ì „ìê°€ ê±°ì˜ ì´ë™í•˜ì—¬ ì´ì˜¨ì´ í˜•ì„±ë©ë‹ˆë‹¤.";
            }
            
            resDiv.innerHTML = `${type}<br><span style='font-size:0.8rem; font-weight:normal'>${desc}</span>`;
            resDiv.style.background = color;
        }
    }

    // Filter Logic
    function setMode(mode) {
        document.querySelectorAll('.controls button').forEach(b => b.classList.remove('active'));
        document.getElementById(`btn-${mode}`).classList.add('active');

        if(mode === 'all') renderTable(() => true);
        if(mode === 'period2') renderTable(e => e.per === 2);
        if(mode === 'period3') renderTable(e => e.per === 3);
        if(mode === 'group17') renderTable(e => e.grp === 17);
    }

    // Quiz Logic
    const quizzes = [
        { q: "2ì£¼ê¸° ì›ì†Œ(Li ~ F)ì—ì„œ ì›ì ë²ˆí˜¸ê°€ ì¦ê°€í• ìˆ˜ë¡ ì „ê¸°ìŒì„±ë„ëŠ” ì–´ë–»ê²Œ ë³€í•˜ë‚˜ìš”?", a: 1, fb: "ì •ë‹µ! ìœ íš¨ í•µì „í•˜ê°€ ì¦ê°€í•˜ë©´ì„œ ì „ìë¥¼ ë” ê°•í•˜ê²Œ ëŒì–´ë‹¹ê¹ë‹ˆë‹¤." },
        { q: "ë‹¤ìŒ ì¤‘ ì „ê¸°ìŒì„±ë„ê°€ ê°€ì¥ í° ì›ì†ŒëŠ” ë¬´ì—‡ì¸ê°€ìš”?", a: 0, options: ["í”Œë£¨ì˜¤ë¦°(F)", "ì‚°ì†Œ(O)", "ë‚˜íŠ¸ë¥¨(Na)"], fb: "ì •ë‹µ! í”Œë£¨ì˜¤ë¦°ì€ ì „ê¸°ìŒì„±ë„ 4.0ìœ¼ë¡œ ëª¨ë“  ì›ì†Œ ì¤‘ ê°€ì¥ í½ë‹ˆë‹¤." },
        { q: "ì „ê¸°ìŒì„±ë„ ì°¨ì´ê°€ ë§¤ìš° í°(1.7 ì´ìƒ) ê¸ˆì†ê³¼ ë¹„ê¸ˆì†ì´ ë§Œë‚˜ë©´ ì–´ë–¤ ê²°í•©ì„ í˜•ì„±í•˜ë‚˜ìš”?", a: 2, options: ["ë¬´ê·¹ì„± ê³µìœ ê²°í•©", "ê·¹ì„± ê³µìœ ê²°í•©", "ì´ì˜¨ ê²°í•©"], fb: "ì •ë‹µ! ì „ìê°€ ì™„ì „íˆ ì´ë™í•˜ì—¬ ì´ì˜¨ ê²°í•©ì„ ì£¼ë¡œ í˜•ì„±í•©ë‹ˆë‹¤." }
    ];
    let currentQuiz = 0;

    function loadQuiz() {
        const qData = quizzes[currentQuiz];
        document.getElementById('quiz-q').textContent = `Q${currentQuiz+1}. ${qData.q}`;
        const options = qData.options || ["1. ì‘ì•„ì§„ë‹¤", "2. ì»¤ì§„ë‹¤", "3. ë³€í•˜ì§€ ì•ŠëŠ”ë‹¤"];
        const buttons = document.querySelectorAll('.quiz-option');
        buttons.forEach((btn, i) => {
            btn.textContent = options[i];
            btn.onclick = () => checkQuiz(i);
            btn.disabled = false;
        });
        document.getElementById('quiz-feedback').textContent = "";
        document.getElementById('next-quiz-btn').style.display = 'none';
    }

    function checkQuiz(idx) {
        const fbDiv = document.getElementById('quiz-feedback');
        if(idx === quizzes[currentQuiz].a) {
            fbDiv.textContent = "â­• " + quizzes[currentQuiz].fb;
            fbDiv.className = "feedback correct";
            document.getElementById('next-quiz-btn').style.display = 'inline-block';
        } else {
            fbDiv.textContent = "âŒ ë‹¤ì‹œ ìƒê°í•´ë³´ì„¸ìš”. ì£¼ê¸°ìœ¨í‘œì˜ ê²½í–¥ì„±ì„ ë– ì˜¬ë ¤ë³´ì„¸ìš”.";
            fbDiv.className = "feedback wrong";
        }
    }

    function nextQuiz() {
        currentQuiz = (currentQuiz + 1) % quizzes.length;
        loadQuiz();
    }

    // Init
    renderTable();
    loadQuiz(); // Override first load with proper data
</script>

</body>
</html>