<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°€ìƒ ì‹¤í—˜ì‹¤: ë¶„ìì˜ ê·¹ì„± í™•ì¸</title>
    <style>
        :root {
            --primary: #4A90E2;
            --success: #2ECC71;
            --warning: #F1C40F;
            --danger: #E74C3C;
            --dark: #34495E;
            --light: #ECF0F1;
        }
        body {
            font-family: 'Malgun Gothic', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f5f7fa;
            color: #333;
        }
        header {
            background-color: var(--dark);
            color: white;
            padding: 1rem 2rem;
            text-align: center;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 20px;
        }
        /* ì‹¤í—˜ ì˜ì—­ */
        .lab-bench {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 20px;
            position: relative;
            min-height: 500px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        canvas {
            border: 1px solid #ddd;
            border-radius: 4px;
            background: #fff;
        }
        /* ì»¨íŠ¸ë¡¤ íŒ¨ë„ */
        .controls {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            padding: 20px;
        }
        .control-group {
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
        }
        h3 { margin-top: 0; color: var(--dark); }
        label { display: block; margin-bottom: 8px; font-weight: bold; }
        
        button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin-right: 5px;
            transition: background 0.3s;
        }
        button:hover { background-color: #357ABD; }
        button.reset { background-color: var(--danger); }
        
        select, input[type="range"] {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border-radius: 4px;
            border: 1px solid #ddd;
        }

        /* íƒ­ ë©”ë‰´ */
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            width: 100%;
            justify-content: center;
        }
        .tab-btn {
            background: var(--light);
            color: var(--dark);
            flex: 1;
        }
        .tab-btn.active {
            background: var(--primary);
            color: white;
        }

        /* í”¼ë“œë°± ë°•ìŠ¤ */
        .feedback-box {
            margin-top: 15px;
            padding: 15px;
            background-color: #e8f4fd;
            border-left: 5px solid var(--primary);
            border-radius: 4px;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        /* í€´ì¦ˆ ì˜ì—­ */
        .quiz-area {
            display: none;
            padding: 20px;
        }
        .quiz-area.active { display: block; }
    </style>
</head>
<body>

<header>
    <h1>ğŸ§ª ê°€ìƒ ì‹¤í—˜ì‹¤: ë¶„ìì˜ ê·¹ì„±</h1>
    <p>ì¤‘Â·ê³ ë“±í•™êµ í™”í•™â…  [12í™”í•™â… 03-07]</p>
</header>

<div class="container">
    <div class="lab-bench">
        <div class="tabs">
            <button class="tab-btn active" onclick="setMode('stream')">ì‹¤í—˜ 1: ì•¡ì²´ ì¤„ê¸° íœ˜ì–´ì§</button>
            <button class="tab-btn" onclick="setMode('particle')">ì‹¤í—˜ 2: ì…ì ë‹ë³´ê¸°</button>
        </div>
        
        <canvas id="experimentCanvas" width="600" height="400"></canvas>
        
        <div id="feedback" class="feedback-box">
            ì‹¤í—˜ ì¤€ë¹„ ì™„ë£Œ! ì˜¤ë¥¸ìª½ íŒ¨ë„ì—ì„œ ìš©ì•¡ì„ ì„ íƒí•˜ê³  ìˆ˜ë„ê¼­ì§€ë¥¼ í‹€ì–´ë³´ì„¸ìš”.
        </div>
    </div>

    <div class="controls">
        <h3>ğŸ”¬ ì‹¤í—˜ ì¡°ê±´ ì„¤ì •</h3>
        
        <div class="control-group">
            <label>1. ìš©ì•¡ ì„ íƒ</label>
            <select id="liquidSelect" onchange="updateExperiment()">
                <option value="water">ë¬¼ (Hâ‚‚O) - ê·¹ì„±</option>
                <option value="hexane">í—¥ì„¸ì¸ (Câ‚†Hâ‚â‚„) - ë¬´ê·¹ì„±</option>
            </select>
        </div>

        <div class="control-group" id="streamControls">
            <label>2. ëŒ€ì „ì²´ ê°€ì ¸ì˜¤ê¸°</label>
            <div style="display: flex; gap: 5px; margin-bottom: 10px;">
                <button onclick="setCharge(0)">ì—†ìŒ</button>
                <button onclick="setCharge(1)">âŠ• ëŒ€ì „ì²´</button>
                <button onclick="setCharge(-1)">âŠ– ëŒ€ì „ì²´</button>
            </div>
            <label>3. ë·°ë › ì¡°ì‘</label>
            <button id="toggleFlowBtn" onclick="toggleFlow()">ìˆ˜ë„ê¼­ì§€ ì—´ê¸°</button>
        </div>

        <div class="control-group" id="particleControls" style="display: none;">
            <label>ì „ê¸°ì¥ ì„¸ê¸°</label>
            <input type="range" id="fieldStrength" min="0" max="100" value="0" oninput="updateParticles()">
            <p style="font-size: 0.8rem; color: #666;">ìŠ¬ë¼ì´ë”ë¥¼ ì›€ì§ì—¬ ì „ê¸°ì¥ì„ ê±¸ì–´ì£¼ì„¸ìš”.</p>
        </div>

        <div class="control-group">
            <button class="reset" onclick="resetExperiment()">ì‹¤í—˜ ì´ˆê¸°í™”</button>
        </div>

        <div class="control-group">
            <h4>ğŸ’¡ í•µì‹¬ ê°œë…</h4>
            <ul style="font-size: 0.85rem; padding-left: 20px;">
                <li><strong>ê·¹ì„± ë¶„ì:</strong> ì „í•˜ê°€ ê³ ë¥´ê²Œ ë¶„í¬í•˜ì§€ ì•Šì•„ ë¶€ë¶„ì ì¸ ì „í•˜ë¥¼ ë±ë‹ˆë‹¤.</li>
                <li><strong>ë¬´ê·¹ì„± ë¶„ì:</strong> ì „í•˜ê°€ ê· ì¼í•˜ê²Œ ë¶„í¬í•©ë‹ˆë‹¤.</li>
            </ul>
        </div>
    </div>
</div>

<script>
    const canvas = document.getElementById('experimentCanvas');
    const ctx = canvas.getContext('2d');
    const feedback = document.getElementById('feedback');
    
    let mode = 'stream'; // 'stream' or 'particle'
    let liquid = 'water'; // 'water' or 'hexane'
    let isFlowing = false;
    let chargeType = 0; // 0: none, 1: positive, -1: negative
    let particles = [];
    let animationId;

    // ì´ˆê¸°í™”
    function init() {
        createParticles();
        animate();
    }

    function resetExperiment() {
        isFlowing = false;
        chargeType = 0;
        document.getElementById('toggleFlowBtn').innerText = "ìˆ˜ë„ê¼­ì§€ ì—´ê¸°";
        document.getElementById('fieldStrength').value = 0;
        updateExperiment();
    }

    function setMode(newMode) {
        mode = newMode;
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');
        
        if(mode === 'stream') {
            document.getElementById('streamControls').style.display = 'block';
            document.getElementById('particleControls').style.display = 'none';
            feedback.innerHTML = "ì‹¤í—˜ 1: ë·°ë ›ì—ì„œ ì•¡ì²´ë¥¼ í˜ë ¤ë³´ë‚´ê³  ëŒ€ì „ì²´ë¥¼ ê°€ê¹Œì´ ê°€ì ¸ê°€ ë³´ì„¸ìš”.";
        } else {
            document.getElementById('streamControls').style.display = 'none';
            document.getElementById('particleControls').style.display = 'block';
            feedback.innerHTML = "ì‹¤í—˜ 2: ì „ê¸°ì¥ì„ ê±¸ì—ˆì„ ë•Œ ë¶„ìë“¤ì˜ ë°°ì—´ì´ ì–´ë–»ê²Œ ë³€í•˜ëŠ”ì§€ ê´€ì°°í•´ ë³´ì„¸ìš”.";
        }
        updateExperiment();
    }

    function updateExperiment() {
        liquid = document.getElementById('liquidSelect').value;
        createParticles();
    }

    function setCharge(type) {
        chargeType = type;
        if(isFlowing) checkResult();
    }

    function toggleFlow() {
        isFlowing = !isFlowing;
        const btn = document.getElementById('toggleFlowBtn');
        btn.innerText = isFlowing ? "ìˆ˜ë„ê¼­ì§€ ì ê·¸ê¸°" : "ìˆ˜ë„ê¼­ì§€ ì—´ê¸°";
        if(isFlowing) checkResult();
    }

    function checkResult() {
        if (!isFlowing) return;

        if (liquid === 'water') {
            if (chargeType !== 0) {
                feedback.innerHTML = "<strong>ê´€ì°° ê²°ê³¼:</strong> ë¬¼ì¤„ê¸°ê°€ ëŒ€ì „ì²´ ìª½ìœ¼ë¡œ íœ˜ì–´ì§‘ë‹ˆë‹¤!<br>â†’ ë¬¼ ë¶„ìëŠ” ê·¹ì„±ì„ ë ë¯€ë¡œ ì „ê¸°ì  ì¸ë ¥ì„ ë°›ìŠµë‹ˆë‹¤.";
            } else {
                feedback.innerHTML = "ë¬¼ì¤„ê¸°ê°€ ë˜‘ë°”ë¡œ ë–¨ì–´ì§‘ë‹ˆë‹¤. ëŒ€ì „ì²´ë¥¼ ê°€ê¹Œì´ ê°€ì ¸ê°€ ë³´ì„¸ìš”.";
            }
        } else {
            if (chargeType !== 0) {
                feedback.innerHTML = "<strong>ê´€ì°° ê²°ê³¼:</strong> í—¥ì„¸ì¸ ì¤„ê¸°ëŠ” ê±°ì˜ íœ˜ì–´ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤.<br>â†’ í—¥ì„¸ì¸ì€ ë¬´ê·¹ì„± ë¶„ìì´ë¯€ë¡œ ì „ê¸°ì¥ì˜ ì˜í–¥ì„ ê±°ì˜ ë°›ì§€ ì•ŠìŠµë‹ˆë‹¤.";
            } else {
                feedback.innerHTML = "í—¥ì„¸ì¸ì´ íë¥´ê³  ìˆìŠµë‹ˆë‹¤.";
            }
        }
    }

    // ì…ì ìƒì„±
    function createParticles() {
        particles = [];
        const numParticles = 40;
        for(let i=0; i<numParticles; i++) {
            particles.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                angle: Math.random() * Math.PI * 2,
                speed: 0.5 + Math.random()
            });
        }
    }

    function updateParticles() {
        // ìŠ¬ë¼ì´ë” ì¡°ì‘ ì‹œ í˜¸ì¶œ
        const strength = document.getElementById('fieldStrength').value;
        if (strength > 20) {
            if (liquid === 'water') {
                feedback.innerHTML = "ì „ê¸°ì¥ì´ ê°•í•´ì§€ì ë¬¼ ë¶„ìë“¤ì´ <strong>ì¼ì •í•œ ë°©í–¥ìœ¼ë¡œ ì •ë ¬</strong>í•©ë‹ˆë‹¤. (Î´+ ë¶€ë¶„ì€ -, Î´- ë¶€ë¶„ì€ + ìª½ìœ¼ë¡œ)";
            } else {
                feedback.innerHTML = "í—¥ì„¸ì¸ì€ ë¬´ê·¹ì„±ì´ë¯€ë¡œ ì „ê¸°ì¥ì´ ê°•í•´ì ¸ë„ <strong>ë°°ì—´ì— í° ë³€í™”ê°€ ì—†ìŠµë‹ˆë‹¤.</strong>";
            }
        }
    }

    // ê·¸ë¦¬ê¸° ë£¨í”„
    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        if (mode === 'stream') {
            drawLabSetup();
        } else {
            drawMicroView();
        }

        animationId = requestAnimationFrame(animate);
    }

    // --- ì‹¤í—˜ 1: ë·°ë ›ê³¼ ë¬¼ì¤„ê¸° ê·¸ë¦¬ê¸° ---
    function drawLabSetup() {
        // ë·°ë ›
        ctx.fillStyle = '#ddd';
        ctx.fillRect(280, 0, 40, 100); // ëª¸í†µ
        ctx.fillStyle = '#bbb';
        ctx.beginPath();
        ctx.moveTo(280, 100);
        ctx.lineTo(320, 100);
        ctx.lineTo(300, 150); // íŒ
        ctx.fill();

        // ëŒ€ì „ì²´ (ë§‰ëŒ€)
        if (chargeType !== 0) {
            ctx.fillStyle = chargeType === 1 ? '#FF6B6B' : '#4A90E2'; // ë¹¨ê°•(+) / íŒŒë‘(-)
            ctx.fillRect(400, 200, 20, 150);
            
            // ì „í•˜ í‘œì‹œ
            ctx.fillStyle = 'white';
            ctx.font = '20px Arial';
            let symbol = chargeType === 1 ? '+' : '-';
            for(let i=0; i<5; i++) {
                ctx.fillText(symbol, 403, 220 + i*30);
            }
        }

        // ì•¡ì²´ íë¦„
        if (isFlowing) {
            ctx.strokeStyle = liquid === 'water' ? 'rgba(74, 144, 226, 0.6)' : 'rgba(200, 200, 200, 0.6)';
            ctx.lineWidth = 6;
            ctx.beginPath();
            ctx.moveTo(300, 150);

            if (liquid === 'water' && chargeType !== 0) {
                // íœ˜ì–´ì§ (ë² ì§€ì–´ ê³¡ì„ ) - í•­ìƒ ëŒ€ì „ì²´ ìª½ìœ¼ë¡œ ëŒë¦¼
                // ê·¹ì„± ë¶„ìëŠ” +ëŒ€ì „ì²´ë“  -ëŒ€ì „ì²´ë“  ì¸ë ¥ì„ ë°›ìŒ (ìœ ë„ ìŒê·¹ì/ë°°í–¥)
                ctx.quadraticCurveTo(380, 250, 380, 400); 
            } else {
                // ì§ì„ 
                ctx.lineTo(300, 400);
            }
            ctx.stroke();
        }
    }

    // --- ì‹¤í—˜ 2: ì…ì ë·° ê·¸ë¦¬ê¸° ---
    function drawMicroView() {
        const fieldStrength = document.getElementById('fieldStrength').value;
        const isPolar = liquid === 'water';

        // ì „ê¸°ì¥ í™”ì‚´í‘œ ë°°ê²½
        if (fieldStrength > 0) {
            ctx.fillStyle = `rgba(200, 200, 200, ${fieldStrength/200})`;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#666';
            ctx.font = '20px Arial';
            ctx.fillText(fieldStrength > 0 ? "+ (ì „ê¸°ì¥)" : "", 20, 30);
            ctx.fillText(fieldStrength > 0 ? "- (ì „ê¸°ì¥)" : "", canvas.width - 100, 30);
        }

        particles.forEach(p => {
            ctx.save();
            ctx.translate(p.x, p.y);

            // íšŒì „ ë¡œì§
            let targetAngle = p.angle;
            if (isPolar && fieldStrength > 10) {
                // ì „ê¸°ì¥ì´ ìˆìœ¼ë©´ 0ë„(ìˆ˜í‰)ë¡œ ì •ë ¬í•˜ë ¤ëŠ” í˜
                // ë¬¼ ë¶„ì: ì‚°ì†Œ(-)ê°€ +ìª½ìœ¼ë¡œ, ìˆ˜ì†Œ(+)ê°€ -ìª½ìœ¼ë¡œ.
                // ì—¬ê¸°ì„œëŠ” ë‹¨ìˆœíˆ ìˆ˜í‰ ì •ë ¬ë¡œ ì‹œê°í™”
                targetAngle = 0; 
                // ì„œì„œíˆ íšŒì „ (ë³´ê°„)
                p.angle += (targetAngle - p.angle) * 0.1;
            } else {
                // ë¬´ê·¹ì„±ì´ê±°ë‚˜ ì „ê¸°ì¥ ì—†ìœ¼ë©´ ëœë¤ íšŒì „
                p.angle += 0.02;
            }

            ctx.rotate(p.angle);

            // ë¶„ì ê·¸ë¦¬ê¸° (ë‹¨ìˆœí™”ëœ íƒ€ì›)
            if (isPolar) {
                // ë¬¼ ë¶„ì (êµ½ì€í˜•)
                ctx.fillStyle = '#E74C3C'; // ì‚°ì†Œ
                ctx.beginPath(); ctx.arc(0, 0, 10, 0, Math.PI*2); ctx.fill();
                ctx.fillStyle = '#ECF0F1'; // ìˆ˜ì†Œ
                ctx.beginPath(); ctx.arc(10, 5, 6, 0, Math.PI*2); ctx.fill();
                ctx.beginPath(); ctx.arc(10, -5, 6, 0, Math.PI*2); ctx.fill();
                
                // ìŒê·¹ì ëª¨ë©˜íŠ¸ í‘œì‹œ (ì‘ì€ í™”ì‚´í‘œ)
                if(document.getElementById('fieldStrength').value > 50) {
                    ctx.strokeStyle = 'yellow';
                    ctx.lineWidth = 2;
                    ctx.beginPath(); ctx.moveTo(-5,0); ctx.lineTo(15,0); ctx.stroke();
                }
            } else {
                // í—¥ì„¸ì¸ (ë¬´ê·¹ì„±, ê¸´ ì‚¬ìŠ¬ ëŒ€ìš© íƒ€ì›)
                ctx.fillStyle = '#95A5A6';
                ctx.beginPath();
                ctx.ellipse(0, 0, 15, 8, 0, 0, Math.PI * 2);
                ctx.fill();
            }

            ctx.restore();
            
            // ì•½ê°„ì˜ ë¸Œë¼ìš´ ìš´ë™
            p.x += (Math.random() - 0.5);
            p.y += (Math.random() - 0.5);
        });
    }

    init();
</script>

</body>
</html>