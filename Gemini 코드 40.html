<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°€ìƒ ì‹¤í—˜: í™©ì‚° êµ¬ë¦¬ ê²°ì • ë§Œë“¤ê¸°</title>
    <style>
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #f5f6fa;
            --accent-color: #2ecc71;
            --text-color: #2c3e50;
        }
        body {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #ecf0f1;
            color: var(--text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        header {
            background-color: var(--primary-color);
            color: white;
            width: 100%;
            padding: 1rem 0;
            text-align: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        header h1 { margin: 0; font-size: 1.5rem; }
        header p { margin: 5px 0 0; font-size: 0.9rem; opacity: 0.9; }

        .container {
            max-width: 900px;
            width: 95%;
            margin: 20px auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* ì»¨íŠ¸ë¡¤ íŒ¨ë„ */
        .controls {
            padding: 20px;
            background-color: var(--secondary-color);
            border-bottom: 1px solid #ddd;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: space-around;
            align-items: center;
        }
        .control-group {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .control-group label {
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        input[type="range"] { width: 150px; }
        select { padding: 5px; border-radius: 5px; }
        
        button.action-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 1rem;
            transition: transform 0.2s;
        }
        button.action-btn:hover { transform: scale(1.05); background-color: #357abd; }
        button.reset-btn { background-color: #e74c3c; }

        /* ì‹œë®¬ë ˆì´ì…˜ ì˜ì—­ */
        .simulation-area {
            position: relative;
            height: 400px;
            background: linear-gradient(to bottom, #ffffff, #e0f7fa);
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        /* ë¹„ì»¤ */
        .beaker {
            width: 200px;
            height: 250px;
            border: 4px solid #aaa;
            border-top: none;
            border-radius: 0 0 20px 20px;
            position: relative;
            background-color: rgba(255, 255, 255, 0.5);
            overflow: hidden;
        }
        .liquid {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 80%;
            background-color: rgba(0, 100, 255, 0.2); /* ì´ˆê¸° ë†ë„ ìƒ‰ìƒ */
            transition: background-color 1s;
        }
        .crystals-container {
            position: absolute;
            bottom: 10px;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        
        /* ê²°ì • ìŠ¤íƒ€ì¼ (JSë¡œ ìƒì„±) */
        .crystal {
            position: absolute;
            background-color: rgba(0, 50, 180, 0.8);
            border: 1px solid rgba(255,255,255,0.3);
            transform: rotate(45deg); /* ë§ˆë¦„ëª¨ ê¼´ */
            box-shadow: 1px 1px 2px rgba(0,0,0,0.2);
            transition: width 0.5s, height 0.5s, bottom 2s ease-in;
            bottom: -50px; /* ìƒì„± ì „ */
        }

        /* ì •ë³´ íŒ¨ë„ */
        .info-panel {
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            border-top: 1px solid #ddd;
        }
        .panel-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 5px solid var(--primary-color);
        }
        .panel-card h3 { margin-top: 0; color: var(--primary-color); }
        .comparison-view { display: none; }

        /* í€´ì¦ˆ */
        .quiz-section {
            padding: 20px;
            background-color: #fff3e0;
            display: none;
            text-align: center;
        }
        .quiz-options button {
            margin: 5px;
            padding: 8px 15px;
            background: white;
            border: 1px solid #ccc;
            border-radius: 5px;
            cursor: pointer;
        }
        .feedback { margin-top: 10px; font-weight: bold; }

        /* ì•ˆì „ ê²½ê³  */
        .safety-warning {
            background-color: #ffebee;
            color: #c62828;
            padding: 10px;
            text-align: center;
            font-size: 0.8rem;
            font-weight: bold;
        }
    </style>
</head>
<body>

<header>
    <h1>ğŸ§ª ê°€ìƒ í™”í•™ ì‹¤í—˜ì‹¤: ê²°ì • ë§Œë“¤ê¸°</h1>
    <p>ì¤‘2 ê³¼í•™: ì—¬ëŸ¬ ê°€ì§€ ë¬¼ì§ˆ - ìš©í•´ë„ì™€ ê²°ì • ìƒì„±</p>
</header>

<div class="safety-warning">
    âš ï¸ ì£¼ì˜: ì‹¤ì œ ì‹¤í—˜ì‹¤ì—ì„œ í™©ì‚° êµ¬ë¦¬(â…¡)ëŠ” ë…ì„±ì´ ìˆìœ¼ë¯€ë¡œ ì ˆëŒ€ ë§›ë³´ê±°ë‚˜ í”¼ë¶€ì— ë‹¿ì§€ ì•Šë„ë¡ í•˜ì„¸ìš”!
</div>

<div class="container">
    <div class="controls">
        <div class="control-group">
            <label for="concentration">ìš©ì•¡ì˜ ë†ë„ (ê°€ë£¨ì˜ ì–‘)</label>
            <input type="range" id="concentration" min="1" max="5" value="3">
            <span id="conc-val">ë³´í†µ (3 mol)</span>
        </div>
        <div class="control-group">
            <label for="speed">ì‹íˆëŠ” ì†ë„ (ëƒ‰ê° ì†ë„)</label>
            <select id="speed">
                <option value="slow">ëŠë¦¬ê²Œ (ì‹¤ì˜¨ ëƒ‰ê°)</option>
                <option value="medium" selected>ë³´í†µ</option>
                <option value="fast">ë¹ ë¥´ê²Œ (ì–¼ìŒë¬¼ ëƒ‰ê°)</option>
            </select>
        </div>
        <button class="action-btn" onclick="startExperiment()">ì‹¤í—˜ ì‹œì‘í•˜ê¸° ğŸŒ¡ï¸</button>
        <button class="action-btn reset-btn" onclick="resetExperiment()">ë‹¤ì‹œ í•˜ê¸° ğŸ”„</button>
    </div>

    <div class="simulation-area">
        <div class="beaker">
            <div class="liquid" id="liquid"></div>
            <div class="crystals-container" id="crystals-area"></div>
        </div>
        <div style="position: absolute; top: 10px; right: 10px; background: rgba(255,255,255,0.8); padding: 5px; border-radius: 5px; font-size: 0.8rem;">
            ğŸŒ¡ï¸ í˜„ì¬ ì˜¨ë„: <span id="temp-display">60</span>Â°C
        </div>
    </div>

    <div class="info-panel" id="result-panel">
        <div class="panel-card">
            <h3>ğŸ”¬ ê´€ì°° ê²°ê³¼</h3>
            <p id="observation-text">ì‹¤í—˜ì„ ì‹œì‘í•´ ë³´ì„¸ìš”. ì˜¨ë„ê°€ ë‚´ë ¤ê°€ë©´ ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚ ê¹Œìš”?</p>
        </div>
        <div class="panel-card" id="sapphire-card" style="opacity: 0.5;">
            <h3>ğŸ’ ì‚¬íŒŒì´ì–´ì™€ ë¹„êµ</h3>
            <p>ì‹¤í—˜ì´ ì™„ë£Œë˜ë©´ ì‚¬íŒŒì´ì–´ ì •ë³´ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.</p>
        </div>
    </div>

    <div class="quiz-section" id="quiz-area">
        <h3>ğŸ¤” ì˜¤ëŠ˜ì˜ í€´ì¦ˆ</h3>
        <p>í¬ê³  ê³ ë¥¸ ëª¨ì–‘ì˜ ê²°ì •ì„ ë§Œë“¤ë ¤ë©´ ì–´ë–¤ ì¡°ê±´ì´ ê°€ì¥ ì¢‹ì„ê¹Œìš”?</p>
        <div class="quiz-options">
            <button onclick="checkAnswer(1)">ë†’ì€ ë†ë„ + ì•„ì£¼ ë¹ ë¥¸ ëƒ‰ê°</button>
            <button onclick="checkAnswer(2)">ë†’ì€ ë†ë„ + ì²œì²œíˆ ëƒ‰ê°</button>
            <button onclick="checkAnswer(3)">ë‚®ì€ ë†ë„ + ë¹ ë¥¸ ëƒ‰ê°</button>
        </div>
        <div class="feedback" id="quiz-feedback"></div>
    </div>
</div>

<script>
    // ë³€ìˆ˜ ì„¤ì •
    const concInput = document.getElementById('concentration');
    const speedInput = document.getElementById('speed');
    const concVal = document.getElementById('conc-val');
    const liquid = document.getElementById('liquid');
    const crystalsArea = document.getElementById('crystals-area');
    const tempDisplay = document.getElementById('temp-display');
    const obsText = document.getElementById('observation-text');
    const sapphireCard = document.getElementById('sapphire-card');
    const quizArea = document.getElementById('quiz-area');

    let isRunning = false;
    let temperature = 60;
    let experimentInterval;

    // ë†ë„ ìŠ¬ë¼ì´ë” ì´ë²¤íŠ¸
    concInput.addEventListener('input', (e) => {
        const val = e.target.value;
        concVal.innerText = val <= 1 ? "ë¬½ìŒ (1 mol)" : val >= 5 ? "ë§¤ìš° ì§„í•¨ (5 mol)" : `ë³´í†µ (${val} mol)`;
        // ë†ë„ì— ë”°ë¥¸ ìš©ì•¡ ìƒ‰ìƒ ë³€í™”
        const opacity = 0.1 + (val * 0.15);
        liquid.style.backgroundColor = `rgba(0, 100, 255, ${opacity})`;
    });

    // ì‹¤í—˜ ì‹œì‘ í•¨ìˆ˜
    function startExperiment() {
        if (isRunning) return;
        isRunning = true;
        resetVisuals();
        
        const concentration = parseInt(concInput.value);
        const speedMode = speedInput.value;
        let coolingRate = 0;
        
        // ì†ë„ ì„¤ì •
        if (speedMode === 'fast') coolingRate = 2; // ë¹ ë¦„
        else if (speedMode === 'medium') coolingRate = 0.8; // ë³´í†µ
        else coolingRate = 0.2; // ëŠë¦¼

        obsText.innerHTML = "ì˜¨ë„ê°€ ë‚´ë ¤ê°€ë©´ì„œ <strong>ìš©í•´ë„</strong>ê°€ ì‘ì•„ì§‘ë‹ˆë‹¤.<br>ë” ì´ìƒ ë…¹ì„ ìˆ˜ ì—†ëŠ” ì…ìë“¤ì´ ë­‰ì¹˜ê¸° ì‹œì‘í•´ìš”!";

        experimentInterval = setInterval(() => {
            temperature -= coolingRate;
            tempDisplay.innerText = Math.floor(temperature);

            // ê²°ì • ìƒì„± ë¡œì§ (30ë„ ì´í•˜ë¶€í„° ë³¸ê²© ìƒì„±)
            if (temperature < 40 && Math.random() > 0.5) {
                spawnCrystal(concentration, speedMode);
            }

            if (temperature <= 20) {
                finishExperiment(concentration, speedMode);
            }
        }, 100);
    }

    // ê²°ì • ìƒì„± ì‹œê°í™”
    function spawnCrystal(conc, speed) {
        const crystal = document.createElement('div');
        crystal.classList.add('crystal');
        
        // í¬ê¸° ë° ê°œìˆ˜ ë¡œì§
        // ì²œì²œíˆ ì‹íìˆ˜ë¡(slow) -> ì…ìê°€ ë¶™ì„ ì‹œê°„ì´ ë§ì•„ ê²°ì •ì´ í¼
        // ë†ë„ê°€ ë†’ì„ìˆ˜ë¡(conc high) -> ê°œìˆ˜ê°€ ë§ìŒ
        let size = 0;
        if (speed === 'slow') size = Math.random() * 20 + 30; // 30~50px
        else if (speed === 'medium') size = Math.random() * 10 + 15; // 15~25px
        else size = Math.random() * 5 + 5; // 5~10px (ì‘ê³  ë§ìŒ)

        crystal.style.width = `${size}px`;
        crystal.style.height = `${size}px`;
        
        // ìœ„ì¹˜ ëœë¤ (ë¹„ì»¤ ë°”ë‹¥ ê·¼ì²˜)
        const randomLeft = Math.random() * 80 + 10; // 10% ~ 90%
        const randomBottom = Math.random() * 20;
        crystal.style.left = `${randomLeft}%`;
        crystal.style.bottom = `${randomBottom}%`;

        crystalsArea.appendChild(crystal);
    }

    // ì‹¤í—˜ ì¢…ë£Œ ë° ê²°ê³¼ ë¶„ì„
    function finishExperiment(conc, speed) {
        clearInterval(experimentInterval);
        isRunning = false;
        tempDisplay.innerText = "20 (ì¢…ë£Œ)";
        
        // ê²°ê³¼ í…ìŠ¤íŠ¸ ìƒì„±
        let resultMsg = "";
        if (speed === 'slow') {
            resultMsg = "ì²œì²œíˆ ì‹í˜€ì„œ ì…ìë“¤ì´ ê·œì¹™ì ìœ¼ë¡œ ë°°ì—´ë  ì‹œê°„ì´ ì¶©ë¶„í–ˆì–´ìš”. <br>ğŸ‘‰ <strong>í¬ê³  íˆ¬ëª…í•œ ê²°ì •</strong>ì´ ë§Œë“¤ì–´ì¡ŒìŠµë‹ˆë‹¤.";
        } else if (speed === 'fast') {
            resultMsg = "ë„ˆë¬´ ë¹¨ë¦¬ ì‹í˜€ì„œ ì…ìë“¤ì´ ê¸‰í•˜ê²Œ ë­‰ì³¤ì–´ìš”. <br>ğŸ‘‰ <strong>ì‘ê³  ë¶ˆê·œì¹™í•œ ì•Œê°±ì´</strong>ë“¤ì´ ë§ì´ ìƒê²¼ìŠµë‹ˆë‹¤.";
        } else {
            resultMsg = "ì ë‹¹í•œ ì†ë„ë¡œ ì‹í˜€ ë³´í†µ í¬ê¸°ì˜ ê²°ì •ì´ ìƒê²¼ìŠµë‹ˆë‹¤.";
        }
        obsText.innerHTML = resultMsg;

        // ì‚¬íŒŒì´ì–´ ë¹„êµ í™œì„±í™”
        showComparison();
        quizArea.style.display = 'block';
    }

    function showComparison() {
        sapphireCard.style.opacity = "1";
        sapphireCard.innerHTML = `
            <h3>ğŸ’ ì‚¬íŒŒì´ì–´ vs í™©ì‚° êµ¬ë¦¬</h3>
            <ul style="padding-left: 20px; font-size: 0.9rem;">
                <li><strong>ê³µí†µì :</strong> ë‘˜ ë‹¤ í‘¸ë¥¸ìƒ‰ì„ ë ë©°, ì…ìê°€ ê·œì¹™ì ìœ¼ë¡œ ë°°ì—´ëœ 'ê²°ì •'ì…ë‹ˆë‹¤.</li>
                <li><strong>ì°¨ì´ì (ì„±ë¶„):</strong> í™©ì‚° êµ¬ë¦¬ëŠ” êµ¬ë¦¬ ì„±ë¶„, ì‚¬íŒŒì´ì–´ëŠ” ì‚°í™” ì•Œë£¨ë¯¸ëŠ„ ì„±ë¶„ì…ë‹ˆë‹¤.</li>
                <li><strong>ì°¨ì´ì (ë‹¨ë‹¨í•¨):</strong> ì‚¬íŒŒì´ì–´ëŠ” ë§¤ìš° ë‹¨ë‹¨í•˜ì§€ë§Œ(ë³´ì„), í™©ì‚° êµ¬ë¦¬ ê²°ì •ì€ ì‰½ê²Œ ë¶€ì„œì§‘ë‹ˆë‹¤.</li>
            </ul>
        `;
    }

    function resetExperiment() {
        clearInterval(experimentInterval);
        isRunning = false;
        temperature = 60;
        tempDisplay.innerText = 60;
        crystalsArea.innerHTML = '';
        obsText.innerText = "ì‹¤í—˜ì„ ì‹œì‘í•´ ë³´ì„¸ìš”. ì˜¨ë„ê°€ ë‚´ë ¤ê°€ë©´ ì–´ë–¤ ì¼ì´ ì¼ì–´ë‚ ê¹Œìš”?";
        sapphireCard.style.opacity = "0.5";
        sapphireCard.innerHTML = "<h3>ğŸ’ ì‚¬íŒŒì´ì–´ì™€ ë¹„êµ</h3><p>ì‹¤í—˜ì´ ì™„ë£Œë˜ë©´ ì‚¬íŒŒì´ì–´ ì •ë³´ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.</p>";
        quizArea.style.display = 'none';
        document.getElementById('quiz-feedback').innerText = "";
    }

    function resetVisuals() {
        crystalsArea.innerHTML = '';
        temperature = 60;
    }

    function checkAnswer(ans) {
        const feedback = document.getElementById('quiz-feedback');
        if (ans === 2) {
            feedback.innerHTML = "<span style='color:blue'>ì •ë‹µì…ë‹ˆë‹¤! ğŸ‘</span><br>ë†ë„ê°€ ì§„í• ìˆ˜ë¡ ì¬ë£Œê°€ ë§ê³ , ì²œì²œíˆ ì‹íìˆ˜ë¡ ì…ìê°€ ê·œì¹™ì ìœ¼ë¡œ ëª¨ì—¬ í° ê²°ì •ì´ ë©ë‹ˆë‹¤.";
        } else {
            feedback.innerHTML = "<span style='color:red'>ë‹¤ì‹œ ìƒê°í•´ë³¼ê¹Œìš”?</span><br>ê²°ì •ì´ ì»¤ì§€ë ¤ë©´ ì…ìë“¤ì´ ìë¦¬ë¥¼ ì¡ì„ 'ì¶©ë¶„í•œ ì‹œê°„'ì´ í•„ìš”í•´ìš”.";
        }
    }
</script>

</body>
</html>