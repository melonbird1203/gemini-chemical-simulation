<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¤‘2 ê³¼í•™: ë‚˜ë§Œì˜ ë¶„ì ì¡°ë¦½ì†Œ</title>
    <style>
        body { font-family: 'Malgun Gothic', sans-serif; background-color: #f0f4f8; margin: 0; padding: 20px; color: #333; }
        .container { max-width: 900px; margin: 0 auto; background: white; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); padding: 20px; }
        h1 { text-align: center; color: #2c3e50; }
        .lab-bench { display: flex; gap: 20px; flex-wrap: wrap; }
        
        /* ì™¼ìª½: ì›ì ë³´ê´€í•¨ */
        .atom-storage { flex: 1; background: #eef2f5; padding: 15px; border-radius: 10px; min-width: 200px; }
        .atom-btn { display: flex; align-items: center; gap: 10px; background: white; border: 2px solid #ddd; padding: 10px; margin-bottom: 10px; border-radius: 30px; cursor: pointer; transition: 0.2s; width: 100%; }
        .atom-btn:hover { background: #e0f7fa; border-color: #00bcd4; transform: translateX(5px); }
        .atom-circle { width: 30px; height: 30px; border-radius: 50%; display: inline-block; border: 1px solid rgba(0,0,0,0.2); box-shadow: inset -2px -2px 5px rgba(0,0,0,0.2); }
        
        /* ì›ì ìƒ‰ìƒ (CPK coloring standard) */
        .h-atom { background-color: #ffffff; border: 1px solid #ccc; } /* ìˆ˜ì†Œ */
        .c-atom { background-color: #333333; } /* íƒ„ì†Œ */
        .n-atom { background-color: #3050f8; } /* ì§ˆì†Œ */
        .o-atom { background-color: #ff0d0d; } /* ì‚°ì†Œ */

        /* ì¤‘ì•™: ì¡°ë¦½ ì‘ì—…ëŒ€ */
        .workspace { flex: 2; background: #fff; border: 3px dashed #cbd5e0; border-radius: 10px; min-height: 300px; position: relative; display: flex; justify-content: center; align-items: center; flex-direction: column; }
        .current-atoms { display: flex; flex-wrap: wrap; justify-content: center; gap: 5px; margin-bottom: 20px; }
        .floating-atom { width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; color: white; text-shadow: 1px 1px 2px black; animation: popIn 0.3s ease-out; box-shadow: inset -3px -3px 8px rgba(0,0,0,0.3); }
        .floating-atom.H { background: #f0f0f0; color: #333; text-shadow: none; border: 1px solid #ccc; }
        .floating-atom.C { background: #333; }
        .floating-atom.N { background: #3050f8; }
        .floating-atom.O { background: #ff0d0d; }

        /* ì˜¤ë¥¸ìª½: ê²°ê³¼ íŒ¨ë„ */
        .result-panel { flex: 1; background: #fffbe6; padding: 15px; border-radius: 10px; border: 2px solid #ffe58f; min-width: 200px; }
        .status-box { text-align: center; padding: 10px; }
        .molecule-name { font-size: 1.5em; font-weight: bold; color: #d35400; margin: 10px 0; }
        .molecule-formula { font-size: 1.2em; font-family: 'Georgia', serif; color: #555; background: #eee; padding: 5px 10px; border-radius: 5px; display: inline-block;}
        .description { font-size: 0.9em; line-height: 1.4; color: #666; margin-top: 10px; text-align: left; }
        
        /* ì»¨íŠ¸ë¡¤ ë²„íŠ¼ */
        .controls { width: 100%; text-align: center; margin-top: 20px; }
        .btn-reset { background: #ff6b6b; color: white; border: none; padding: 10px 25px; border-radius: 5px; cursor: pointer; font-size: 1em; }
        .btn-reset:hover { background: #fa5252; }

        @keyframes popIn { from { transform: scale(0); } to { transform: scale(1); } }
        
        .hint { font-size: 0.85em; color: #888; margin-top: 5px; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ§¬ ë‚˜ë§Œì˜ ë¶„ì ì¡°ë¦½ì†Œ</h1>
    <p style="text-align: center;">ì›ìë¥¼ í´ë¦­í•˜ì—¬ ì‘ì—…ëŒ€ì— ì¶”ê°€í•˜ì„¸ìš”. ì˜¬ë°”ë¥¸ ë¹„ìœ¨ì´ ë˜ë©´ ë¶„ìê°€ ì™„ì„±ë©ë‹ˆë‹¤!</p>
    
    <div class="lab-bench">
        <div class="atom-storage">
            <h3>ì›ì ë³´ê´€í•¨</h3>
            <div class="atom-btn" onclick="addAtom('H')"><span class="atom-circle h-atom"></span>ìˆ˜ì†Œ (H)</div>
            <div class="atom-btn" onclick="addAtom('O')"><span class="atom-circle o-atom"></span>ì‚°ì†Œ (O)</div>
            <div class="atom-btn" onclick="addAtom('N')"><span class="atom-circle n-atom"></span>ì§ˆì†Œ (N)</div>
            <div class="atom-btn" onclick="addAtom('C')"><span class="atom-circle c-atom"></span>íƒ„ì†Œ (C)</div>
            <div class="hint">ğŸ’¡ íŒ: ì‚°ì†Œ ì›ì 2ê°œë¥¼ ëª¨ìœ¼ë©´ ë¬´ì—‡ì´ ë ê¹Œìš”?</div>
        </div>

        <div class="workspace" id="workspaceArea">
            <div id="atomDisplay" class="current-atoms"></div>
            <div style="color: #aaa; font-size: 0.9em;" id="emptyMsg">ì›ìê°€ ì—†ìŠµë‹ˆë‹¤. ì™¼ìª½ì—ì„œ ì¶”ê°€í•´ì£¼ì„¸ìš”.</div>
        </div>

        <div class="result-panel">
            <h3>ë¶„ì ë¶„ì„ê¸°</h3>
            <div class="status-box">
                <div id="moleculeFormula" class="molecule-formula">-</div>
                <div id="moleculeName" class="molecule-name">ë¯¸ì™„ì„±</div>
                <div id="moleculeDesc" class="description">
                    ì›ìë¥¼ ì¡°í•©í•˜ì—¬ ë¶„ìë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”.
                </div>
            </div>
        </div>
    </div>

    <div class="controls">
        <button class="btn-reset" onclick="resetLab()">ğŸ§ª ì‹¤í—˜ ì´ˆê¸°í™” (ë¹„ìš°ê¸°)</button>
    </div>
</div>

<script>
    // í˜„ì¬ ì‘ì—…ëŒ€ì— ìˆëŠ” ì›ì ê°œìˆ˜ ì €ì¥
    let currentCounts = { H: 0, O: 0, N: 0, C: 0 };
    
    // ë¶„ì ë°ì´í„°ë² ì´ìŠ¤ (ì •ë‹µì§€)
    const molecules = [
        { formula: "Hâ‚‚", name: "ìˆ˜ì†Œ ê¸°ì²´", counts: {H:2, O:0, N:0, C:0}, desc: "ê°€ì¥ ê°€ë²¼ìš´ ê¸°ì²´ë¡œ, ìš°ì£¼ì—ì„œ ê°€ì¥ í’ë¶€í•©ë‹ˆë‹¤." },
        { formula: "Oâ‚‚", name: "ì‚°ì†Œ ê¸°ì²´", counts: {H:0, O:2, N:0, C:0}, desc: "ìš°ë¦¬ê°€ ìˆ¨ ì‰´ ë•Œ í•„ìš”í•œ ê¸°ì²´ì…ë‹ˆë‹¤. ë¬¼ì§ˆì„ íƒœìš°ëŠ” ê²ƒì„ ë•ìŠµë‹ˆë‹¤." },
        { formula: "Oâ‚ƒ", name: "ì˜¤ì¡´", counts: {H:0, O:3, N:0, C:0}, desc: "ì„±ì¸µê¶Œì—ì„œëŠ” ìì™¸ì„ ì„ ë§‰ì•„ì£¼ì§€ë§Œ, ì§€í‘œë©´ì—ì„œëŠ” ìœ í•´í•œ ë¬¼ì§ˆì…ë‹ˆë‹¤. ì‚°ì†Œ(Oâ‚‚)ì™€ ì„±ì§ˆì´ ì™„ì „íˆ ë‹¤ë¦…ë‹ˆë‹¤!" },
        { formula: "Hâ‚‚O", name: "ë¬¼", counts: {H:2, O:1, N:0, C:0}, desc: "ìš°ë¦¬ ëª¸ì˜ 70%ë¥¼ êµ¬ì„±í•˜ëŠ” ì†Œì¤‘í•œ ë¬¼ì§ˆì…ë‹ˆë‹¤. ìƒì˜¨ì—ì„œ ì•¡ì²´ ìƒíƒœì…ë‹ˆë‹¤." },
        { formula: "Hâ‚‚Oâ‚‚", name: "ê³¼ì‚°í™”ìˆ˜ì†Œ", counts: {H:2, O:2, N:0, C:0}, desc: "ìƒì²˜ë¥¼ ì†Œë…í•  ë•Œ ì”ë‹ˆë‹¤. ë¬¼(Hâ‚‚O)ë³´ë‹¤ ì‚°ì†Œê°€ í•˜ë‚˜ ë” ë§ì„ ë¿ì¸ë° ë§ˆì‹œë©´ ìœ„í—˜í•œ ë¬¼ì§ˆì´ ë©ë‹ˆë‹¤." },
        { formula: "COâ‚‚", name: "ì´ì‚°í™”íƒ„ì†Œ", counts: {H:0, O:2, N:0, C:1}, desc: "í˜¸í¡ì˜ ê²°ê³¼ë¡œ ë°°ì¶œë˜ë©°, ì‹ë¬¼ì˜ ê´‘í•©ì„±ì— ì´ìš©ë©ë‹ˆë‹¤." },
        { formula: "NHâ‚ƒ", name: "ì•”ëª¨ë‹ˆì•„", counts: {H:3, O:0, N:1, C:0}, desc: "ìê·¹ì ì¸ ëƒ„ìƒˆê°€ ë‚˜ëŠ” ê¸°ì²´ë¡œ, ë¹„ë£Œë¥¼ ë§Œë“œëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤." },
        { formula: "CHâ‚„", name: "ë©”í…Œì¸", counts: {H:4, O:0, N:0, C:1}, desc: "ì²œì—°ê°€ìŠ¤(LNG)ì˜ ì£¼ì„±ë¶„ìœ¼ë¡œ, ë¶ˆì— ì˜ íƒ€ëŠ” ì—°ë£Œì…ë‹ˆë‹¤." },
        { formula: "Nâ‚‚", name: "ì§ˆì†Œ ê¸°ì²´", counts: {H:0, O:0, N:2, C:0}, desc: "ê³µê¸°ì˜ ì•½ 78%ë¥¼ ì°¨ì§€í•˜ë©°, ê³¼ì ë´‰ì§€ ì¶©ì „ì¬ë¡œë„ ì“°ì…ë‹ˆë‹¤." }
    ];

    function addAtom(type) {
        // ë°ì´í„° ì—…ë°ì´íŠ¸
        currentCounts[type]++;
        
        // í™”ë©´ ì—…ë°ì´íŠ¸ (ì›ì ì¶”ê°€ ì• ë‹ˆë©”ì´ì…˜)
        const display = document.getElementById('atomDisplay');
        const atomDiv = document.createElement('div');
        atomDiv.className = `floating-atom ${type}`;
        atomDiv.innerText = type;
        display.appendChild(atomDiv);
        
        document.getElementById('emptyMsg').style.display = 'none';
        
        checkMolecule();
    }

    function checkMolecule() {
        // í˜„ì¬ ì¡°í•©ê³¼ ì¼ì¹˜í•˜ëŠ” ë¶„ìê°€ ìˆëŠ”ì§€ í™•ì¸
        const match = molecules.find(m => 
            m.counts.H === currentCounts.H &&
            m.counts.O === currentCounts.O &&
            m.counts.N === currentCounts.N &&
            m.counts.C === currentCounts.C
        );

        const nameEl = document.getElementById('moleculeName');
        const formulaEl = document.getElementById('moleculeFormula');
        const descEl = document.getElementById('moleculeDesc');

        if (match) {
            nameEl.innerText = match.name;
            nameEl.style.color = "#27ae60"; // ì„±ê³µ ìƒ‰ìƒ
            formulaEl.innerText = match.formula;
            descEl.innerHTML = `<strong>âœ¨ ë¶„ì ìƒì„± ì„±ê³µ!</strong><br>${match.desc}`;
        } else {
            // ì›ìê°€ í•˜ë‚˜ë¼ë„ ìˆëŠ”ë° ë§¤ì¹­ì´ ì•ˆë  ë•Œ
            const totalAtoms = currentCounts.H + currentCounts.O + currentCounts.N + currentCounts.C;
            if (totalAtoms > 0) {
                nameEl.innerText = "ê²°í•© ì¤‘...";
                nameEl.style.color = "#d35400";
                formulaEl.innerText = buildRawFormula();
                descEl.innerText = "ì•„ì§ ì•Œë ¤ì§„ ì•ˆì •ì ì¸ ë¶„ìê°€ í˜•ì„±ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ì›ìë¥¼ ë”í•˜ê±°ë‚˜ ë¹¼ë³´ì„¸ìš”.";
            } else {
                resetUI();
            }
        }
    }

    function buildRawFormula() {
        // í˜„ì¬ ìƒíƒœë¥¼ í™”í•™ì‹ í˜•íƒœë¡œ ë‹¨ìˆœ í‘œì‹œ (ì˜ˆ: H3O1)
        let f = "";
        if (currentCounts.C > 0) f += `C<sub>${currentCounts.C}</sub>`;
        if (currentCounts.H > 0) f += `H<sub>${currentCounts.H}</sub>`;
        if (currentCounts.O > 0) f += `O<sub>${currentCounts.O}</sub>`;
        if (currentCounts.N > 0) f += `N<sub>${currentCounts.N}</sub>`;
        return f.replace(/<sub>1<\/sub>/g, ""); // 1ì€ ìƒëµ
    }

    function resetLab() {
        currentCounts = { H: 0, O: 0, N: 0, C: 0 };
        document.getElementById('atomDisplay').innerHTML = '';
        document.getElementById('emptyMsg').style.display = 'block';
        resetUI();
    }

    function resetUI() {
        document.getElementById('moleculeName').innerText = "ë¯¸ì™„ì„±";
        document.getElementById('moleculeName').style.color = "#d35400";
        document.getElementById('moleculeFormula').innerText = "-";
        document.getElementById('moleculeDesc').innerText = "ì›ìë¥¼ ì¡°í•©í•˜ì—¬ ë¶„ìë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”.";
    }
</script>

</body>
</html>