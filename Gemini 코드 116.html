<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°€ìƒ ì‹¤í—˜: ìˆ˜ì†Œ í™”í•©ë¬¼ì˜ ë“ëŠ”ì ê³¼ ë¶„ì ê°„ ì¸ë ¥</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        :root {
            --primary-color: #2563eb;
            --secondary-color: #1e40af;
            --bg-color: #f8fafc;
            --text-color: #1e293b;
            --danger-color: #ef4444;
            --success-color: #10b981;
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 20px;
        }

        header {
            grid-column: 1 / -1;
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            border-left: 6px solid var(--primary-color);
        }

        h1 { margin: 0; font-size: 1.5rem; color: var(--secondary-color); }
        .subtitle { font-size: 0.9rem; color: #64748b; margin-top: 5px; }

        /* Main Experiment Area */
        .lab-panel {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        button {
            padding: 8px 16px;
            border: 1px solid #cbd5e1;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: bold;
        }

        button:hover { background: #f1f5f9; }
        button.active { background: var(--primary-color); color: white; border-color: var(--primary-color); }

        .canvas-container {
            position: relative;
            height: 400px;
            width: 100%;
        }

        /* Sidebar Info */
        .info-panel {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .molecule-viewer {
            width: 100%;
            height: 200px;
            background: #e2e8f0;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid #cbd5e1;
        }

        .molecule-label {
            font-weight: bold;
            font-size: 1.2rem;
            margin-bottom: 5px;
            color: var(--secondary-color);
        }

        .data-tag {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-right: 5px;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .tag-hbond { background: #fee2e2; color: #991b1b; border: 1px solid #fecaca; }
        .tag-vdw { background: #e0f2fe; color: #075985; border: 1px solid #bae6fd; }

        .explanation {
            font-size: 0.9rem;
            background: #f8fafc;
            padding: 10px;
            border-radius: 6px;
            border-left: 4px solid var(--primary-color);
        }

        /* Quiz Section */
        .quiz-section {
            margin-top: auto;
            padding-top: 15px;
            border-top: 2px dashed #cbd5e1;
        }
        
        .quiz-question { font-weight: bold; font-size: 0.95rem; margin-bottom: 8px; }
        .quiz-options button { width: 100%; margin-bottom: 5px; text-align: left; }
        .feedback { font-size: 0.9rem; margin-top: 5px; font-weight: bold; }
        
        /* Animation elements */
        .particle {
            width: 20px; height: 20px; border-radius: 50%; position: absolute;
            box-shadow: inset -2px -2px 4px rgba(0,0,0,0.2);
        }
        .bond-line {
            position: absolute; border-top: 2px dashed red; transform-origin: 0 0; opacity: 0; transition: opacity 0.3s;
        }

        @media (max-width: 768px) {
            .container { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

<header>
    <h1>ğŸ§ª ìˆ˜ì†Œ í™”í•©ë¬¼ì˜ ë“ëŠ”ì ê³¼ ë¶„ì ê°„ ì¸ë ¥</h1>
    <div class="subtitle">14~17ì¡± ìˆ˜ì†Œ í™”í•©ë¬¼ì˜ ë“ëŠ”ì  ë°ì´í„°ë¥¼ ë¹„êµí•˜ê³ , ìˆ˜ì†Œ ê²°í•©ì˜ ì˜í–¥ì„ íƒêµ¬í•©ë‹ˆë‹¤.</div>
</header>

<div class="container">
    <section class="lab-panel">
        <div class="controls">
            <span><strong>ë°ì´í„° í‘œì‹œ ì„¤ì •:</strong></span>
            <button onclick="toggleDataset(0)" class="active" id="btn-g14">14ì¡± (CHâ‚„ ë“±)</button>
            <button onclick="toggleDataset(1)" id="btn-g15">15ì¡± (NHâ‚ƒ ë“±)</button>
            <button onclick="toggleDataset(2)" id="btn-g16">16ì¡± (Hâ‚‚O ë“±)</button>
            <button onclick="toggleDataset(3)" id="btn-g17">17ì¡± (HF ë“±)</button>
            <button onclick="resetZoom()" style="margin-left:auto; background:#f1f5f9;">ğŸ”„ ê·¸ë˜í”„ ì´ˆê¸°í™”</button>
        </div>
        <div class="canvas-container">
            <canvas id="bpChart"></canvas>
        </div>
        <div style="margin-top: 10px; font-size: 0.9rem; color: #666;">
            ğŸ’¡ <strong>Tip:</strong> ê·¸ë˜í”„ì˜ ì ì„ í´ë¦­í•˜ë©´ í•´ë‹¹ ë¶„ìì˜ ìƒì„¸ ì •ë³´ì™€ êµ¬ì¡°ë¥¼ ì˜¤ë¥¸ìª½ íŒ¨ë„ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </div>
    </section>

    <aside class="info-panel">
        <div>
            <div class="molecule-label" id="mol-name">ë¶„ìë¥¼ ì„ íƒí•˜ì„¸ìš”</div>
            <div id="mol-tags">
                </div>
        </div>

        <div class="molecule-viewer" id="mol-view">
            <div style="color: #94a3b8;">ê·¸ë˜í”„ì˜ ì ì„ í´ë¦­í•˜ì—¬<br>ì…ì ëª¨í˜• í™•ì¸</div>
        </div>

        <div class="explanation" id="mol-desc">
            ì™¼ìª½ ê·¸ë˜í”„ì—ì„œ ì›ì†Œë¥¼ í´ë¦­í•˜ë©´ ë“ëŠ”ì ì˜ ì›ì¸ì„ ë¶„ì„í•´ ë“œë¦½ë‹ˆë‹¤. <br><br>
            ì¼ë°˜ì ìœ¼ë¡œ ë¶„ìëŸ‰ì´ í´ìˆ˜ë¡ ë¶„ì‚°ë ¥ì´ ì»¤ì ¸ ë“ëŠ”ì ì´ ë†’ì•„ì§€ì§€ë§Œ, ì˜ˆì™¸ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.
        </div>

        <div class="quiz-section">
            <div class="quiz-question">Q. Hâ‚‚Oì˜ ë“ëŠ”ì ì´ ê°™ì€ ì¡±ì¸ Hâ‚‚Së³´ë‹¤ í›¨ì”¬ ë†’ì€ ì£¼ëœ ì´ìœ ëŠ”?</div>
            <div class="quiz-options">
                <button onclick="checkAnswer(1)">ë¶„ìëŸ‰ì´ ë” í¬ê¸° ë•Œë¬¸ì—</button>
                <button onclick="checkAnswer(2)">ìˆ˜ì†Œ ê²°í•©ì„ í•˜ê¸° ë•Œë¬¸ì—</button>
                <button onclick="checkAnswer(3)">ê³µìœ  ê²°í•©ì´ ë” ê°•í•´ì„œ</button>
            </div>
            <div id="quiz-feedback" class="feedback"></div>
        </div>
    </aside>
</div>

<script>
    // --- Data Definition ---
    const compounds = {
        // Group 14
        "CH4": { group: 14, period: 2, bp: -164, mw: 16, hBond: false, color: "#94a3b8", desc: "ë¬´ê·¹ì„± ë¶„ìì…ë‹ˆë‹¤. ë¶„ìëŸ‰ì´ ì‘ì•„ ë¶„ì‚°ë ¥ì´ ë§¤ìš° ì•½í•˜ë©° ë“ëŠ”ì ì´ ë‚®ìŠµë‹ˆë‹¤." },
        "SiH4": { group: 14, period: 3, bp: -112, mw: 32, hBond: false, color: "#94a3b8", desc: "ë¬´ê·¹ì„± ë¶„ìì…ë‹ˆë‹¤. CHâ‚„ë³´ë‹¤ ë¶„ìëŸ‰ì´ ì»¤ì„œ ë¶„ì‚°ë ¥ì´ ì¦ê°€í•´ ë“ëŠ”ì ì´ ì•½ê°„ ë†’ìŠµë‹ˆë‹¤." },
        "GeH4": { group: 14, period: 4, bp: -88, mw: 77, hBond: false, color: "#94a3b8", desc: "ë¶„ìëŸ‰ì´ ë” ì»¤ì ¸ ë“ëŠ”ì ì´ ìƒìŠ¹í•˜ëŠ” ì¼ë°˜ì ì¸ ê²½í–¥ì„ ë³´ì…ë‹ˆë‹¤." },
        "SnH4": { group: 14, period: 5, bp: -52, mw: 123, hBond: false, color: "#94a3b8", desc: "14ì¡± ì¤‘ ë¶„ìëŸ‰ì´ ê°€ì¥ í¬ê³  ë¶„ì‚°ë ¥ì´ ê°€ì¥ ê°•í•©ë‹ˆë‹¤." },
        
        // Group 15
        "NH3": { group: 15, period: 2, bp: -33, mw: 17, hBond: true, color: "#8b5cf6", desc: "âš ï¸ ì˜ˆì™¸ êµ¬ê°„! ë¶„ìëŸ‰ì€ ì‘ì§€ë§Œ ì§ˆì†Œ(N)ì™€ ìˆ˜ì†Œ(H) ì‚¬ì´ì˜ <strong>ìˆ˜ì†Œ ê²°í•©</strong>ìœ¼ë¡œ ì¸í•´ ë“ëŠ”ì ì´ ë¹„ì •ìƒì ìœ¼ë¡œ ë†’ìŠµë‹ˆë‹¤." },
        "PH3": { group: 15, period: 3, bp: -87, mw: 34, hBond: false, color: "#8b5cf6", desc: "ìˆ˜ì†Œ ê²°í•©ì„ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ë¶„ìëŸ‰ì€ NHâ‚ƒë³´ë‹¤ í¬ì§€ë§Œ ë“ëŠ”ì ì€ í›¨ì”¬ ë‚®ìŠµë‹ˆë‹¤." },
        "AsH3": { group: 15, period: 4, bp: -62, mw: 78, hBond: false, color: "#8b5cf6", desc: "ë¶„ìëŸ‰ì´ ì»¤ì§€ë©° ë¶„ì‚°ë ¥ì´ ì¦ê°€í•´ PHâ‚ƒë³´ë‹¤ ë“ëŠ”ì ì´ ë†’ìŠµë‹ˆë‹¤." },
        "SbH3": { group: 15, period: 5, bp: -17, mw: 125, hBond: false, color: "#8b5cf6", desc: "ë¶„ì‚°ë ¥ì˜ ì˜í–¥ìœ¼ë¡œ ë“ëŠ”ì ì´ ë†’ì•„ì§€ëŠ” ê²½í–¥ì„ ë”°ë¦…ë‹ˆë‹¤." },

        // Group 16
        "H2O": { group: 16, period: 2, bp: 100, mw: 18, hBond: true, color: "#2563eb", desc: "ğŸ¯ í•µì‹¬ ê´€ì°°! ì‚°ì†Œ(O)ì˜ ë†’ì€ ì „ê¸°ìŒì„±ë„ë¡œ ì¸í•´ <strong>ë§¤ìš° ê°•í•œ ìˆ˜ì†Œ ê²°í•©</strong>ì„ í˜•ì„±í•©ë‹ˆë‹¤. ê·¸ë˜ì„œ ë“ëŠ”ì ì´ 100â„ƒë¡œ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤." },
        "H2S": { group: 16, period: 3, bp: -60, mw: 34, hBond: false, color: "#2563eb", desc: "ìˆ˜ì†Œ ê²°í•©ì´ ì—†ìŠµë‹ˆë‹¤. ë¬¼(Hâ‚‚O)ê³¼ ë¹„êµí•˜ë©´ ë“ëŠ”ì  ì°¨ì´ê°€ 160â„ƒë‚˜ ë‚©ë‹ˆë‹¤." },
        "H2Se": { group: 16, period: 4, bp: -41, mw: 81, hBond: false, color: "#2563eb", desc: "ë¶„ì‚°ë ¥ ì¦ê°€ì— ë”°ë¼ ë“ëŠ”ì ì´ ìƒìŠ¹í•©ë‹ˆë‹¤." },
        "H2Te": { group: 16, period: 5, bp: -2, mw: 130, hBond: false, color: "#2563eb", desc: "ë¶„ìëŸ‰ì´ ì»¤ì„œ ë“ëŠ”ì ì´ ë†’ì§€ë§Œ, ìˆ˜ì†Œ ê²°í•©ì„ í•˜ëŠ” Hâ‚‚Oì—ëŠ” ë¯¸ì¹˜ì§€ ëª»í•©ë‹ˆë‹¤." },

        // Group 17
        "HF": { group: 17, period: 2, bp: 20, mw: 20, hBond: true, color: "#10b981", desc: "âš ï¸ ì˜ˆì™¸ êµ¬ê°„! í”Œë£¨ì˜¤ë¦°(F)ì€ ì „ê¸°ìŒì„±ë„ê°€ ê°€ì¥ ì»¤ì„œ <strong>ìˆ˜ì†Œ ê²°í•©</strong>ì„ í˜•ì„±í•©ë‹ˆë‹¤. HClë³´ë‹¤ ë“ëŠ”ì ì´ í›¨ì”¬ ë†’ìŠµë‹ˆë‹¤." },
        "HCl": { group: 17, period: 3, bp: -85, mw: 36.5, hBond: false, color: "#10b981", desc: "ìˆ˜ì†Œ ê²°í•©ì´ ì—†ìŠµë‹ˆë‹¤. ìŒê·¹ì í˜ê³¼ ë¶„ì‚°ë ¥ë§Œ ì‘ìš©í•©ë‹ˆë‹¤." },
        "HBr": { group: 17, period: 4, bp: -66, mw: 81, hBond: false, color: "#10b981", desc: "ë¶„ì‚°ë ¥ ì¦ê°€ë¡œ ë“ëŠ”ì ì´ ìƒìŠ¹í•©ë‹ˆë‹¤." },
        "HI": { group: 17, period: 5, bp: -35, mw: 128, hBond: false, color: "#10b981", desc: "ê°€ì¥ í° ë¶„ì‚°ë ¥ì„ ê°€ì§‘ë‹ˆë‹¤." }
    };

    // --- Chart.js Setup ---
    const ctx = document.getElementById('bpChart').getContext('2d');
    
    // Helper to format data for Chart.js
    const getDataByGroup = (groupNum) => {
        return Object.keys(compounds)
            .filter(key => compounds[key].group === groupNum)
            .map(key => ({ x: compounds[key].period, y: compounds[key].bp, mol: key }));
    };

    const chartData = {
        labels: ['2ì£¼ê¸°', '3ì£¼ê¸°', '4ì£¼ê¸°', '5ì£¼ê¸°'],
        datasets: [
            { label: '14ì¡± (CHâ‚„ ë“±)', data: getDataByGroup(14), borderColor: '#94a3b8', backgroundColor: '#94a3b8', tension: 0.2, hidden: false },
            { label: '15ì¡± (NHâ‚ƒ ë“±)', data: getDataByGroup(15), borderColor: '#8b5cf6', backgroundColor: '#8b5cf6', tension: 0.2, hidden: true },
            { label: '16ì¡± (Hâ‚‚O ë“±)', data: getDataByGroup(16), borderColor: '#2563eb', backgroundColor: '#2563eb', tension: 0.2, hidden: true },
            { label: '17ì¡± (HF ë“±)', data: getDataByGroup(17), borderColor: '#10b981', backgroundColor: '#10b981', tension: 0.2, hidden: true }
        ]
    };

    const config = {
        type: 'line',
        data: chartData,
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                x: { title: { display: true, text: 'ì£¼ê¸° (ë¶„ìëŸ‰ ì¦ê°€ â†’)' } },
                y: { title: { display: true, text: 'ë“ëŠ”ì  (â„ƒ)' }, min: -200, max: 150 }
            },
            plugins: {
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            return context.raw.mol + ": " + context.raw.y + "â„ƒ";
                        }
                    }
                },
                legend: { display: true }
            },
            onClick: (e, activeEls) => {
                if (activeEls.length > 0) {
                    const datasetIndex = activeEls[0].datasetIndex;
                    const dataIndex = activeEls[0].index;
                    const molName = chartData.datasets[datasetIndex].data[dataIndex].mol;
                    updateInfoPanel(molName);
                }
            }
        }
    };

    let myChart = new Chart(ctx, config);

    // --- Interaction Logic ---
    function toggleDataset(index) {
        const isHidden = myChart.isDatasetVisible(index);
        myChart.setDatasetVisibility(index, !isHidden);
        myChart.update();
        
        const btn = document.getElementById(`btn-g${14+index}`);
        if (!isHidden) btn.classList.remove('active');
        else btn.classList.add('active');
    }

    function resetZoom() {
        myChart.data.datasets.forEach((ds, i) => {
            myChart.setDatasetVisibility(i, i === 0);
            document.getElementById(`btn-g${14+i}`).classList.toggle('active', i === 0);
        });
        myChart.update();
        document.getElementById('mol-view').innerHTML = '<div style="color: #94a3b8;">ê·¸ë˜í”„ì˜ ì ì„ í´ë¦­í•˜ì—¬<br>ì…ì ëª¨í˜• í™•ì¸</div>';
        document.getElementById('mol-name').innerText = "ë¶„ìë¥¼ ì„ íƒí•˜ì„¸ìš”";
        document.getElementById('mol-desc').innerHTML = "ì™¼ìª½ ê·¸ë˜í”„ì—ì„œ ì›ì†Œë¥¼ í´ë¦­í•˜ë©´ ë“ëŠ”ì ì˜ ì›ì¸ì„ ë¶„ì„í•´ ë“œë¦½ë‹ˆë‹¤.";
        document.getElementById('mol-tags').innerHTML = "";
    }

    function updateInfoPanel(molKey) {
        const data = compounds[molKey];
        
        // Update Text
        document.getElementById('mol-name').innerText = `${molKey} (ë“ëŠ”ì : ${data.bp}â„ƒ)`;
        document.getElementById('mol-desc').innerHTML = data.desc;
        
        // Update Tags
        let tagsHtml = `<span class="data-tag tag-vdw">ë¶„ìëŸ‰: ${data.mw}</span>`;
        if (data.hBond) {
            tagsHtml += `<span class="data-tag tag-hbond">ğŸ”¥ ìˆ˜ì†Œ ê²°í•© ì¡´ì¬</span>`;
        } else {
            tagsHtml += `<span class="data-tag tag-vdw">ì¼ë°˜ ë¶„ì‚°ë ¥/ìŒê·¹ì</span>`;
        }
        document.getElementById('mol-tags').innerHTML = tagsHtml;

        // Visual Simulation (Simple CSS Animation)
        const container = document.getElementById('mol-view');
        container.innerHTML = '';
        container.style.background = data.hBond ? '#fff1f2' : '#f0f9ff'; // Light Red for H-bond, Light Blue for others

        // Create particles
        const particleCount = 5;
        for(let i=0; i<particleCount; i++) {
            const p = document.createElement('div');
            p.className = 'particle';
            p.style.backgroundColor = data.color;
            // Random position
            p.style.left = Math.random() * 80 + 10 + '%';
            p.style.top = Math.random() * 80 + 10 + '%';
            
            // Animation logic based on bond type
            const duration = data.hBond ? '4s' : '1s'; // H-bond moves slower/stickier
            p.style.transition = `all ${duration} ease-in-out infinite alternate`;
            
            container.appendChild(p);
            
            // Simple movement loop
            setInterval(() => {
                p.style.left = Math.random() * 80 + 10 + '%';
                p.style.top = Math.random() * 80 + 10 + '%';
            }, data.hBond ? 2000 : 800);
        }

        if(data.hBond) {
            const label = document.createElement('div');
            label.innerText = "ìˆ˜ì†Œ ê²°í•© ì¸ë ¥ ì‘ìš© ì¤‘...";
            label.style.position = 'absolute';
            label.style.bottom = '10px';
            label.style.color = '#ef4444';
            label.style.fontSize = '0.8rem';
            label.style.fontWeight = 'bold';
            container.appendChild(label);
        }
    }

    function checkAnswer(option) {
        const fb = document.getElementById('quiz-feedback');
        if (option === 2) {
            fb.style.color = 'var(--success-color)';
            fb.innerText = "âœ… ì •ë‹µì…ë‹ˆë‹¤! ë¬¼ ë¶„ì ê°„ì—ëŠ” ê°•í•œ ìˆ˜ì†Œ ê²°í•©ì´ ì‘ìš©í•˜ì—¬ ë¶„ìë¥¼ ë–¼ì–´ë‚´ê¸° ìœ„í•´ ë§ì€ ì—ë„ˆì§€ê°€ í•„ìš”í•©ë‹ˆë‹¤.";
        } else if (option === 1) {
            fb.style.color = 'var(--danger-color)';
            fb.innerText = "âŒ ë‹¤ì‹œ ìƒê°í•´ë³´ì„¸ìš”. ë¶„ìëŸ‰ì€ Hâ‚‚S(34)ê°€ Hâ‚‚O(18)ë³´ë‹¤ ë” í½ë‹ˆë‹¤. ë¶„ìëŸ‰ë§Œìœ¼ë¡œëŠ” ì„¤ëª…í•  ìˆ˜ ì—†ì–´ìš”.";
        } else {
            fb.style.color = 'var(--danger-color)';
            fb.innerText = "âŒ í‹€ë ¸ìŠµë‹ˆë‹¤. ë“ëŠ”ì ì€ ë¶„ì 'ë‚´' ê³µìœ  ê²°í•©ì´ ì•„ë‹ˆë¼, ë¶„ì 'ê°„' ì¸ë ¥ì„ ëŠëŠ” ê²ƒê³¼ ê´€ë ¨ì´ ìˆìŠµë‹ˆë‹¤.";
        }
    }
</script>

</body>
</html>