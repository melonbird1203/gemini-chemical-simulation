<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°€ìƒ ì‹¤í—˜: ì—¼ ìˆ˜ìš©ì•¡ì˜ ì•¡ì„± íƒêµ¬</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        .beaker {
            width: 200px;
            height: 250px;
            border-left: 4px solid #cbd5e1;
            border-right: 4px solid #cbd5e1;
            border-bottom: 4px solid #cbd5e1;
            border-radius: 0 0 20px 20px;
            position: relative;
            background: rgba(255, 255, 255, 0.5);
            margin: 0 auto;
            overflow: hidden;
        }
        .liquid {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 0%; /* Initially empty */
            transition: height 1s ease-in-out, background-color 1s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .bubbles {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        .bubble {
            position: absolute;
            background: rgba(255,255,255,0.3);
            border-radius: 50%;
            animation: rise 4s infinite ease-in;
        }
        @keyframes rise {
            0% { bottom: -10px; transform: translateX(0); opacity: 0; }
            50% { opacity: 1; }
            100% { bottom: 100%; transform: translateX(-20px); opacity: 0; }
        }
        .molecule-view {
            transition: all 0.3s ease;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <header class="bg-indigo-600 text-white p-4 shadow-lg">
        <div class="container mx-auto flex justify-between items-center">
            <div>
                <h1 class="text-2xl font-bold">ğŸ§ª ì—¼ ìˆ˜ìš©ì•¡ì˜ ì•¡ì„± ì•Œì•„ë³´ê¸°</h1>
                <p class="text-sm opacity-90">í™”í•™â…¡: ì¤‘í™” ë°˜ì‘ê³¼ ì´ì˜¨ì˜ ì„±ì§ˆ</p>
            </div>
            <button onclick="resetLab()" class="bg-indigo-500 hover:bg-indigo-700 px-4 py-2 rounded text-sm transition">
                ì‹¤í—˜ ì´ˆê¸°í™”
            </button>
        </div>
    </header>

    <main class="container mx-auto p-6 grid grid-cols-1 lg:grid-cols-3 gap-8">
        
        <section class="bg-white p-6 rounded-xl shadow-md space-y-6">
            <h2 class="text-xl font-bold text-indigo-700 border-b pb-2">1. ì‹¤í—˜ ì¡°ê±´ ì„¤ì •</h2>
            
            <div>
                <label class="block font-bold mb-2">ì—¼(Salt)ì˜ ì¢…ë¥˜ ì„ íƒ</label>
                <select id="saltSelect" class="w-full p-3 border rounded-lg focus:ring-2 focus:ring-indigo-400">
                    <option value="" disabled selected>ì—¼ì„ ì„ íƒí•˜ì„¸ìš”</option>
                    <option value="NaCl">ì—¼í™” ë‚˜íŠ¸ë¥¨ (NaCl)</option>
                    <option value="CH3COONa">ì•„ì„¸íŠ¸ì‚° ë‚˜íŠ¸ë¥¨ (CHâ‚ƒCOONa)</option>
                    <option value="NH4Cl">ì—¼í™” ì•”ëª¨ëŠ„ (NHâ‚„Cl)</option>
                    <option value="KNO3">ì§ˆì‚° ì¹¼ë¥¨ (KNOâ‚ƒ)</option>
                    <option value="Na2CO3">íƒ„ì‚° ë‚˜íŠ¸ë¥¨ (Naâ‚‚COâ‚ƒ)</option>
                </select>
                <p class="text-xs text-gray-500 mt-1">â€» í•™êµ ì‹¤í—˜ì‹¤ì— êµ¬ë¹„ëœ ì‹œì•½ ëª©ë¡ì…ë‹ˆë‹¤.</p>
            </div>

            <div>
                <label class="block font-bold mb-2">ë†ë„ ì¡°ì ˆ (Molar)</label>
                <input type="range" id="concentration" min="0.01" max="0.1" step="0.01" value="0.05" 
                       class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                <div class="flex justify-between text-sm text-gray-600 mt-1">
                    <span>0.01 M</span>
                    <span id="concValue" class="font-bold text-indigo-600">0.05 M</span>
                    <span>0.10 M</span>
                </div>
            </div>

            <button onclick="startExperiment()" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 rounded-lg shadow transition transform hover:scale-105">
                ìˆ˜ìš©ì•¡ ë§Œë“¤ê¸° ë° pH ì¸¡ì •
            </button>

            <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200 text-sm">
                <p class="font-bold text-yellow-800">ğŸ¤” ì‹¤í—˜ ì „ ì˜ˆì¸¡í•˜ê¸°</p>
                <p class="mt-1">ì„ íƒí•œ ì—¼ì€ ë¬¼ì— ë…¹ì•˜ì„ ë•Œ ì‚°ì„±, ì¤‘ì„±, ì—¼ê¸°ì„± ì¤‘ ì–´ë–¤ ì„±ì§ˆì„ ë¨ê¹Œìš”? ë§ˆìŒì†ìœ¼ë¡œ ë¨¼ì € ì •ë‹µì„ ìƒê°í•´ ë³´ì„¸ìš”.</p>
            </div>
        </section>

        <section class="bg-white p-6 rounded-xl shadow-md text-center flex flex-col items-center justify-center">
            <h2 class="text-xl font-bold text-indigo-700 mb-6">2. ê±°ì‹œì  ê´€ì°° (pH ì¸¡ì •)</h2>
            
            <div class="beaker">
                <div id="liquid" class="liquid" style="background-color: #e2e8f0;">
                    <div class="bubbles" id="bubbles"></div>
                </div>
                <div class="absolute top-1/2 left-0 right-0 text-center pointer-events-none">
                    <span id="phLabel" class="text-4xl font-bold text-white drop-shadow-md opacity-0 transition-opacity duration-1000">pH --</span>
                </div>
            </div>

            <div class="mt-6 w-full">
                <div class="h-4 rounded-full bg-gradient-to-r from-red-500 via-green-400 to-purple-600 w-full mb-2"></div>
                <div class="flex justify-between text-xs text-gray-500 px-1">
                    <span>ì‚°ì„± (pH < 7)</span>
                    <span>ì¤‘ì„± (pH = 7)</span>
                    <span>ì—¼ê¸°ì„± (pH > 7)</span>
                </div>
            </div>
        </section>

        <section class="bg-white p-6 rounded-xl shadow-md space-y-4 overflow-y-auto max-h-[600px]">
            <h2 class="text-xl font-bold text-indigo-700 border-b pb-2">3. ë¯¸ì‹œì  ì›ë¦¬ ë° ë¶„ì„</h2>
            
            <div id="explanationArea" class="hidden space-y-4">
                <div class="bg-gray-50 p-3 rounded border">
                    <h3 class="font-bold text-gray-700 mb-2">ğŸ“Š ì‹¤í—˜ ê²°ê³¼ ë°ì´í„°</h3>
                    <ul class="text-sm space-y-1">
                        <li class="flex justify-between"><span>ì—¼ì˜ ì¢…ë¥˜:</span> <span id="resSalt" class="font-bold"></span></li>
                        <li class="flex justify-between"><span>ëª° ë†ë„:</span> <span id="resConc" class="font-bold"></span></li>
                        <li class="flex justify-between"><span>ì¸¡ì • pH:</span> <span id="resPH" class="font-bold text-indigo-600"></span></li>
                        <li class="flex justify-between"><span>ìµœì¢… ì•¡ì„±:</span> <span id="resType" class="font-bold"></span></li>
                    </ul>
                </div>

                <div class="bg-indigo-50 p-4 rounded border border-indigo-100">
                    <h3 class="font-bold text-indigo-800 mb-2">ğŸ”¬ ì™œ ì´ëŸ° ì•¡ì„±ì„ ë¨ê¹Œìš”?</h3>
                    <p id="hydrolysisText" class="text-sm text-gray-700 leading-relaxed mb-2"></p>
                    <div id="reactionEquation" class="bg-white p-2 rounded text-center font-mono text-sm text-red-600 font-bold border border-indigo-200">
                        </div>
                </div>

                <div class="bg-green-50 p-4 rounded border border-green-200">
                    <h3 class="font-bold text-green-800 mb-2">âœ… ê°œë… í™•ì¸ í€´ì¦ˆ</h3>
                    <p id="quizQuestion" class="text-sm font-bold mb-2"></p>
                    <div id="quizOptions" class="space-y-2"></div>
                    <p id="quizFeedback" class="text-sm font-bold mt-2 hidden"></p>
                </div>
            </div>

            <div id="placeholderText" class="text-center text-gray-400 py-10">
                <p>ì‹¤í—˜ì„ ì‹œì‘í•˜ë©´<br>ì´ê³³ì— ì›ë¦¬ ì„¤ëª…ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.</p>
            </div>
        </section>
    </main>

    <footer class="text-center p-6 text-gray-500 text-sm mt-8 border-t">
        <p>2015 ê°œì • êµìœ¡ê³¼ì • í™”í•™â…¡ | ì¤‘í™” ë°˜ì‘ê³¼ ì´ì˜¨ì˜ ì„±ì§ˆ</p>
        <p>Tip: ê°•ì‚°-ê°•ì—¼ê¸°ì˜ ì—¼ì€ ì¤‘ì„±, ê°•ì‚°-ì•½ì—¼ê¸°ì˜ ì—¼ì€ ì‚°ì„±, ì•½ì‚°-ê°•ì—¼ê¸°ì˜ ì—¼ì€ ì—¼ê¸°ì„±ì„ ë±ë‹ˆë‹¤.</p>
    </footer>

    <script>
        // Data: Salt Properties
        const salts = {
            'NaCl': { 
                name: 'ì—¼í™” ë‚˜íŠ¸ë¥¨', 
                type: 'neutral', 
                parents: 'ê°•ì‚°(HCl) + ê°•ì—¼ê¸°(NaOH)',
                desc: 'ê°•ì‚°ê³¼ ê°•ì—¼ê¸°ì˜ ë°˜ì‘ìœ¼ë¡œ ìƒì„±ëœ ì—¼ì…ë‹ˆë‹¤. ë¬¼ ì†ì—ì„œ ì´ì˜¨í™”ëœ Naâºì™€ Clâ»ëŠ” ë¬¼ê³¼ ë°˜ì‘í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ(ê°€ìˆ˜ë¶„í•´ ì•ˆ í•¨) ì•¡ì„±ì€ ì¤‘ì„±ì…ë‹ˆë‹¤.',
                equation: 'Naâº + Hâ‚‚O â†’ ë°˜ì‘ ì—†ìŒ / Clâ» + Hâ‚‚O â†’ ë°˜ì‘ ì—†ìŒ',
                ka: null, kb: null 
            },
            'CH3COONa': { 
                name: 'ì•„ì„¸íŠ¸ì‚° ë‚˜íŠ¸ë¥¨', 
                type: 'basic', 
                parents: 'ì•½ì‚°(CHâ‚ƒCOOH) + ê°•ì—¼ê¸°(NaOH)',
                desc: 'ì•½ì‚°ì˜ ì§ì—¼ê¸°ì¸ CHâ‚ƒCOOâ»ê°€ ë¬¼ê³¼ ë°˜ì‘í•˜ì—¬ ê°€ìˆ˜ë¶„í•´ë¥¼ ì¼ìœ¼í‚µë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ OHâ»(ìˆ˜ì‚°í™” ì´ì˜¨)ê°€ ìƒì„±ë˜ì–´ ìˆ˜ìš©ì•¡ì€ ì—¼ê¸°ì„±ì„ ë±ë‹ˆë‹¤.',
                equation: 'CHâ‚ƒCOOâ» + Hâ‚‚O â‡Œ CHâ‚ƒCOOH + OHâ»',
                kb: 5.6e-10 // Approximation
            },
            'NH4Cl': { 
                name: 'ì—¼í™” ì•”ëª¨ëŠ„', 
                type: 'acidic', 
                parents: 'ê°•ì‚°(HCl) + ì•½ì—¼ê¸°(NHâ‚ƒ)',
                desc: 'ì•½ì—¼ê¸°ì˜ ì§ì‚°ì¸ NHâ‚„âºê°€ ë¬¼ê³¼ ë°˜ì‘í•˜ì—¬ ê°€ìˆ˜ë¶„í•´ë¥¼ ì¼ìœ¼í‚µë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ Hâ‚ƒOâº(ì˜¥ì†ŒëŠ„ ì´ì˜¨)ê°€ ìƒì„±ë˜ì–´ ìˆ˜ìš©ì•¡ì€ ì‚°ì„±ì„ ë±ë‹ˆë‹¤.',
                equation: 'NHâ‚„âº + Hâ‚‚O â‡Œ NHâ‚ƒ + Hâ‚ƒOâº',
                ka: 5.6e-10 // Approximation
            },
            'KNO3': { 
                name: 'ì§ˆì‚° ì¹¼ë¥¨', 
                type: 'neutral', 
                parents: 'ê°•ì‚°(HNOâ‚ƒ) + ê°•ì—¼ê¸°(KOH)',
                desc: 'ê°•ì‚°ê³¼ ê°•ì—¼ê¸°ì˜ ë°˜ì‘ìœ¼ë¡œ ìƒì„±ëœ ì—¼ì…ë‹ˆë‹¤. Kâºì™€ NOâ‚ƒâ» ëª¨ë‘ ë¬¼ê³¼ ë°˜ì‘í•˜ì§€ ì•Šì•„ ì¤‘ì„±ì„ ìœ ì§€í•©ë‹ˆë‹¤.',
                equation: 'Kâº + Hâ‚‚O â†’ ë°˜ì‘ ì—†ìŒ / NOâ‚ƒâ» + Hâ‚‚O â†’ ë°˜ì‘ ì—†ìŒ',
                ka: null, kb: null
            },
            'Na2CO3': { 
                name: 'íƒ„ì‚° ë‚˜íŠ¸ë¥¨', 
                type: 'basic', 
                parents: 'ì•½ì‚°(Hâ‚‚COâ‚ƒ) + ê°•ì—¼ê¸°(NaOH)',
                desc: 'ì•½ì‚°ì˜ ì§ì—¼ê¸°ì¸ COâ‚ƒÂ²â»ê°€ ë¬¼ê³¼ ë°˜ì‘í•˜ì—¬ ê°€ìˆ˜ë¶„í•´ë¥¼ ì¼ìœ¼í‚µë‹ˆë‹¤. OHâ»ê°€ ë‹¤ëŸ‰ ìƒì„±ë˜ì–´ ê°•í•œ ì—¼ê¸°ì„±ì„ ë±ë‹ˆë‹¤.',
                equation: 'COâ‚ƒÂ²â» + Hâ‚‚O â‡Œ HCOâ‚ƒâ» + OHâ»',
                kb: 2.1e-4 // Approximation (Step 1)
            }
        };

        // DOM Elements
        const concInput = document.getElementById('concentration');
        const concDisplay = document.getElementById('concValue');
        
        // Update concentration display
        concInput.addEventListener('input', (e) => {
            concDisplay.textContent = parseFloat(e.target.value).toFixed(2) + " M";
        });

        // Main Logic
        function startExperiment() {
            const saltKey = document.getElementById('saltSelect').value;
            const concentration = parseFloat(concInput.value);

            if (!saltKey) {
                alert("ì‹¤í—˜í•  ì—¼ì„ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”.");
                return;
            }

            const saltData = salts[saltKey];
            
            // 1. Calculate pH (Simplified for High School level simulation)
            let ph = 7.00;
            if (saltData.type === 'neutral') {
                ph = 7.00;
            } else if (saltData.type === 'acidic') {
                // [H+] = sqrt(Ka * C)
                const h_conc = Math.sqrt(saltData.ka * concentration);
                ph = -Math.log10(h_conc);
            } else if (saltData.type === 'basic') {
                // [OH-] = sqrt(Kb * C)
                const oh_conc = Math.sqrt(saltData.kb * concentration);
                const poh = -Math.log10(oh_conc);
                ph = 14 - poh;
            }

            // 2. Determine Color (Universal Indicator approximation)
            let color = '#4ade80'; // Green (7)
            if (ph < 5) color = '#ef4444'; // Red
            else if (ph < 6.5) color = '#f97316'; // Orange
            else if (ph > 10) color = '#7e22ce'; // Purple
            else if (ph > 8) color = '#3b82f6'; // Blue
            
            // 3. Update Visuals (Animation)
            const liquid = document.getElementById('liquid');
            const phLabel = document.getElementById('phLabel');
            
            // Reset animation
            liquid.style.height = '0%';
            phLabel.style.opacity = '0';
            
            setTimeout(() => {
                liquid.style.height = '80%';
                liquid.style.backgroundColor = color;
                createBubbles(saltData.type);
            }, 100);

            setTimeout(() => {
                phLabel.innerText = `pH ${ph.toFixed(2)}`;
                phLabel.style.opacity = '1';
                updateExplanation(saltData, concentration, ph);
            }, 1100);
        }

        function createBubbles(type) {
            const container = document.getElementById('bubbles');
            container.innerHTML = '';
            if(type === 'neutral') return; // No vigorous reaction animation for neutral

            for(let i=0; i<10; i++) {
                const bubble = document.createElement('div');
                bubble.classList.add('bubble');
                bubble.style.left = `${Math.random() * 100}%`;
                bubble.style.width = `${Math.random() * 10 + 5}px`;
                bubble.style.height = bubble.style.width;
                bubble.style.animationDuration = `${Math.random() * 2 + 2}s`;
                bubble.style.animationDelay = `${Math.random() * 2}s`;
                container.appendChild(bubble);
            }
        }

        function updateExplanation(data, conc, ph) {
            document.getElementById('placeholderText').classList.add('hidden');
            document.getElementById('explanationArea').classList.remove('hidden');

            // Set Data
            document.getElementById('resSalt').innerText = data.name;
            document.getElementById('resConc').innerText = conc.toFixed(2) + " M";
            document.getElementById('resPH').innerText = ph.toFixed(2);
            
            let typeText = "ì¤‘ì„±";
            if (data.type === 'acidic') typeText = "ì‚°ì„± (Acidic)";
            if (data.type === 'basic') typeText = "ì—¼ê¸°ì„± (Basic)";
            document.getElementById('resType').innerText = typeText;

            // Set Explanation
            document.getElementById('hydrolysisText').innerHTML = 
                `<strong>[${data.parents}]</strong>ì˜ ë°˜ì‘ìœ¼ë¡œ ìƒì„±ëœ ì—¼ì…ë‹ˆë‹¤.<br>${data.desc}`;
            document.getElementById('reactionEquation').innerText = data.equation;

            // Generate Quiz
            generateQuiz(data);
        }

        function generateQuiz(data) {
            const quizArea = document.getElementById('quizQuestion');
            const optionsArea = document.getElementById('quizOptions');
            const feedback = document.getElementById('quizFeedback');
            
            optionsArea.innerHTML = '';
            feedback.classList.add('hidden');
            feedback.className = "text-sm font-bold mt-2 hidden"; // reset style

            // Dynamic Question Logic
            let q, a1, a2, correct;
            if (data.type === 'neutral') {
                q = `${data.name} ìˆ˜ìš©ì•¡ì´ ì¤‘ì„±ì¸ ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€ìš”?`;
                a1 = "êµ¬ì„± ì´ì˜¨ì´ ë¬¼ê³¼ ê°€ìˆ˜ë¶„í•´ ë°˜ì‘ì„ í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì´ë‹¤.";
                a2 = "ê°•ì‚°ì˜ ì´ì˜¨ì´ ë¬¼ê³¼ ë°˜ì‘í•˜ì—¬ H+ë¥¼ ë‚´ë†“ê¸° ë•Œë¬¸ì´ë‹¤.";
                correct = 1;
            } else if (data.type === 'acidic') {
                q = `${data.name} ìˆ˜ìš©ì•¡ì—ì„œ ì•¡ì„±ì„ ì‚°ì„±ìœ¼ë¡œ ë§Œë“œëŠ” ì´ì˜¨ì€?`;
                a1 = "Clâ» (ì—¼í™” ì´ì˜¨)";
                a2 = "NHâ‚„âº (ì•”ëª¨ëŠ„ ì´ì˜¨)"; // Specific to NH4Cl context generally
                correct = 2;
            } else {
                q = `${data.name} ìˆ˜ìš©ì•¡ì´ ì—¼ê¸°ì„±ì„ ë ëŠ” ì´ìœ ëŠ”?`;
                a1 = "ìŒì´ì˜¨ì´ ë¬¼ê³¼ ë°˜ì‘í•˜ì—¬ OHâ»ë¥¼ ìƒì„±í•˜ê¸° ë•Œë¬¸ì´ë‹¤.";
                a2 = "ì–‘ì´ì˜¨ì´ ë¬¼ê³¼ ë°˜ì‘í•˜ì—¬ Hâºë¥¼ ìƒì„±í•˜ê¸° ë•Œë¬¸ì´ë‹¤.";
                correct = 1;
            }

            quizArea.innerText = "Q. " + q;

            // Button 1
            const btn1 = document.createElement('button');
            btn1.className = "w-full text-left p-2 border rounded hover:bg-gray-100 text-sm";
            btn1.innerText = "1. " + a1;
            btn1.onclick = () => checkAnswer(1, correct);
            optionsArea.appendChild(btn1);

            // Button 2
            const btn2 = document.createElement('button');
            btn2.className = "w-full text-left p-2 border rounded hover:bg-gray-100 text-sm";
            btn2.innerText = "2. " + a2;
            btn2.onclick = () => checkAnswer(2, correct);
            optionsArea.appendChild(btn2);
        }

        function checkAnswer(selected, correct) {
            const feedback = document.getElementById('quizFeedback');
            feedback.classList.remove('hidden');
            if (selected === correct) {
                feedback.innerText = "â­• ì •ë‹µì…ë‹ˆë‹¤! ê°œë…ì„ ì™„ë²½í•˜ê²Œ ì´í•´í–ˆë„¤ìš”.";
                feedback.classList.add('text-green-600');
            } else {
                feedback.innerText = "âŒ ë‹¤ì‹œ ìƒê°í•´ë³´ì„¸ìš”. ê°€ìˆ˜ë¶„í•´ ì‹ì„ ì°¸ê³ í•˜ì„¸ìš”!";
                feedback.classList.add('text-red-500');
            }
        }

        function resetLab() {
            location.reload();
        }
    </script>
</body>
</html>