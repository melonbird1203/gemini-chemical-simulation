<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°€ìƒ ì‹¤í—˜: ìƒí™œ ì† ë¹„ì—´ íƒêµ¬</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f0f9ff; }
        .tab-btn { transition: all 0.3s; }
        .tab-btn.active { background-color: #3b82f6; color: white; border-bottom: 4px solid #1e40af; }
        .gauge-container { width: 100%; height: 30px; background: #e5e7eb; border-radius: 15px; overflow: hidden; position: relative; }
        .gauge-bar { height: 100%; transition: width 0.5s linear, background-color 0.5s; }
        .feedback-box { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="p-4 max-w-4xl mx-auto">

    <header class="text-center mb-8">
        <h1 class="text-3xl font-bold text-blue-800 mb-2">ğŸŒ¡ï¸ ìƒí™œ ì† ë¹„ì—´ íƒêµ¬ ì‹¤í—˜ì‹¤</h1>
        <p class="text-gray-600">ë¬¼ì§ˆì— ë”°ë¼ ì˜¨ë„ê°€ ì–´ë–»ê²Œ ë³€í•˜ëŠ”ì§€ ì‹¤í—˜í•˜ê³ , ìƒí™œ ì† ì›ë¦¬ë¥¼ ì°¾ì•„ë³´ì„¸ìš”!</p>
    </header>

    <div class="flex justify-center mb-6 space-x-4">
        <button onclick="setTab('hotpack')" id="btn-hotpack" class="tab-btn active px-6 py-3 rounded-lg bg-white shadow font-bold text-gray-600 hover:bg-blue-50">1. ì°œì§ˆíŒ© ì‹¤í—˜</button>
        <button onclick="setTab('pot')" id="btn-pot" class="tab-btn px-6 py-3 rounded-lg bg-white shadow font-bold text-gray-600 hover:bg-blue-50">2. ë¼ë©´ ëƒ„ë¹„ ì‹¤í—˜</button>
        <button onclick="setTab('engine')" id="btn-engine" class="tab-btn px-6 py-3 rounded-lg bg-white shadow font-bold text-gray-600 hover:bg-blue-50">3. ìë™ì°¨ ì—”ì§„ ì‹¤í—˜</button>
    </div>

    <main class="bg-white p-6 rounded-2xl shadow-xl min-h-[500px]">
        
        <div id="view-hotpack" class="scenario-view">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸ”¥ ì˜¤ë˜ê°€ëŠ” ì°œì§ˆíŒ© ë§Œë“¤ê¸°</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <p class="mb-4 text-gray-700">ì¶”ìš´ ê²¨ìš¸, ì°œì§ˆíŒ© ì•ˆì— ë¬´ì—‡ì„ ë„£ì–´ì•¼ ì˜¤ë«ë™ì•ˆ ë”°ëœ»í• ê¹Œìš”?</p>
                    <div class="space-y-3">
                        <label class="block p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                            <input type="radio" name="packMaterial" value="water" checked> 
                            <span class="font-bold ml-2">ë¬¼ (Water)</span> - ë¹„ì—´ì´ í¼ ($4.18 J/g\cdot^\circ C$)
                        </label>
                        <label class="block p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                            <input type="radio" name="packMaterial" value="sand"> 
                            <span class="font-bold ml-2">ëª¨ë˜ (Sand)</span> - ë¹„ì—´ì´ ì‘ìŒ (ì•½ $0.8 J/g\cdot^\circ C$)
                        </label>
                    </div>
                    <button onclick="runHotPack()" class="mt-6 w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 rounded-lg shadow transition">â„ï¸ ì‹íˆê¸° ì‹œì‘ (Start Cooling)</button>
                    <div id="feedback-hotpack" class="mt-4 hidden feedback-box p-4 bg-yellow-50 rounded border border-yellow-200 text-yellow-800"></div>
                </div>
                <div class="bg-gray-50 p-4 rounded-xl">
                    <canvas id="chartHotPack"></canvas>
                </div>
            </div>
        </div>

        <div id="view-pot" class="scenario-view hidden">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸœ ë¹¨ë¦¬ ë“ëŠ” ëƒ„ë¹„ ì°¾ê¸°</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <p class="mb-4 text-gray-700">ë°°ê°€ ë„ˆë¬´ ê³ íŒŒìš”! ì–´ë–¤ ëƒ„ë¹„ê°€ ë¬¼ì„ ë” ë¹¨ë¦¬ ë“ê²Œ í• ê¹Œìš”?</p>
                    <div class="flex justify-center space-x-4 mb-4">
                        <div id="pot-alu" class="cursor-pointer border-4 border-transparent hover:border-blue-300 rounded-lg p-2 text-center" onclick="selectPot('alu')">
                            <div class="w-24 h-24 bg-gray-300 rounded-full mx-auto flex items-center justify-center shadow-inner mb-2 text-4xl">ğŸ¥˜</div>
                            <div class="font-bold">ì–‘ì€ ëƒ„ë¹„</div>
                            <div class="text-xs text-gray-500">(ì•Œë£¨ë¯¸ëŠ„, ë¹„ì—´ ì‘ìŒ)</div>
                        </div>
                        <div id="pot-stone" class="cursor-pointer border-4 border-transparent hover:border-blue-300 rounded-lg p-2 text-center" onclick="selectPot('stone')">
                            <div class="w-24 h-24 bg-amber-800 rounded-full mx-auto flex items-center justify-center shadow-inner mb-2 text-4xl">ğŸ²</div>
                            <div class="font-bold">ëšë°°ê¸°</div>
                            <div class="text-xs text-gray-500">(ì„¸ë¼ë¯¹, ë¹„ì—´ í¼)</div>
                        </div>
                    </div>
                    <button onclick="runPot()" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 rounded-lg shadow transition">ğŸ”¥ ê°€ì—´ ì‹œì‘ (Heat Up)</button>
                    <div id="feedback-pot" class="mt-4 hidden feedback-box p-4 bg-red-50 rounded border border-red-200 text-red-800"></div>
                </div>
                <div class="flex flex-col justify-center items-center bg-gray-50 p-4 rounded-xl">
                    <div class="text-center mb-2 font-bold text-xl" id="timer-display">00:00</div>
                    <div class="gauge-container border border-gray-300">
                        <div id="pot-temp-bar" class="gauge-bar bg-blue-500" style="width: 20%;"></div>
                    </div>
                    <div class="flex justify-between w-full text-sm text-gray-500 mt-1">
                        <span>20Â°C</span>
                        <span>60Â°C</span>
                        <span>100Â°C (ë“ìŒ)</span>
                    </div>
                    <div id="pot-status" class="mt-4 text-2xl">ğŸ¥¶ ê°€ì—´ ì „</div>
                </div>
            </div>
        </div>

        <div id="view-engine" class="scenario-view hidden">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">ğŸš— ìë™ì°¨ ì—”ì§„ ì§€í‚¤ê¸°</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <p class="mb-4 text-gray-700">ì—”ì§„ì´ ê³¼ì—´ë˜ë©´ ê³ ì¥ë‚©ë‹ˆë‹¤. ëƒ‰ê°ìˆ˜ë¡œ ë¬´ì—‡ì„ ì¨ì•¼ í• ê¹Œìš”?</p>
                    <div class="space-y-3">
                        <label class="block p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                            <input type="radio" name="coolant" value="water" checked> 
                            <span class="font-bold ml-2">ë¬¼ (Water)</span> - ì—´ì„ ë§ì´ í¡ìˆ˜í•¨
                        </label>
                        <label class="block p-3 border rounded-lg cursor-pointer hover:bg-gray-50">
                            <input type="radio" name="coolant" value="oil"> 
                            <span class="font-bold ml-2">ê¸°ë¦„ (Oil)</span> - ì—´ì„ ì ê²Œ í¡ìˆ˜í•¨
                        </label>
                    </div>
                    <button onclick="runEngine()" class="mt-6 w-full bg-gray-800 hover:bg-gray-900 text-white font-bold py-3 rounded-lg shadow transition">ğŸï¸ ì—”ì§„ ê°€ë™ (Start Engine)</button>
                    <div id="feedback-engine" class="mt-4 hidden feedback-box p-4 bg-blue-50 rounded border border-blue-200 text-blue-800"></div>
                </div>
                <div class="bg-gray-50 p-4 rounded-xl flex flex-col justify-center items-center">
                    <div class="relative w-40 h-40">
                         <svg viewBox="0 0 100 50" class="w-full h-full">
                            <path d="M10 50 A 40 40 0 0 1 90 50" fill="none" stroke="#ddd" stroke-width="10" />
                            <path id="engine-gauge" d="M10 50 A 40 40 0 0 1 10 50" fill="none" stroke="red" stroke-width="10" stroke-dasharray="126" stroke-dashoffset="126" style="transition: stroke-dashoffset 2s ease-out;"/>
                            <text x="50" y="45" text-anchor="middle" font-size="10" fill="#333" font-weight="bold">TEMP</text>
                        </svg>
                    </div>
                    <div id="engine-status" class="font-bold text-lg mt-2 text-gray-700">ìƒíƒœ: ì •ì§€</div>
                </div>
            </div>
        </div>

    </main>

    <script>
        // State and Chart variables
        let currentTab = 'hotpack';
        let hotpackChart = null;
        let selectedPot = null;

        // Init Chart
        const ctx = document.getElementById('chartHotPack').getContext('2d');
        hotpackChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['0ë¶„', '10ë¶„', '20ë¶„', '30ë¶„', '40ë¶„', '50ë¶„', '60ë¶„'],
                datasets: []
            },
            options: {
                responsive: true,
                scales: { y: { min: 20, max: 90, title: {display: true, text: 'ì˜¨ë„ (Â°C)'} } }
            }
        });

        // Tab Switching Logic
        function setTab(tabName) {
            currentTab = tabName;
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.scenario-view').forEach(view => view.classList.add('hidden'));
            
            document.getElementById(`btn-${tabName}`).classList.add('active');
            document.getElementById(`view-${tabName}`).classList.remove('hidden');
        }

        // Scenario 1: Hot Pack Logic
        function runHotPack() {
            const material = document.querySelector('input[name="packMaterial"]:checked').value;
            const feedback = document.getElementById('feedback-hotpack');
            
            let label = "";
            let color = "";
            let data = [];

            // Simulation Data (Exponential Decay)
            if (material === 'water') {
                label = "ë¬¼ (ë¹„ì—´ í¼)";
                color = "#3b82f6";
                data = [80, 78, 76, 73, 70, 67, 64]; // Slow drop
                feedback.innerHTML = "<strong>âœ… í›Œë¥­í•œ ì„ íƒì…ë‹ˆë‹¤!</strong><br>ë¬¼ì€ ë¹„ì—´ì´ ì»¤ì„œ ì—´ì„ ë§ì´ í’ˆê³  ìˆìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ì˜¨ë„ê°€ ì•„ì£¼ ì²œì²œíˆ ë‚´ë ¤ê°€ ì˜¤ë«ë™ì•ˆ ë”°ëœ»í•¨ì„ ìœ ì§€í•  ìˆ˜ ìˆì–´ìš”.";
                feedback.className = "mt-4 feedback-box p-4 bg-blue-50 rounded border border-blue-200 text-blue-800 block";
            } else {
                label = "ëª¨ë˜ (ë¹„ì—´ ì‘ìŒ)";
                color = "#f97316";
                data = [80, 60, 45, 35, 28, 24, 22]; // Fast drop
                feedback.innerHTML = "<strong>âš ï¸ ë„ˆë¬´ ë¹¨ë¦¬ ì‹ì—ˆì–´ìš”!</strong><br>ëª¨ë˜ëŠ” ë¹„ì—´ì´ ì‘ì•„ í’ˆì„ ìˆ˜ ìˆëŠ” ì—´ì˜ ì–‘ì´ ì ìŠµë‹ˆë‹¤. ê·¸ë˜ì„œ ê¸ˆë°© ì°¨ê°€ì›Œì§‘ë‹ˆë‹¤. ì°œì§ˆíŒ© ì¬ë£Œë¡œëŠ” ì í•©í•˜ì§€ ì•Šì•„ìš”.";
                feedback.className = "mt-4 feedback-box p-4 bg-orange-50 rounded border border-orange-200 text-orange-800 block";
            }

            // Update Chart
            hotpackChart.data.datasets = [{
                label: label,
                data: data,
                borderColor: color,
                tension: 0.3
            }];
            hotpackChart.update();
        }

        // Scenario 2: Pot Logic
        function selectPot(type) {
            selectedPot = type;
            document.getElementById('pot-alu').className = type === 'alu' ? "cursor-pointer border-4 border-blue-500 rounded-lg p-2 text-center bg-blue-50" : "cursor-pointer border-4 border-transparent hover:border-blue-300 rounded-lg p-2 text-center";
            document.getElementById('pot-stone').className = type === 'stone' ? "cursor-pointer border-4 border-blue-500 rounded-lg p-2 text-center bg-blue-50" : "cursor-pointer border-4 border-transparent hover:border-blue-300 rounded-lg p-2 text-center";
        }

        function runPot() {
            if(!selectedPot) { alert("ëƒ„ë¹„ë¥¼ ë¨¼ì € ì„ íƒí•´ì£¼ì„¸ìš”!"); return; }
            
            const bar = document.getElementById('pot-temp-bar');
            const status = document.getElementById('pot-status');
            const feedback = document.getElementById('feedback-pot');
            const timer = document.getElementById('timer-display');
            
            let width = 20;
            let time = 0;
            let speed = selectedPot === 'alu' ? 2 : 0.5; // Aluminum heats faster
            
            feedback.classList.add('hidden');
            bar.style.transition = 'none';
            bar.style.width = '20%';
            bar.style.backgroundColor = '#3b82f6';
            status.innerText = "ğŸ”¥ ê°€ì—´ ì¤‘...";
            status.className = "mt-4 text-2xl text-orange-600 font-bold animate-pulse";

            let interval = setInterval(() => {
                width += speed;
                time += 1;
                
                // Timer format
                let min = Math.floor(time / 60);
                let sec = time % 60;
                timer.innerText = `${min < 10 ? '0'+min : min}:${sec < 10 ? '0'+sec : sec}`;

                // Bar update
                bar.style.width = `${width}%`;
                if(width > 60) bar.style.backgroundColor = '#ef4444'; // Red when hot

                if (width >= 100) {
                    clearInterval(interval);
                    status.innerText = "ğŸœ ë¬¼ì´ ë“ì—ˆìŠµë‹ˆë‹¤!";
                    status.className = "mt-4 text-2xl text-red-600 font-bold";
                    
                    if(selectedPot === 'alu') {
                        feedback.innerHTML = "<strong>âš¡ï¸ ì´ˆê³ ì† ê°€ì—´!</strong><br>ì–‘ì€ ëƒ„ë¹„(ì•Œë£¨ë¯¸ëŠ„)ëŠ” ë¹„ì—´ì´ ì‘ì•„ ì ì€ ì—´ë¡œë„ ì˜¨ë„ê°€ ê¸ˆë°© ì˜¬ë¼ê°‘ë‹ˆë‹¤. ë¼ë©´ ë“ì´ê¸°ì— ë”±ì´ì£ !";
                    } else {
                        feedback.innerHTML = "<strong>ğŸ¢ ë„ˆë¬´ ì˜¤ë˜ ê±¸ë ¤ìš”...</strong><br>ëšë°°ê¸°ëŠ” ë¹„ì—´ì´ ì»¤ì„œ ë°ì›Œì§€ëŠ” ë° ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦½ë‹ˆë‹¤. ëŒ€ì‹  í•œë²ˆ ë°ì›Œì§€ë©´ ì˜ ì‹ì§€ ì•Šì•„ ì°Œê°œ ìš”ë¦¬ì— ì¢‹ì•„ìš”.";
                    }
                    feedback.classList.remove('hidden');
                }
            }, 50);
        }

        // Scenario 3: Engine Logic
        function runEngine() {
            const coolant = document.querySelector('input[name="coolant"]:checked').value;
            const gauge = document.getElementById('engine-gauge');
            const status = document.getElementById('engine-status');
            const feedback = document.getElementById('feedback-engine');
            
            status.innerText = "ğŸï¸ ì—”ì§„ ê°€ë™ ì¤‘...";
            
            // Gauge animation logic (Stroke Dashoffset: 126 is empty, 0 is full)
            let targetOffset = 0;
            let color = "";

            if (coolant === 'water') {
                targetOffset = 60; // Stays in middle (Safe)
                color = "#22c55e"; // Green
                setTimeout(() => {
                    status.innerText = "âœ… ì˜¨ë„ ì•ˆì •ì ";
                    status.style.color = "green";
                    feedback.innerHTML = "<strong>ğŸ›¡ï¸ ì—”ì§„ ë³´í˜¸ ì„±ê³µ!</strong><br>ë¬¼ì€ ë¹„ì—´ì´ ë§¤ìš° ì»¤ì„œ ì—”ì§„ì—ì„œ ë°œìƒí•˜ëŠ” ì—„ì²­ë‚œ ì—´ì„ í¡ìˆ˜í•´ë„ ì˜¨ë„ê°€ ì‰½ê²Œ ì˜¤ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. ìµœê³ ì˜ ëƒ‰ê°ìˆ˜ì£ .";
                    feedback.classList.remove('hidden');
                }, 2100);
            } else {
                targetOffset = 0; // Goes to max (Danger)
                color = "#ef4444"; // Red
                setTimeout(() => {
                    status.innerText = "âš ï¸ ê³¼ì—´ ê²½ê³ !";
                    status.style.color = "red";
                    feedback.innerHTML = "<strong>ğŸ”¥ ì—”ì§„ ê³¼ì—´!</strong><br>ê¸°ë¦„ì€ ë¬¼ë³´ë‹¤ ë¹„ì—´ì´ ì‘ì•„ ì—”ì§„ ì—´ì„ ë°›ìœ¼ë©´ ì˜¨ë„ê°€ ê¸‰ê²©íˆ ìƒìŠ¹í•©ë‹ˆë‹¤. ëƒ‰ê°ìˆ˜ë¡œ ì“°ë©´ ìœ„í—˜í•´ìš”!";
                    feedback.classList.remove('hidden');
                }, 2100);
            }

            gauge.style.stroke = color;
            gauge.style.strokeDashoffset = targetOffset;
        }
    </script>
</body>
</html>