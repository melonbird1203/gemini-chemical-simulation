<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¹„ëˆ—ë°©ìš¸ ì…ì íƒêµ¬ ì‹¤í—˜ì‹¤ | ì¤‘2 ê³¼í•™</title>
    <style>
        :root {
            --primary-color: #4a90e2;
            --secondary-color: #f5f7fa;
            --accent-color: #ff6b6b;
            --text-color: #333;
            --success-color: #2ecc71;
        }

        body {
            font-family: 'Pretendard', 'Malgun Gothic', sans-serif;
            background-color: #eef2f5;
            color: var(--text-color);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            width: 100%;
            max-width: 1000px;
        }

        h1 { margin: 0; color: var(--primary-color); font-size: 1.8rem; }
        .subtitle { color: #666; margin-top: 5px; font-size: 0.95rem; }

        .container {
            display: flex;
            gap: 20px;
            width: 100%;
            max-width: 1000px;
            flex-wrap: wrap;
        }

        /* ì™¼ìª½: ì‹¤í—˜ ì¡°ì‘ íŒ¨ë„ */
        .control-panel {
            flex: 1;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            min-width: 300px;
        }

        .control-group { margin-bottom: 25px; }
        label { display: block; font-weight: bold; margin-bottom: 8px; }
        
        input[type="range"] { width: 100%; cursor: pointer; }
        
        .toggle-group {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .btn-toggle {
            padding: 8px 16px;
            border: 2px solid var(--primary-color);
            background: white;
            color: var(--primary-color);
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s;
        }
        
        .btn-toggle.active {
            background: var(--primary-color);
            color: white;
        }

        .status-box {
            background: var(--secondary-color);
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        /* ì˜¤ë¥¸ìª½: ì‹œê°í™” ì˜ì—­ */
        .visualization-area {
            flex: 2;
            display: flex;
            flex-direction: column;
            gap: 20px;
            min-width: 300px;
        }

        /* 1. ë§¤í¬ë¡œ ë·° (ë¹„ëˆ—ë°©ìš¸) */
        .macro-view {
            background: linear-gradient(to bottom, #87CEEB, #E0F6FF);
            height: 300px;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }

        .bubble {
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.1), rgba(255,255,255,0.05) 60%, rgba(255,255,255,0.4) 100%);
            box-shadow: inset 0 0 20px rgba(255,255,255,0.5), 0 0 10px rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.6);
            transition: width 0.1s, height 0.1s;
            position: relative;
        }
        
        /* ê°„ì„­ ë¬´ëŠ¬ íš¨ê³¼ */
        .bubble::after {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            border-radius: 50%;
            background: linear-gradient(45deg, rgba(255,0,0,0.1), rgba(0,255,0,0.1), rgba(0,0,255,0.1));
            animation: swirl 5s infinite linear;
        }

        @keyframes swirl { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        .burst-effect {
            position: absolute;
            width: 100%; height: 100%;
            display: none;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent-color);
            background: rgba(255,255,255,0.8);
            z-index: 10;
        }

        /* 2. ë§ˆì´í¬ë¡œ ë·° (ì…ì ëª¨ë¸) */
        .micro-view {
            background: #2c3e50;
            height: 200px;
            border-radius: 15px;
            position: relative;
            padding: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .magnifier-label {
            position: absolute;
            top: 10px; left: 10px;
            background: rgba(255,255,255,0.9);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            font-weight: bold;
            z-index: 5;
        }

        canvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        /* í•™ìŠµ ê°€ì´ë“œ ë° í€´ì¦ˆ */
        .learning-section {
            width: 100%;
            max-width: 1000px;
            background: white;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .quiz-box {
            background: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 15px;
            margin-top: 15px;
        }

        .hidden { display: none; }
        
        .instruction-step {
            font-weight: bold;
            color: var(--primary-color);
        }
    </style>
</head>
<body>

<header>
    <h1>ğŸ§¼ ë¹„ëˆ—ë°©ìš¸ ì…ì íƒêµ¬ ì‹¤í—˜ì‹¤</h1>
    <div class="subtitle">ì¤‘2 ê³¼í•™: â… -1. ì›ì†Œì™€ ë¬¼ì§ˆì˜ êµ¬ì„± | í•™ìŠµëª©í‘œ: ë¬¼ì§ˆì´ ì…ìë¡œ êµ¬ì„±ë˜ì–´ ìˆìŒì„ ì¶”ë¡ í•œë‹¤.</div>
</header>

<div class="container">
    <div class="control-panel">
        <h3>ğŸ›ï¸ ì‹¤í—˜ ì¡°ê±´ ì„¤ì •</h3>
        
        <div class="control-group">
            <label>1. ë¹„ëˆ—ë¬¼ ì¬ë£Œ ì„ íƒ (ì²¨ê°€ë¬¼)</label>
            <div class="toggle-group">
                <button class="btn-toggle active" id="btnBasic" onclick="setAdditive('basic')">ê¸°ë³¸ ë¹„ëˆ—ë¬¼</button>
                <button class="btn-toggle" id="btnGlycerin" onclick="setAdditive('glycerin')">ê¸€ë¦¬ì„¸ë¦° ì²¨ê°€</button>
            </div>
            <p id="additiveDesc" style="font-size: 0.8rem; color: #666;">ê¸°ë³¸ ë¹„ëˆ—ë¬¼ì…ë‹ˆë‹¤. ë¬¼ì´ ì¦ë°œí•˜ê¸° ì‰½ìŠµë‹ˆë‹¤.</p>
        </div>

        <div class="control-group">
            <label>2. ê³µê¸° ì£¼ì… (í›„~ í•˜ê³  ë¶ˆì–´ë³´ì„¸ìš”)</label>
            <input type="range" id="airSlider" min="0" max="100" value="0" step="1" oninput="updateSimulation()">
            <div style="display: flex; justify-content: space-between; font-size: 0.8rem; margin-top: 5px;">
                <span>ì‘ìŒ</span>
                <span id="airValue">0%</span>
                <span>í¼</span>
            </div>
        </div>

        <div class="status-box">
            <h4>ğŸ“Š ì‹¤ì‹œê°„ ê´€ì°° ë…¸íŠ¸</h4>
            <p><strong>ë¹„ëˆ—ë°©ìš¸ ë‘ê»˜:</strong> <span id="thicknessValue">ë§¤ìš° ë‘êº¼ì›€</span></p>
            <p><strong>ì…ì ê°„ ê±°ë¦¬:</strong> <span id="particleDistValue">ë§¤ìš° ê°€ê¹Œì›€</span></p>
            <div id="feedbackText" style="color: var(--primary-color); font-weight: bold; margin-top: 10px;">
                ìŠ¬ë¼ì´ë”ë¥¼ ì›€ì§ì—¬ ê³µê¸°ë¥¼ ë„£ì–´ë³´ì„¸ìš”!
            </div>
        </div>
        
        <button onclick="resetExperiment()" style="width: 100%; margin-top: 20px; padding: 10px; background: #666; color: white; border: none; border-radius: 8px; cursor: pointer;">ì‹¤í—˜ ì´ˆê¸°í™”</button>
    </div>

    <div class="visualization-area">
        <div class="macro-view">
            <div id="bubble" class="bubble" style="width: 0px; height: 0px;"></div>
            <div id="burstMessage" class="burst-effect">íŒ¡! í„°ì¡ŒìŠµë‹ˆë‹¤!</div>
        </div>

        <div class="micro-view">
            <div class="magnifier-label">ğŸ” í˜„ë¯¸ê²½ í™•ëŒ€ (ë¹„ëˆ—ë°©ìš¸ ë§‰ í‘œë©´)</div>
            <canvas id="particleCanvas"></canvas>
        </div>
    </div>
</div>

<div class="learning-section">
    <h3>ğŸ’¡ í•µì‹¬ ê°œë… ì •ë¦¬</h3>
    <ul>
        <li>ë¹„ëˆ—ë°©ìš¸ ë§‰ì€ ì—°ì†ëœ ë§‰ì²˜ëŸ¼ ë³´ì´ì§€ë§Œ, ì‹¤ì œë¡œëŠ” ì•„ì£¼ ì‘ì€ <strong>ì…ì(ë¬¼ ë¶„ìì™€ ë¹„ëˆ„ ë¶„ì)</strong>ë“¤ì´ ì„œë¡œ ì¡ì•„ë‹¹ê¸°ë©° ì—°ê²°ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</li>
        <li>ê³µê¸°ë¥¼ ë¶ˆì–´ ë„£ìœ¼ë©´ í‘œë©´ì ì´ ë„“ì–´ì§€ë©´ì„œ <strong>ì…ì ì‚¬ì´ì˜ ê±°ë¦¬ê°€ ë©€ì–´ì§‘ë‹ˆë‹¤.</strong></li>
        <li>ì…ì ì‚¬ì´ê°€ ë„ˆë¬´ ë©€ì–´ì§€ë©´ ì„œë¡œ ì¡ì•„ë‹¹ê¸°ëŠ” í˜(ì¸ë ¥)ì´ ëŠì–´ì ¸ ë¹„ëˆ—ë°©ìš¸ì´ í„°ì§€ê²Œ ë©ë‹ˆë‹¤. ì´ê²ƒì€ <strong>ë¬¼ì§ˆì´ ì…ìë¡œ ì´ë£¨ì–´ì ¸ ìˆìŒ</strong>ì„ ë³´ì—¬ì£¼ëŠ” ì¦ê±°ì…ë‹ˆë‹¤.</li>
    </ul>

    <div class="quiz-box">
        <h4>ğŸ¤” ìƒê°í•´ë³´ê¸° (Self Check)</h4>
        <p><strong>Q. ê¸€ë¦¬ì„¸ë¦°ì„ ë„£ì—ˆì„ ë•Œ ë¹„ëˆ—ë°©ìš¸ì´ ë” í¬ê²Œ ì»¤ì§€ëŠ” ì´ìœ ëŠ” ë¬´ì—‡ì¼ê¹Œìš”?</strong></p>
        <details>
            <summary style="cursor: pointer; color: var(--primary-color); font-weight: bold;">ì •ë‹µ ë° í•´ì„¤ ë³´ê¸°</summary>
            <p style="margin-top: 10px;">
                <strong>ì •ë‹µ:</strong> ê¸€ë¦¬ì„¸ë¦° ì…ìê°€ ë¬¼ ì…ì ì‚¬ì´ì—ì„œ ë¬¼ì´ ì¦ë°œí•˜ëŠ” ê²ƒì„ ë§‰ê³ , ì…ìë“¤ë¼ë¦¬ ì„œë¡œ ì¡ì•„ë‹¹ê¸°ëŠ” í˜ì„ ìœ ì§€í•˜ë„ë¡ ë„ì™€ì£¼ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. <br>
                ì¦‰, ì…ì ê°„ê²©ì´ ì¡°ê¸ˆ ë” ë©€ì–´ì ¸ë„ ê²°í•©ì´ ëŠì–´ì§€ì§€ ì•Šê³  ë²„í‹¸ ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.
            </p>
        </details>
    </div>
</div>

<script>
    // ìƒíƒœ ë³€ìˆ˜
    let airAmount = 0;
    let isBurst = false;
    let additiveType = 'basic'; // basic, glycerin
    const MAX_SIZE_BASIC = 70; // ê¸°ë³¸ í„°ì§ ì„ê³„ê°’ (ìŠ¬ë¼ì´ë” ê¸°ì¤€)
    const MAX_SIZE_GLYCERIN = 95; // ê¸€ë¦¬ì„¸ë¦° í„°ì§ ì„ê³„ê°’

    // DOM ìš”ì†Œ
    const bubble = document.getElementById('bubble');
    const airSlider = document.getElementById('airSlider');
    const airValue = document.getElementById('airValue');
    const burstMessage = document.getElementById('burstMessage');
    const feedbackText = document.getElementById('feedbackText');
    const thicknessValue = document.getElementById('thicknessValue');
    const particleDistValue = document.getElementById('particleDistValue');
    const additiveDesc = document.getElementById('additiveDesc');
    
    // Canvas ì„¤ì • (ì…ì ë·°)
    const canvas = document.getElementById('particleCanvas');
    const ctx = canvas.getContext('2d');
    let particles = [];

    // ì´ˆê¸°í™”
    function initParticles() {
        canvas.width = canvas.parentElement.offsetWidth;
        canvas.height = canvas.parentElement.offsetHeight;
        particles = [];
        
        // ì…ì ìƒì„± (ê²©ì í˜•íƒœ)
        const rows = 5;
        const cols = 8;
        for(let i=0; i<rows; i++) {
            for(let j=0; j<cols; j++) {
                particles.push({
                    baseX: (canvas.width / cols) * j + 30,
                    baseY: (canvas.height / rows) * i + 30,
                    x: 0,
                    y: 0,
                    jitter: Math.random() * 2 // ì•½ê°„ì˜ ìì—°ìŠ¤ëŸ¬ìš´ ë–¨ë¦¼
                });
            }
        }
    }
    window.addEventListener('resize', initParticles);
    initParticles();

    // ì²¨ê°€ë¬¼ ì„¤ì • í•¨ìˆ˜
    function setAdditive(type) {
        if(isBurst) resetExperiment();
        
        additiveType = type;
        document.getElementById('btnBasic').classList.toggle('active', type === 'basic');
        document.getElementById('btnGlycerin').classList.toggle('active', type === 'glycerin');
        
        if(type === 'basic') {
            additiveDesc.innerHTML = "ê¸°ë³¸ ë¹„ëˆ—ë¬¼ì…ë‹ˆë‹¤. ë¬¼ ë¶„ìê°€ ì‰½ê²Œ ì¦ë°œí•˜ì—¬ ì…ì ê²°í•©ì´ ë¹¨ë¦¬ ëŠì–´ì§‘ë‹ˆë‹¤.";
        } else {
            additiveDesc.innerHTML = "ê¸€ë¦¬ì„¸ë¦°ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤! ì…ì ì‚¬ì´ì˜ ê²°í•©ì„ ëˆëˆí•˜ê²Œ ë§Œë“¤ì–´ ë” í¬ê²Œ ë¶ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.";
        }
        updateSimulation();
    }

    // ì‹œë®¬ë ˆì´ì…˜ ë©”ì¸ ë£¨í”„
    function updateSimulation() {
        if (isBurst) return;

        airAmount = parseInt(airSlider.value);
        airValue.innerText = airAmount + "%";

        // 1. ë¹„ëˆ—ë°©ìš¸ í¬ê¸° ì—…ë°ì´íŠ¸
        const bubbleSize = airAmount * 3; // í”½ì…€ ë‹¨ìœ„ ë³€í™˜
        bubble.style.width = bubbleSize + 'px';
        bubble.style.height = bubbleSize + 'px';
        
        // 2. í„°ì§ ë¡œì§ ì²´í¬
        let threshold = (additiveType === 'basic') ? MAX_SIZE_BASIC : MAX_SIZE_GLYCERIN;
        
        // ì„ê³„ê°’ ê·¼ì²˜ì—ì„œ í”ë“¤ë¦¼ íš¨ê³¼ ì¶”ê°€
        if (airAmount > threshold - 10) {
            bubble.style.transform = `translate(${Math.random()*4-2}px, ${Math.random()*4-2}px)`;
            feedbackText.innerText = "âš ï¸ ê²½ê³ ! ì…ì ì‚¬ì´ê°€ ë„ˆë¬´ ë©€ì–´ì§€ê³  ìˆì–´ìš”!";
            feedbackText.style.color = "red";
        } else {
            bubble.style.transform = "none";
            updateFeedbackText(airAmount);
        }

        if (airAmount >= threshold) {
            burstBubble();
            return;
        }

        // 3. ì…ì ë·° ì—…ë°ì´íŠ¸ (Canvas ê·¸ë¦¬ê¸°)
        drawParticles(airAmount);
        updateStats(airAmount, threshold);
    }

    function updateStats(amount, threshold) {
        const ratio = amount / threshold;
        
        // ë‘ê»˜ ê³„ì‚° (ê°€ìƒ)
        if(ratio < 0.3) thicknessValue.innerText = "ë§¤ìš° ë‘êº¼ì›€ (ì•ˆì „)";
        else if(ratio < 0.6) thicknessValue.innerText = "ë³´í†µ";
        else if(ratio < 0.9) thicknessValue.innerText = "ì–‡ìŒ";
        else thicknessValue.innerText = "ë§¤ìš° ì–‡ìŒ (ìœ„í—˜!)";

        // ì…ì ê±°ë¦¬
        if(ratio < 0.3) particleDistValue.innerText = "ì´˜ì´˜í•¨ â—â—â—";
        else if(ratio < 0.6) particleDistValue.innerText = "ë³´í†µ â— â— â—";
        else if(ratio < 0.9) particleDistValue.innerText = "ë©€ì–´ì§ â—  â—  â—";
        else particleDistValue.innerText = "ëŠì–´ì§€ê¸° ì§ì „ â—   â—   â—";
    }

    function updateFeedbackText(amount) {
        feedbackText.style.color = "var(--primary-color)";
        if(amount === 0) feedbackText.innerText = "ìŠ¬ë¼ì´ë”ë¥¼ ì›€ì§ì—¬ ê³µê¸°ë¥¼ ë„£ì–´ë³´ì„¸ìš”!";
        else if(amount < 30) feedbackText.innerText = "ë¹„ëˆ—ë°©ìš¸ì´ ì»¤ì§€ë©´ì„œ ë§‰ì´ ì–‡ì•„ì§€ê³  ìˆìŠµë‹ˆë‹¤.";
        else if(amount < 60) feedbackText.innerText = "í™•ëŒ€ í™”ë©´ì„ ë³´ì„¸ìš”. ì…ì ì‚¬ì´ê°€ ë©€ì–´ì§€ê³  ìˆì£ ?";
        else feedbackText.innerText = "ì¡°ì‹¬í•˜ì„¸ìš”! ë§‰ì´ ì•„ì£¼ ì–‡ì•„ì¡ŒìŠµë‹ˆë‹¤.";
    }

    function drawParticles(amount) {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        
        // ê³µê¸°ëŸ‰ì— ë”°ë¼ ì…ì ì‚¬ì´ ê°„ê²© ë²Œì–´ì§ (Zoom in íš¨ê³¼ì²˜ëŸ¼)
        const expansionFactor = 1 + (amount / 100) * 1.5; 
        
        ctx.fillStyle = "#87CEEB"; // ë¬¼/ë¹„ëˆ„ ì…ì ìƒ‰
        if(additiveType === 'glycerin') ctx.fillStyle = "#FFA500"; // ê¸€ë¦¬ì„¸ë¦° ì„ì¸ ìƒ‰
        
        particles.forEach(p => {
            // ì¤‘ì‹¬ ê¸°ì¤€ìœ¼ë¡œ í¼ì ¸ë‚˜ê°€ê²Œ ê³„ì‚°
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            let distFromCenterX = p.baseX - centerX;
            let distFromCenterY = p.baseY - centerY;
            
            let currentX = centerX + distFromCenterX * expansionFactor;
            let currentY = centerY + distFromCenterY * expansionFactor;

            // ì…ì ê·¸ë¦¬ê¸°
            ctx.beginPath();
            ctx.arc(currentX, currentY, 6, 0, Math.PI * 2);
            ctx.fill();

            // ì…ì ì‚¬ì´ ì—°ê²°ì„  (ê²°í•©ë ¥ ì‹œê°í™”)
            // ë„ˆë¬´ ë©€ì–´ì§€ë©´ ì„ ì´ ì–‡ì•„ì§€ë‹¤ê°€ ì‚¬ë¼ì§
            if (amount < 80) {
                ctx.strokeStyle = `rgba(255, 255, 255, ${1 - amount/100})`;
                ctx.lineWidth = 2;
                // ê°„ë‹¨íˆ ì˜¤ë¥¸ìª½ ì…ìì™€ ì—°ê²°í•˜ëŠ” í‰ë‚´
                ctx.beginPath();
                ctx.moveTo(currentX, currentY);
                ctx.lineTo(currentX + (30 * expansionFactor), currentY); // ê°€ìƒì˜ ì˜† ì…ì
                ctx.stroke();
            }
        });
    }

    function burstBubble() {
        isBurst = true;
        bubble.style.display = 'none';
        burstMessage.style.display = 'flex';
        feedbackText.innerText = "íŒ¡! ì…ì ì‚¬ì´ê°€ ë„ˆë¬´ ë©€ì–´ì ¸ì„œ ê²°í•©ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤.";
        feedbackText.style.color = "var(--accent-color)";
        
        // ìº”ë²„ìŠ¤ì— í„°ì§ íš¨ê³¼ ê·¸ë¦¬ê¸°
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ctx.font = "20px Arial";
        ctx.fillStyle = "white";
        ctx.fillText("ê²°í•© íŒŒê´´! (ì…ìê°€ í©ì–´ì§)", 50, 100);
    }

    function resetExperiment() {
        isBurst = false;
        airSlider.value = 0;
        bubble.style.display = 'block';
        bubble.style.width = '0px';
        bubble.style.height = '0px';
        burstMessage.style.display = 'none';
        
        // ì• ë‹ˆë©”ì´ì…˜ ì´ˆê¸°í™”
        initParticles();
        updateSimulation();
        feedbackText.innerText = "ì‹¤í—˜ì´ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œì‘í•´ë³´ì„¸ìš”.";
        feedbackText.style.color = "var(--text-color)";
    }

    // ì´ˆê¸° ì‹¤í–‰
    updateSimulation();
    animate();

    function animate() {
        if(!isBurst) {
            // ë¯¸ì„¸í•œ ì…ì ì›€ì§ì„ (ë¸Œë¼ìš´ ìš´ë™ ëŠë‚Œ)
            requestAnimationFrame(animate);
        }
    }
</script>

</body>
</html>